(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{12:function(e,n,t){e.exports={cellSize:"32px",Cell:"Cell_Cell__3u3Nf",Visible:"Cell_Visible__1eq4A",Busted:"Cell_Busted__3JYH_",Wrong:"Cell_Wrong__2nly2",Value1:"Cell_Value1__25Qg8",Value2:"Cell_Value2__1hBs0",Value3:"Cell_Value3__2drs4",Value4:"Cell_Value4__1gdbL",Value5:"Cell_Value5__QthWi",Value6:"Cell_Value6__37Sl7",Value7:"Cell_Value7__1vwPH",Value8:"Cell_Value8__3BFOy"}},43:function(e,n,t){e.exports={Header:"Header_Header__1FPOU",Title:"Header_Title__4K5Cg",Link:"Header_Link__2yTt4"}},44:function(e,n,t){e.exports={MineField:"MineField_MineField__2mxCG",Row9:"MineField_Row9__1Jl79",Row16:"MineField_Row16__A3Kv1",Row30:"MineField_Row30__1UeKK",Disabled:"MineField_Disabled__39wsP"}},46:function(e,n,t){e.exports={Footer:"Footer_Footer__2kUlx",Link:"Footer_Link__1JXGc"}},48:function(e,n,t){e.exports={MineFieldParams:"MineFieldParams_MineFieldParams__1Fhcb",Radio:"MineFieldParams_Radio__hLjYF"}},51:function(e,n,t){e.exports={Face:"Face_Face__d_Lpq"}},52:function(e,n,t){e.exports={Indicators:"Indicators_Indicators__3mfRs"}},53:function(e,n,t){e.exports={Minesweeper:"Minesweeper_Minesweeper__15l4n"}},60:function(e,n,t){},71:function(e,n,t){"use strict";t.r(n);t(60);var i,a=t(9),c=t(7),o=t(1),u=t.n(o),s=t(46),r=t.n(s),l=t(0),d=function(){return Object(l.jsx)("footer",{className:r.a.Footer,children:Object(l.jsxs)("span",{children:["Powered by",Object(l.jsx)("a",{className:r.a.Link,href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer",children:Object(l.jsx)(c.a,{icon:["fab","github"]})}),"\xa9",Object(l.jsx)("span",{children:(new Date).getFullYear()})]})})},f=Object(o.memo)(d),b=t(43),j=t.n(b),m=function(){return Object(l.jsxs)("header",{className:j.a.Header,children:[Object(l.jsx)("span",{className:j.a.Title,children:"Minesweeper"}),Object(l.jsx)("a",{className:j.a.Link,href:"https://github.com/FakeMetalFan/minesweeper",target:"_blank",rel:"noopener noreferrer",children:Object(l.jsx)(c.a,{icon:["fab","github"]})})]})},h=Object(o.memo)(m),O=Object(o.createContext)({mineField:[],mineFieldParams:{},mineFieldStatus:{},setMineFieldParams:function(){},setupMineField:function(){},revealCell:function(){},toggleFlag:function(){},revealNeighbors:function(){},reset:function(){}}),g=t(57),v=t(28);!function(e){e[e.Hidden=0]="Hidden",e[e.Visible=1]="Visible",e[e.Flagged=2]="Flagged",e[e.Busted=3]="Busted",e[e.Wrong=4]="Wrong"}(i||(i={}));var p,x=i;!function(e){e[e.Empty=0]="Empty",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Mine=9]="Mine"}(p||(p={}));var F=p,_=t(58),C=function(e){return Object(a.a)(Object(a.a)({},e),{},{id:Object(_.a)()})},M=C({name:"Beginner",rowsCount:9,columnsCount:9,minesCount:9}),w=[M,C({name:"Intermediate",rowsCount:16,columnsCount:16,minesCount:40}),C({name:"Expert",rowsCount:30,columnsCount:16,minesCount:99})],y=function(e){for(var n=Object(o.useRef)(!1),t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];Object(o.useEffect)((function(){n.current?e():n.current=!0}),i)},k=t(29),E=t(73),S=t(74),N=t(14),B=t(15),V=function(){function e(n){Object(N.a)(this,e),this.cell=n}return Object(B.a)(e,[{key:"isEqual",value:function(e,n){return this.cell[e]===n}},{key:"isEmpty",get:function(){return this.isEqual("value",F.Empty)}},{key:"isMined",get:function(){return this.isEqual("value",F.Mine)}},{key:"isHidden",get:function(){return this.isEqual("appearance",x.Hidden)}},{key:"isFlagged",get:function(){return this.isEqual("appearance",x.Flagged)}},{key:"isWrong",get:function(){return this.isEqual("appearance",x.Wrong)}},{key:"isBusted",get:function(){return this.isEqual("appearance",x.Busted)}},{key:"isMisplacedFlag",get:function(){return!this.isMined&&this.isFlagged}}]),e}(),P=t(72),I=function(){function e(n){Object(N.a)(this,e),this.mineField=n}return Object(B.a)(e,[{key:"isBusted",value:function(){return this.mineField.some((function(e){return new V(e).isBusted}))}},{key:"isSolved",value:function(){return!Object(P.a)(this.mineField,(function(e){return new V(e).isMined})).some((function(e){return new V(e).isHidden}))}}]),e}(),H=function(){function e(n){Object(N.a)(this,e),this.length=n}return Object(B.a)(e,[{key:"to2D",value:function(e){var n=e%this.length;return{rowIndex:n,columnIndex:(e-n)/this.length}}},{key:"to1D",value:function(e,n){return n*this.length+e}}]),e}(),R=function(e,n){return e>-1&&e<n},D=function(){function e(n,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new H(n);Object(N.a)(this,e),this.rowsCount=n,this.columnsCount=t,this.indexUtils=i}return Object(B.a)(e,[{key:"getIndexes",value:function(e){for(var n=e.index,t=this.indexUtils.to2D(n),i=t.rowIndex,a=t.columnIndex,c=[],o=-1;o<2;o+=1)for(var u=-1;u<2;u+=1)if(o||u){var s=i+o,r=a+u;R(s,this.rowsCount)&&R(r,this.columnsCount)&&c.push(this.indexUtils.to1D(s,r))}return c}},{key:"canFloodFill",value:function(e,n){return!this.getIndexes(n).some((function(n){var t=new V(e[n]),i=t.isMined,a=t.isFlagged;return i&&!a}))}},{key:"canReveal",value:function(e,n){return this.countMined(e,n)===this.countBy(e,n,"isFlagged")}},{key:"countMined",value:function(e,n){return this.countBy(e,n,"isMined")}},{key:"countBy",value:function(e,n,t){return this.getIndexes(n).reduce((function(n,i){return new V(e[i])[t]?n+1:n}),0)}}]),e}(),L=function(){var e=Object(o.useState)(M),n=Object(v.a)(e,2),t=n[0],i=n[1],c=t.rowsCount,u=t.columnsCount,s=t.minesCount,r=c*u,l=Object(o.useMemo)((function(){return Array.from({length:r},(function(e,n){return C({index:n,value:F.Empty,appearance:x.Hidden})}))}),[r]),d=Object(o.useState)(l),f=Object(v.a)(d,2),b=f[0],j=f[1],m={isSetup:!1,isBusted:!1,isSolved:!1,hiddenMinesCount:s},h=Object(o.useState)(m),O=Object(v.a)(h,2),p=O[0],_=O[1],w=new D(c,u),N=function(e,n){return Object(k.a)(b,(function(t){null===n||void 0===n||n(t),t[e.index].appearance=x.Visible,function e(n){w.canFloodFill(t,n)&&w.getIndexes(n).forEach((function(n){var i=t[n],a=new V(i),c=a.isMined,o=a.isHidden,u=a.isFlagged;c||!o||u||(i.appearance=x.Visible,e(i))}))}(e)}))},B=function(e,n){return Object(k.a)(b,(function(e){n(e),e.forEach((function(e){var n=new V(e),t=n.isMisplacedFlag,i=n.isMined,a=n.isBusted,c=n.isFlagged;t?e.appearance=x.Wrong:!i||a||c||(e.appearance=x.Visible)}))}))},P=function(){j(l),_(m)};return y((function(){P()}),l),y((function(){var e=new I(b);e.isBusted()?_((function(e){return Object(a.a)(Object(a.a)({},e),{},{isBusted:!0})})):e.isSolved()&&(j((function(e){return Object(k.a)(e,(function(e){e.forEach((function(e){new V(e).isMined&&(e.appearance=x.Flagged)}))}))})),_((function(e){return Object(a.a)(Object(a.a)({},e),{},{isSolved:!0,hiddenMinesCount:0})})))}),b),{mineField:b,mineFieldParams:t,mineFieldStatus:p,setMineFieldParams:i,setupMineField:function(e){j(N(e,(function(n){for(var t=Object(E.a)(Object(S.a)(r),[e.index].concat(Object(g.a)(w.getIndexes(e)))),i=new Set;i.size<s;)i.add(t[Math.floor(Math.random()*t.length)]);i.forEach((function(e){n[e].value=F.Mine})),n.forEach((function(e){new V(e).isMined||(e.value=w.countMined(n,e))}))}))),_((function(e){return Object(a.a)(Object(a.a)({},e),{},{isSetup:!0})}))},revealCell:function(e){j(new V(e).isMined?B(0,(function(n){n[e.index].appearance=x.Busted})):N(e))},toggleFlag:function(e){var n=new V(e).isFlagged;j((function(t){return Object(k.a)(t,(function(t){t[e.index].appearance=n?x.Hidden:x.Flagged}))})),_((function(e){return Object(k.a)(e,(function(e){e.hiddenMinesCount+=n?1:-1}))}))},revealNeighbors:function(e){w.canFloodFill(b,e)?j(N(e)):w.canReveal(b,e)&&j(B(0,(function(n){w.getIndexes(e).forEach((function(e){var t=n[e],i=new V(t),a=i.isMined,c=i.isFlagged,o=i.isMisplacedFlag;a&&!c?t.appearance=x.Busted:o||(t.appearance=x.Visible)}))})))},reset:P}},W=function(e){return e<1?"000":e<10?"00".concat(e):e<100?"0".concat(e):e.toString()},q=function(e){var n=e.count;return Object(l.jsx)(l.Fragment,{children:W(n)})},T=Object(o.memo)(q),U=t(51),A=t.n(U),J=function(e){var n=e.icon,t=void 0===n?Object(l.jsx)(c.a,{icon:["far","meh"]}):n,i=e.onClick;return Object(l.jsx)("button",{type:"button",className:A.a.Face,onClick:i,children:t})},K=Object(o.memo)(J),z=function(e){var n=Object(o.useRef)();return Object(o.useEffect)((function(){n.current=e})),Object(o.useCallback)((function(){for(var e,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];null===(e=n.current)||void 0===e||e.call.apply(e,[n].concat(i))}),[])},Y=function(e,n){var t=Object(o.useRef)();Object(o.useEffect)((function(){t.current=e})),Object(o.useEffect)((function(){if(n){var e=setInterval((function(){var e;null===(e=t.current)||void 0===e||e.call(t)}),n);return function(){clearInterval(e)}}}),[n])},G=t(52),Q=t.n(G),X=function(e){var n=e.isSolved,t=e.isBusted;return n?Object(l.jsx)(c.a,{icon:["far","smile"]}):t?Object(l.jsx)(c.a,{icon:["far","frown"]}):void 0},Z=function(){var e=Object(o.useContext)(O),n=e.mineFieldStatus,t=e.mineFieldParams,i=e.reset,a=n.isSetup,c=n.isSolved,u=n.isBusted,s=n.hiddenMinesCount,r=Object(o.useState)(0),d=Object(v.a)(r,2),f=d[0],b=d[1],j=z((function(){b(0),i()}));return Y((function(){b(f+1)}),!a||c||u?void 0:1e3),y((function(){b(0)}),t),Object(l.jsxs)("div",{className:Q.a.Indicators,children:[Object(l.jsx)(T,{count:s}),Object(l.jsx)(K,{icon:X(n),onClick:j}),Object(l.jsx)(T,{count:f})]})},$=t(34),ee=t(22),ne=t.n(ee),te=function(e){var n=e.className;return Object(l.jsx)("button",{type:"button",className:n,children:Object(l.jsx)(c.a,{icon:["fas","bomb"]})})},ie=t(12),ae=t.n(ie),ce=function(e){var n=e.cell,t=e.onClick,i=e.onMouseDown,a=e.onContextMenu,o=new V(n),u=o.isHidden,s=o.isEmpty,r=o.isFlagged,d=o.isMined,f=o.isWrong,b=o.isBusted,j=n.value,m=ne()(ae.a.Cell,ae.a.Visible),h=function(){null===a||void 0===a||a(n)};return u?Object(l.jsx)("button",{type:"button","aria-label":"Cell",className:ae.a.Cell,onClick:function(){null===t||void 0===t||t(n)},onContextMenu:h}):r?Object(l.jsx)("button",{type:"button",className:ae.a.Cell,onContextMenu:h,children:Object(l.jsx)(c.a,{icon:["far","flag"]})}):s?Object(l.jsx)("button",{type:"button","aria-label":"Cell",className:m}):b?Object(l.jsx)(te,{className:ne()(ae.a.Cell,ae.a.Busted)}):d?Object(l.jsx)(te,{className:m}):f?Object(l.jsx)(te,{className:ne()(m,ae.a.Wrong)}):Object(l.jsx)("button",{type:"button",className:ne()(m,ae.a["Value".concat(j)]),onMouseDown:function(e){null===i||void 0===i||i(e,n)},children:j})},oe=Object(o.memo)(ce),ue=t(44),se=t.n(ue),re=function(){var e=Object(o.useContext)(O),n=e.mineFieldParams.rowsCount,t=e.mineField,i=e.mineFieldStatus,a=i.isSetup,c=i.isBusted,u=i.isSolved,s=e.setupMineField,r=e.revealCell,d=e.toggleFlag,f=e.revealNeighbors,b=z((function(e){(a?r:s)(e)})),j=z((function(e,n){var t=e.target,i=e.nativeEvent;t.addEventListener("mouseup",(function e(a){i.which!==a.which&&f(n),t.removeEventListener("mouseup",e)}))})),m=z((function(e){d(e)}));return Object(l.jsx)("div",{className:se.a.MineField,style:{width:n*parseFloat(ae.a.cellSize)},onContextMenu:function(e){e.preventDefault()},children:Object(l.jsx)("div",{className:ne()(se.a["Row".concat(n)],Object($.a)({},se.a.Disabled,c||u)),children:t.map((function(e){return Object(l.jsx)(oe,{cell:e,onClick:b,onMouseDown:j,onContextMenu:m},e.id)}))})})},le=function(e){var n=e.item,t=e.name,i=e.checked,a=e.className,c=e.onChange;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("input",{type:"radio",name:t,className:a,defaultChecked:i,onChange:function(){null===c||void 0===c||c(n)}}),n.name]})},de=Object(o.memo)(le),fe=t(48),be=t.n(fe),je=function(){var e=Object(o.useContext)(O),n=e.mineFieldParams,t=e.setMineFieldParams,i=z((function(e){t(e)}));return Object(l.jsx)("form",{className:be.a.MineFieldParams,children:w.map((function(e){var t=e.name,a=e.id;return Object(l.jsx)("div",{children:Object(l.jsx)(de,{item:e,name:"MineFieldParams",className:be.a.Radio,checked:t===n.name,onChange:i})},a)}))})},me=t(53),he=t.n(me),Oe=function(){return Object(l.jsxs)(O.Provider,{value:Object(a.a)({},L()),children:[Object(l.jsx)(h,{}),Object(l.jsxs)("main",{className:he.a.Minesweeper,children:[Object(l.jsx)(Z,{}),Object(l.jsx)(re,{}),Object(l.jsx)(je,{})]}),Object(l.jsx)(f,{})]})},ge=function(){return Object(l.jsx)(Oe,{})},ve=t(54),pe=t(21),xe=t(55),Fe=t(32),_e=t(56);(function(){pe.b.add(xe.a,_e.a,Fe.a,Fe.c,Fe.b,Fe.d)})(),Object(ve.render)(Object(l.jsx)(u.a.StrictMode,{children:Object(l.jsx)(ge,{})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.1456a78b.chunk.js.map