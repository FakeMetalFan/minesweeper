(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{125:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(55),r=n(5),l=-3,s=-2,u=-1,o=0,f={Hidden:0,Visible:1,Flagged:2},d=function(e,t,n){return e[t]===n},m=function(e){return d(e,"value",u)},v=function(e){return d(e,"state",f.Hidden)},h=function(e){return d(e,"state",f.Flagged)},b=function(e){return d(e,"value",l)},g=(n(72),Object(a.memo)((function(e){var t=e.cell,n=e.cellRevealHandler,a=e.flagPlantingHandler,c=e.neighborsRevealHandler,l=t.value,u=l===s,f=b(t);return v(t)?i.a.createElement("div",{className:"cell",onClick:n,onContextMenu:a}):h(t)?i.a.createElement("div",{className:"cell",onContextMenu:a},i.a.createElement(r.a,{icon:["far","flag"]})):l===o?i.a.createElement("div",{className:"cell cell__visible"}):m(t)||u||f?i.a.createElement("div",{className:"cell ".concat(u?"cell__incorrect-guess":f?"cell__busted-mine":"")},i.a.createElement(r.a,{icon:["fas","bomb"]})):i.a.createElement("div",{className:"cell cell__visible cell__visible__".concat(l),onMouseDown:c},l)}))),E=(n(73),function(e){var t=e.width,n=e.disabled,a=e.field,c=e.cellRevealHandler,r=e.flagPlantingHandler,l=e.neighborsRevealHandler,s=function(e,t){var a=e.target,i=e.nativeEvent.which;if(!n){a.addEventListener("mouseup",(function e(n){i!==n.which&&l(t),a.removeEventListener("mouseup",e)}))}};return i.a.createElement("div",{className:"field".concat(n?" disabled":""),style:{gridTemplateColumns:"repeat(".concat(t,", 1fr)")},onContextMenu:function(e){e.preventDefault()}},a.map((function(e,t){return i.a.createElement(g,{key:t,cell:e,cellRevealHandler:function(){!n&&c(e,t)},flagPlantingHandler:function(){!n&&r(e,t)},neighborsRevealHandler:function(e){s(e,t)}})})))}),j=(n(74),function(){return i.a.createElement("footer",null,i.a.createElement("span",null,"Powered by",i.a.createElement("a",{href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer"},i.a.createElement(r.a,{icon:["fab","github"]})),"\xa9",i.a.createElement("span",null,(new Date).getFullYear())))}),O=(n(75),function(){return i.a.createElement("header",null,i.a.createElement("span",{className:"title"},"Minesweeper"),i.a.createElement("a",{href:"https://github.com/FakeMetalFan/minesweeper",target:"_blank",rel:"noopener noreferrer"},i.a.createElement(r.a,{icon:["fab","github"]})))}),_=n(2),p=n(61),C=n(13),y=n(56),k=n.n(y),w=n(57),F=n.n(w),H=n(24),A=n(25),M=function(){function e(t){Object(H.a)(this,e),this._fieldWidth=t}return Object(A.a)(e,[{key:"to2DAddresses",value:function(e){var t=e%this._fieldWidth;return[t,(e-t)/this._fieldWidth]}},{key:"to1DAddress",value:function(e,t){return t*this._fieldWidth+e}}]),e}(),N=function(){function e(t,n){Object(H.a)(this,e),this._fieldWidth=t,this._fieldHeight=n,this._cellAddressUtils=new M(t)}return Object(A.a)(e,[{key:"canFloodFill",value:function(e,t){return!this.getAddresses(t).some((function(t){var n=e[t];return m(n)&&!h(n)}))}},{key:"getAddresses",value:function(e){for(var t=this._cellAddressUtils.to2DAddresses(e),n=Object(_.a)(t,2),a=n[0],i=n[1],c=[],r=-1;r<2;r++)for(var l=-1;l<2;l++)if(r||l){var s=a+r,u=i+l;this._doesAddressExist(s,this._fieldWidth)&&this._doesAddressExist(u,this._fieldHeight)&&c.push(this._cellAddressUtils.to1DAddress(s,u))}return c}},{key:"getMinedCount",value:function(e,t){return this._getCountBy(e,t,m)}},{key:"canRevealNeighbors",value:function(e,t){return this.getMinedCount(e,t)===this._getCountBy(e,t,h)}},{key:"_getCountBy",value:function(e,t,n){return this.getAddresses(t).reduce((function(t,a){return n(e[a])?t+1:t}),0)}},{key:"_doesAddressExist",value:function(e,t){return-1<e&&e<t}}]),e}(),R=(n(125),function(e){var t=e.minesCount,n=e.smileyFaceClickHandler,c=e.isCountingSeconds,l=e.isBust,s=e.isVictory,u=Object(a.useState)(0),o=Object(_.a)(u,2),f=o[0],d=o[1],m=function(e){return e<1?"000":e<10?"00".concat(e):e<100?"0".concat(e):"".concat(e)};return function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(t){var e=setInterval((function(){n.current()}),t);return function(){clearInterval(e)}}}),[t])}((function(){d(f+1)}),c?1e3:null),i.a.createElement("div",{className:"indicators"},i.a.createElement("div",{className:"mines-count"},m(t)),i.a.createElement("div",{className:"smiley-face",onClick:function(){d(0),n()}},i.a.createElement(r.a,{icon:["far",s?"smile":l?"frown":"meh"]})),i.a.createElement("div",{className:"timer"},m(f)))}),S=n(58),D=n.n(S),V=(n(180),function(e){var t=e.minesCount,n=e.fieldDimension,c=Object(a.useState)(!1),r=Object(_.a)(c,2),d=r[0],g=r[1],j=Object(a.useState)(!1),O=Object(_.a)(j,2),y=O[0],w=O[1],H=Object(a.useState)(!1),A=Object(_.a)(H,2),M=A[0],S=A[1],V=Object(a.useState)(t),x=Object(_.a)(V,2),B=x[0],W=x[1],P=function(e){var t=e.width,n=e.height,i=e.minesCount,c=t*n,r=Object(a.useMemo)((function(){return new N(t,n)}),[c]),d=Object(a.useMemo)((function(){return Array(c).fill({value:o,state:f.Hidden})}),[c]),b=Object(a.useState)(d),g=Object(_.a)(b,2),E=g[0],j=g[1],O=function(e,t){return Object(C.a)(E,(function(n){null===t||void 0===t||t(n),n[e].state=f.Visible;!function e(t){r.canFloodFill(n,t)&&r.getAddresses(t).forEach((function(t){var a=n[t];m(a)||!v(a)||h(a)||(a.state=f.Visible,e(t))}))}(e)}))},y=function(e){return Object(C.a)(E,(function(t){e(t),t.forEach((function(e,n){m(e)&&!h(e)&&(e.state=f.Visible),!m(e)&&h(e)&&(t[n]={value:s,state:f.Visible})}))}))};return{field:E,reset:function(){j(d)},init:function(e){j(O(e,(function(t){for(var n=k()(F()(c),[e].concat(Object(p.a)(r.getAddresses(e)))),a=new Set;a.size<i;)a.add(n[Math.random()*n.length|0]);a.forEach((function(e){t[e].value=u})),t.forEach((function(e,n){!m(e)&&(e.value=r.getMinedCount(t,n))}))})))},revealCell:function(e,t){j(m(e)?y((function(e){e[t]={value:l,state:f.Visible}})):O(t))},plantFlag:function(e,t){j(Object(C.a)(E,(function(n){n[t].state=f[h(e)?"Hidden":"Flagged"]})))},revealNeighbors:function(e){r.canFloodFill(E,e)?j(O(e)):r.canRevealNeighbors(E,e)&&j(y((function(t){r.getAddresses(e).forEach((function(e){var n=t[e];m(n)&&!h(n)&&(n.value=l),!m(n)&&h(n)&&(n.value=s),n.state=f.Visible}))})))},markMines:function(){j(Object(C.a)(E,(function(e){e.forEach((function(e){m(e)&&(e.state=f.Flagged)}))})))}}}({minesCount:t,width:n,height:n}),I=P.field,U=P.reset,J=P.init,L=P.revealCell,z=P.plantFlag,T=P.revealNeighbors,Y=P.markMines;return function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(!1);Object(a.useEffect)((function(){t.current=e}),[e]);for(var i=arguments.length,c=new Array(i>1?i-1:0),r=1;r<i;r++)c[r-1]=arguments[r];Object(a.useEffect)((function(){n.current?t.current():n.current=!0}),c)}((function(){I.some(b)?w(!0):D()(I,m).some(v)||(Y(),S(!0))}),I),i.a.createElement("div",{className:"minesweeper"},i.a.createElement(R,{minesCount:B,isBust:y,isVictory:M,isCountingSeconds:d&&!(y||M),smileyFaceClickHandler:function(){U(),g(!1),w(!1),S(!1),W(t)}}),i.a.createElement(E,{width:n,disabled:y||M,field:I,cellRevealHandler:function(e,t){d?L(e,t):(J(t),g(!0))},flagPlantingHandler:function(e,t){z(e,t),W(B+(h(e)?1:-1))},neighborsRevealHandler:T}))}),x=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(O,null),i.a.createElement(V,{minesCount:30,fieldDimension:16}),i.a.createElement(j,null))},B=n(11),W=n(59),P=n(14),I=n(60);n(181);B.b.add(W.a,I.a,P.a,P.c,P.b,P.d),Object(c.render)(i.a.createElement(a.StrictMode,null,i.a.createElement(x,null)),document.getElementById("root"))},62:function(e,t,n){e.exports=n(182)},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){}},[[62,1,2]]]);
//# sourceMappingURL=main.9f6e91cd.chunk.js.map