(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{12:function(e,n,t){e.exports={cellSize:"32px",cell:"cell_cell__14Twb",visible:"cell_visible__Ladne",busted:"cell_busted__3Eypx",wrong:"cell_wrong__VEfOs",value_1:"cell_value_1__23PsV",value_2:"cell_value_2__1Q9Ag",value_3:"cell_value_3__1_bSN",value_4:"cell_value_4__Tvv7G",value_5:"cell_value_5__pfAPd",value_6:"cell_value_6__19hZL",value_7:"cell_value_7__1IqTn",value_8:"cell_value_8__2-ysP"}},23:function(e,n,t){e.exports={mine_field:"mineField_mine_field__2Fl0L",row:"mineField_row__35wCK",row_9:"mineField_row_9__2tIGm",row_16:"mineField_row_16__3WJBK",row_30:"mineField_row_30__2cLbb",disabled:"mineField_disabled__deIQ0"}},45:function(e,n,t){e.exports={footer:"footer_footer__3SziO",link:"footer_link__2dFa3"}},46:function(e,n,t){e.exports={header:"header_header__2yLQj",link:"header_link__3R6BL"}},48:function(e,n,t){e.exports={mine_field_params:"mineFieldParams_mine_field_params__1t4La",radio:"mineFieldParams_radio__2JQc5"}},51:function(e,n,t){e.exports={face:"face_face__1V5r6"}},52:function(e,n,t){e.exports={indicators:"indicators_indicators__xiJJ1"}},53:function(e,n,t){e.exports={minesweeper:"minesweeper_minesweeper__24ziS"}},60:function(e,n,t){},71:function(e,n,t){"use strict";t.r(n);t(60);var i,a=t(10),c=t(1),r=t(45),o=t.n(r),u=t(0),s=function(){return Object(u.jsx)("footer",{className:o.a.footer,children:Object(u.jsxs)("span",{children:["Powered by",Object(u.jsx)("a",{className:o.a.link,href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer",children:Object(u.jsx)(a.a,{icon:["fab","github"]})}),"\xa9",Object(u.jsx)("span",{children:(new Date).getFullYear()})]})})},l=Object(c.memo)(s),d=t(46),f=t.n(d),b=function(){return Object(u.jsxs)("header",{className:f.a.header,children:["Minesweeper",Object(u.jsx)("a",{className:f.a.link,href:"https://github.com/FakeMetalFan/minesweeper",target:"_blank",rel:"noopener noreferrer",children:Object(u.jsx)(a.a,{icon:["fab","github"]})})]})},j=Object(c.memo)(b),h=Object(c.createContext)({mineField:[],mineFieldParams:{},mineFieldStatus:{},setMineFieldParams:function(){},setup:function(){},openCell:function(){},toggleFlag:function(){},openNeighbors:function(){},reset:function(){}}),m=h.Provider,_=h,p=t(11),v=t(57),O=t(30);!function(e){e[e.Hidden=0]="Hidden",e[e.Visible=1]="Visible",e[e.Flagged=2]="Flagged",e[e.Busted=3]="Busted",e[e.Wrong=4]="Wrong"}(i||(i={}));var g,x=i;!function(e){e[e.Empty=0]="Empty",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Mine=9]="Mine"}(g||(g={}));var w=g,F=t(58),y=function(e){return Object(p.a)(Object(p.a)({},e),{},{id:Object(F.a)()})},M=y({name:"Beginner",width:9,height:9,minesCount:10}),k=[M,y({name:"Intermediate",width:16,height:16,minesCount:40}),y({name:"Expert",width:30,height:16,minesCount:99})],E=function(e){for(var n=Object(c.useRef)(!1),t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];Object(c.useEffect)((function(){n.current?e():n.current=!0}),i)},C=t(31),S=t(73),N=t(74),B=t(14),I=t(15),P=function(){function e(n){Object(B.a)(this,e),this.cell=n}return Object(I.a)(e,[{key:"isEqual",value:function(e,n){return this.cell[e]===n}},{key:"isEmpty",get:function(){return this.isEqual("value",w.Empty)}},{key:"isMined",get:function(){return this.isEqual("value",w.Mine)}},{key:"isHidden",get:function(){return this.isEqual("appearance",x.Hidden)}},{key:"isVisible",get:function(){return this.isEqual("appearance",x.Visible)}},{key:"isFlagged",get:function(){return this.isEqual("appearance",x.Flagged)}},{key:"isWrong",get:function(){return this.isEqual("appearance",x.Wrong)}},{key:"isBusted",get:function(){return this.isEqual("appearance",x.Busted)}},{key:"isMisplacedFlag",get:function(){return!this.isMined&&this.isFlagged}}]),e}(),V=t(72),q=function(){function e(n){Object(B.a)(this,e),this.mineField=n}return Object(I.a)(e,[{key:"isBusted",value:function(){return this.mineField.some((function(e){return new P(e).isBusted}))}},{key:"isSolved",value:function(){return!Object(V.a)(this.mineField,(function(e){return new P(e).isMined})).some((function(e){return!new P(e).isVisible}))}}]),e}(),D=function(){function e(n){Object(B.a)(this,e),this.length=n}return Object(I.a)(e,[{key:"to2D",value:function(e){var n=e%this.length;return{rowIndex:n,columnIndex:(e-n)/this.length}}},{key:"to1D",value:function(e,n){return n*this.length+e}}]),e}(),L=function(e,n){return e>-1&&e<n},H=function(){function e(n,t){Object(B.a)(this,e),this.width=n,this.height=t,this.indexUtils=new D(this.width)}return Object(I.a)(e,[{key:"getIndexes",value:function(e){for(var n=e.index,t=this.indexUtils.to2D(n),i=t.rowIndex,a=t.columnIndex,c=[],r=-1;r<2;r+=1)for(var o=-1;o<2;o+=1)if(r||o){var u=i+r,s=a+o;L(u,this.width)&&L(s,this.height)&&c.push(this.indexUtils.to1D(u,s))}return c}},{key:"canFloodFill",value:function(e,n){return!this.getIndexes(n).some((function(n){var t=new P(e[n]),i=t.isMined,a=t.isFlagged;return i&&!a}))}},{key:"canOpen",value:function(e,n){return this.countMined(e,n)===this.countBy(e,n,"isFlagged")}},{key:"countMined",value:function(e,n){return this.countBy(e,n,"isMined")}},{key:"countBy",value:function(e,n,t){return this.getIndexes(n).reduce((function(n,i){return new P(e[i])[t]?n+1:n}),0)}}]),e}(),T=function(){var e=Object(c.useState)(M),n=Object(O.a)(e,2),t=n[0],i=n[1],a=t.width,r=t.height,o=t.minesCount,u=a*r,s=Object(c.useMemo)((function(){return Array.from({length:u},(function(e,n){return y({index:n,value:w.Empty,appearance:x.Hidden})}))}),[u]),l=Object(c.useState)(s),d=Object(O.a)(l,2),f=d[0],b=d[1],j={isSetup:!1,isBusted:!1,isSolved:!1,hiddenMinesCount:o},h=Object(c.useState)(j),m=Object(O.a)(h,2),_=m[0],g=m[1],F=new H(a,r),k=function(e,n){return Object(C.a)(f,(function(t){null===n||void 0===n||n(t),t[e.index].appearance=x.Visible,function e(n){F.canFloodFill(t,n)&&F.getIndexes(n).forEach((function(n){var i=t[n],a=new P(i),c=a.isMined,r=a.isHidden,o=a.isFlagged;c||!r||o||(i.appearance=x.Visible,e(i))}))}(e)}))},B=function(e,n){return Object(C.a)(f,(function(e){n(e),e.forEach((function(e){var n=new P(e),t=n.isMisplacedFlag,i=n.isMined,a=n.isBusted,c=n.isFlagged;t?e.appearance=x.Wrong:!i||a||c||(e.appearance=x.Visible)}))}))},I=function(){b(s),g(j)};return E((function(){I()}),s),E((function(){var e=new q(f);e.isBusted()?g((function(e){return Object(p.a)(Object(p.a)({},e),{},{isBusted:!0})})):e.isSolved()&&(b((function(e){return Object(C.a)(e,(function(e){e.forEach((function(e){new P(e).isMined&&(e.appearance=x.Flagged)}))}))})),g((function(e){return Object(p.a)(Object(p.a)({},e),{},{isSolved:!0,hiddenMinesCount:0})})))}),f),{mineField:f,mineFieldParams:t,mineFieldStatus:_,setMineFieldParams:i,setup:function(e){b(k(e,(function(n){for(var t=Object(S.a)(Object(N.a)(u),[e.index].concat(Object(v.a)(F.getIndexes(e)))),i=new Set;i.size<o;)i.add(t[Math.floor(Math.random()*t.length)]);i.forEach((function(e){n[e].value=w.Mine})),n.forEach((function(e){new P(e).isMined||(e.value=F.countMined(n,e))}))}))),g((function(e){return Object(p.a)(Object(p.a)({},e),{},{isSetup:!0})}))},openCell:function(e){b(new P(e).isMined?B(0,(function(n){n[e.index].appearance=x.Busted})):k(e))},toggleFlag:function(e){var n=new P(e).isFlagged;b((function(t){return Object(C.a)(t,(function(t){t[e.index].appearance=n?x.Hidden:x.Flagged}))})),g((function(e){return Object(C.a)(e,(function(e){e.hiddenMinesCount+=n?1:-1}))}))},openNeighbors:function(e){F.canFloodFill(f,e)?b(k(e)):F.canOpen(f,e)&&b(B(0,(function(n){F.getIndexes(e).forEach((function(e){var t=n[e],i=new P(t),a=i.isMined,c=i.isFlagged,r=i.isMisplacedFlag;a&&!c?t.appearance=x.Busted:r||(t.appearance=x.Visible)}))})))},reset:I}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<1?"000":e<10?"00".concat(e):e<100?"0".concat(e):e.toString()},J=function(e){var n=e.count;return Object(u.jsx)("div",{children:W(n)})},z=Object(c.memo)(J),A=t(51),Q=t.n(A),R=function(e){var n=e.frown,t=e.smile,i=e.onClick,c=Object(u.jsx)(a.a,{icon:["far","meh"]});return n&&(c=Object(u.jsx)(a.a,{icon:["far","frown"]})),t&&(c=Object(u.jsx)(a.a,{icon:["far","smile"]})),Object(u.jsx)("button",{type:"button",className:Q.a.face,onClick:i,children:c})},U=Object(c.memo)(R),G=function(e){var n=Object(c.useRef)();return Object(c.useEffect)((function(){n.current=e})),Object(c.useCallback)((function(){for(var e,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];null===(e=n.current)||void 0===e||e.call.apply(e,[n].concat(i))}),[])},K=function(e,n){var t=Object(c.useRef)();Object(c.useEffect)((function(){t.current=e})),Object(c.useEffect)((function(){if(n){var e=setInterval((function(){var e;null===(e=t.current)||void 0===e||e.call(t)}),n);return function(){clearInterval(e)}}}),[n])},Y=t(52),Z=t.n(Y),X=function(){var e=Object(c.useContext)(_),n=e.mineFieldStatus,t=e.mineFieldParams,i=e.reset,a=n.isSetup,r=n.isSolved,o=n.isBusted,s=n.hiddenMinesCount,l=Object(c.useState)(0),d=Object(O.a)(l,2),f=d[0],b=d[1],j=G((function(){b(0),i()}));return K((function(){b(f+1)}),!a||r||o?null:1e3),E((function(){b(0)}),t),Object(u.jsxs)("div",{className:Z.a.indicators,children:[Object(u.jsx)(z,{count:s}),Object(u.jsx)(U,{frown:o,smile:r,onClick:j}),Object(u.jsx)(z,{count:f})]})},$=t(20),ee=t(29),ne=t.n(ee),te=t(12),ie=t.n(te),ae=function(e){var n,t=e.cell,i=e.onClick,c=e.onMouseDown,r=e.onContextMenu,o=new P(t),s=o.isHidden,l=o.isEmpty,d=o.isFlagged,f=o.isMined,b=o.isWrong,j=o.isBusted,h=t.value,m=ne()(ie.a.cell,ie.a.visible),_=function(){null===r||void 0===r||r(t)};return s?Object(u.jsx)("button",{type:"button","aria-label":"cell",className:ie.a.cell,onClick:function(){null===i||void 0===i||i(t)},onContextMenu:_}):d?Object(u.jsx)("button",{type:"button",className:ie.a.cell,onContextMenu:_,children:Object(u.jsx)(a.a,{icon:["far","flag"]})}):l?Object(u.jsx)("button",{type:"button","aria-label":"cell",className:m}):f||j||b?Object(u.jsx)("button",{type:"button",className:ne()(m,(n={},Object($.a)(n,ie.a.busted,j),Object($.a)(n,ie.a.wrong,b),n)),children:Object(u.jsx)(a.a,{icon:["fas","bomb"]})}):Object(u.jsx)("button",{type:"button",className:ne()(m,ie.a["value_".concat(h)]),onMouseDown:function(e){null===c||void 0===c||c(e,t)},children:h})},ce=Object(c.memo)(ae),re=t(23),oe=t.n(re),ue=function(){var e=Object(c.useContext)(_),n=e.mineFieldParams,t=(n=void 0===n?{}:n).width,i=void 0===t?0:t,a=e.mineField,r=void 0===a?[]:a,o=e.mineFieldStatus,s=(o=void 0===o?{}:o).isSetup,l=o.isBusted,d=o.isSolved,f=e.setup,b=e.openCell,j=e.toggleFlag,h=e.openNeighbors,m=G((function(e){(s?b:f)(e)})),p=G((function(e,n){var t=e.target,i=e.nativeEvent;t.addEventListener("mouseup",(function e(a){i.which!==a.which&&h(n),t.removeEventListener("mouseup",e)}))})),v=G(j);return Object(u.jsx)("div",{"data-testid":oe.a.mine_field,className:oe.a.mine_field,onContextMenu:function(e){e.preventDefault()},children:Object(u.jsx)("div",{"data-testid":oe.a.row,className:ne()(oe.a.row,oe.a["row_".concat(i)],Object($.a)({},oe.a.disabled,l||d)),style:{width:i*Number.parseFloat(ie.a.cellSize)},children:r.map((function(e){return Object(u.jsx)(ce,{cell:e,onClick:m,onMouseDown:p,onContextMenu:v},e.id)}))})})},se=function(e){var n=e.item,t=e.name,i=e.checked,a=e.className,c=e.onChange;return Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{type:"radio",name:t,className:a,defaultChecked:i,onChange:function(){null===c||void 0===c||c(n)}}),n.name]})},le=Object(c.memo)(se),de=t(48),fe=t.n(de),be=function(){var e=Object(c.useContext)(_),n=e.mineFieldParams,t=e.setMineFieldParams,i=G(t);return Object(u.jsx)("form",{className:fe.a.mine_field_params,children:k.map((function(e){var t=e.name,a=e.id;return Object(u.jsx)(le,{item:e,name:"mine-field-params",className:fe.a.radio,checked:t===n.name,onChange:i},a)}))})},je=t(53),he=t.n(je),me=function(){return Object(u.jsxs)(m,{value:T(),children:[Object(u.jsx)(j,{}),Object(u.jsxs)("main",{className:he.a.minesweeper,children:[Object(u.jsx)(X,{}),Object(u.jsx)(ue,{}),Object(u.jsx)(be,{})]}),Object(u.jsx)(l,{})]})},_e=function(){return Object(u.jsx)(me,{})},pe=t(54),ve=t(22),Oe=t(55),ge=t(34),xe=t(56);(function(){ve.b.add(Oe.a,xe.a,ge.a,ge.c,ge.b,ge.d)})(),Object(pe.render)(Object(u.jsx)(c.StrictMode,{children:Object(u.jsx)(_e,{})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.6227fdfe.chunk.js.map