(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{11:function(e,n,t){e.exports={mine_field:"mineField_mine_field__2Fl0L",row:"mineField_row__35wCK",disabled:"mineField_disabled__deIQ0"}},26:function(e,n,t){e.exports={radio:"radio_radio__WGkBE",input:"radio_input__3VDJr",label:"radio_label__35OQj"}},28:function(e,n,t){e.exports={footer:"footer_footer__3SziO",link:"footer_link__2dFa3"}},29:function(e,n,t){e.exports={header:"header_header__2yLQj",link:"header_link__3R6BL"}},31:function(e,n,t){e.exports={face:"face_face__1V5r6"}},32:function(e,n,t){e.exports={indicators:"indicators_indicators__xiJJ1"}},33:function(e,n,t){e.exports={settings:"settings_settings__1jkf7"}},34:function(e,n,t){e.exports={minesweeper:"minesweeper_minesweeper__24ziS"}},40:function(e,n,t){},5:function(e,n,t){e.exports={cellSize:"28px",cell:"cell_cell__14Twb",visible:"cell_visible__Ladne",busted:"cell_busted__3Eypx",wrong:"cell_wrong__VEfOs",value_1:"cell_value_1__23PsV",value_2:"cell_value_2__1Q9Ag",value_3:"cell_value_3__1_bSN",value_4:"cell_value_4__Tvv7G",value_5:"cell_value_5__pfAPd",value_6:"cell_value_6__19hZL",value_7:"cell_value_7__1IqTn",value_8:"cell_value_8__2-ysP"}},51:function(e,n,t){"use strict";t.r(n);t(40);var i=t(3),c=t(28),s=t.n(c),a=t(0),l=function(){return Object(a.jsx)("footer",{className:s.a.footer,children:Object(a.jsxs)("span",{children:["Powered by",Object(a.jsx)("a",{className:s.a.link,href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer",children:Object(a.jsx)(i.a,{icon:["fab","github"]})}),"\xa9",Object(a.jsx)("span",{children:(new Date).getFullYear()})]})})},o=t(29),r=t.n(o),u=function(){return Object(a.jsxs)("header",{className:r.a.header,children:["Minesweeper",Object(a.jsx)("a",{className:r.a.link,href:"https://github.com/FakeMetalFan/minesweeper",target:"_blank",rel:"noopener noreferrer",children:Object(a.jsx)(i.a,{icon:["fab","github"]})})]})},d=t(4),f=t(38),b=t(15),j=t(39),h=function(e){return Object(d.a)(Object(d.a)({},e),{},{id:Object(j.a)()})},_=h({label:"Easy",width:9,height:9,minesCount:10}),O=[_,h({label:"Medium",width:16,height:16,minesCount:40}),h({label:"Hard",width:30,height:16,minesCount:99})],g=t(1),v=function(e){for(var n=Object(g.useRef)(!1),t=arguments.length,i=new Array(t>1?t-1:0),c=1;c<t;c++)i[c-1]=arguments[c];Object(g.useEffect)((function(){n.current?e():n.current=!0}),i)},x=t(16),m=t(53),p=t(54),C=t(21),w=t(22),M=function(){function e(n){Object(C.a)(this,e),this.length=n}return Object(w.a)(e,[{key:"to2D",value:function(e){var n=e%this.length;return{rowIndex:n,columnIndex:(e-n)/this.length}}},{key:"to1D",value:function(e,n){return n*this.length+e}}]),e}(),k=function(e,n){return e>-1&&e<n},F=function(){function e(n,t){Object(C.a)(this,e),this.width=n,this.height=t,this.indexUtils=new M(this.width)}return Object(w.a)(e,[{key:"getIndexes",value:function(e){for(var n=e.index,t=this.indexUtils.to2D(n),i=t.rowIndex,c=t.columnIndex,s=[],a=-1;a<2;a+=1)for(var l=-1;l<2;l+=1)if(a||l){var o=i+a,r=c+l;k(o,this.width)&&k(r,this.height)&&s.push(this.indexUtils.to1D(o,r))}return s}},{key:"canFloodFill",value:function(e,n){return!this.getIndexes(n).some((function(n){var t=e[n],i=t.isMined,c=t.isFlagged;return i&&!c}))}},{key:"canOpen",value:function(e,n){return this.countMined(e,n)===this.countBy(e,n,"isFlagged")}},{key:"countMined",value:function(e,n){return this.countBy(e,n,"isMined")}},{key:"countBy",value:function(e,n,t){return this.getIndexes(n).reduce((function(n,i){return e[i][t]?n+1:n}),0)}}]),e}(),y=function(e){var n=Object(g.useRef)();return Object(g.useEffect)((function(){n.current=e})),Object(g.useCallback)((function(){for(var e,t=arguments.length,i=new Array(t),c=0;c<t;c++)i[c]=arguments[c];null===(e=n.current)||void 0===e||e.call.apply(e,[n].concat(i))}),[])},S=function(){var e=Object(g.useState)(_),n=Object(b.a)(e,2),t=n[0],i=n[1],c=t.width,s=t.height,a=t.minesCount,l=c*s,o=Object(g.useMemo)((function(){return Array.from({length:l},(function(e,n){return h({index:n})}))}),[l]),r=Object(g.useState)(o),u=Object(b.a)(r,2),j=u[0],O=u[1],C={hiddenMinesCount:a},w=Object(g.useState)(C),M=Object(b.a)(w,2),k=M[0],S=M[1],N=new F(c,s),E=function(e,n){return Object(x.a)(j,(function(t){null===n||void 0===n||n(t),t[e.index].isVisible=!0,function e(n){N.canFloodFill(t,n)&&N.getIndexes(n).forEach((function(n){var i=t[n],c=i.isMined,s=i.isVisible,a=i.isFlagged;c||s||a||(i.isVisible=!0,e(i))}))}(e)}))},I=function(e){return Object(x.a)(j,(function(n){e(n),n.forEach((function(e){var n=e.isMined,t=e.isBusted,i=e.isFlagged;!n&&i?e.isWrong=!0:!n||t||i||(e.isVisible=!0)}))}))},B=y((function(e){var n=e.index,t=e.isFlagged;O(Object(x.a)(j,(function(e){e[n].isFlagged=!t}))),S(Object(x.a)(k,(function(e){e.hiddenMinesCount+=t?1:-1})))})),V=function(){O(o),S(C)};return v(V,o),v((function(){j.some((function(e){return e.isBusted}))?S(Object(d.a)(Object(d.a)({},k),{},{isBusted:!0})):j.some((function(e){var n=e.isMined,t=e.isVisible;return!(n||t)}))||(O(Object(x.a)(j,(function(e){e.forEach((function(e){e.isMined&&(e.isFlagged=!0)}))}))),S(Object(d.a)(Object(d.a)({},k),{},{isSolved:!0,hiddenMinesCount:0})))}),j),{cells:j,settings:t,status:k,setSettings:i,setupCells:function(e){O(E(e,(function(n){for(var t=Object(m.a)(Object(p.a)(l),[e.index].concat(Object(f.a)(N.getIndexes(e)))),i=new Set;i.size<a;)i.add(t[Math.floor(Math.random()*t.length)]);i.forEach((function(e){n[e].isMined=!0})),n.forEach((function(e){e.isMined||(e.value=N.countMined(n,e))}))}))),S(Object(d.a)(Object(d.a)({},k),{},{isSetup:!0}))},openCell:function(e){var n=e.index,t=e.isMined;O(t?I((function(e){e[n].isBusted=!0})):E(e))},toggleCellFlag:B,openCellNeighbors:function(e){N.canFloodFill(j,e)?O(E(e)):N.canOpen(j,e)&&O(I((function(n){N.getIndexes(e).forEach((function(e){var t=n[e],i=t.isMined,c=t.isFlagged;i&&!c?t.isBusted=!0:i||c||(t.isVisible=!0)}))})))},resetCells:V}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"000".concat(e).slice(-3)},E=function(e){var n=e.count;return Object(a.jsx)("div",{children:N(n)})},I=Object(g.memo)(E),B=t(31),V=t.n(B),D=function(e){var n=e.frown,t=e.smile,c=e.onClick,s=Object(a.jsx)(i.a,{icon:["far","meh"]});return n&&(s=Object(a.jsx)(i.a,{icon:["far","frown"]})),t&&(s=Object(a.jsx)(i.a,{icon:["far","smile"]})),Object(a.jsx)("button",{type:"button",className:V.a.face,onClick:c,children:s})},L=Object(g.memo)(D),z=function(e,n){var t=Object(g.useRef)();Object(g.useEffect)((function(){t.current=e})),Object(g.useEffect)((function(){if(n){var e=setInterval((function(){var e;null===(e=t.current)||void 0===e||e.call(t)}),n);return function(){clearInterval(e)}}}),[n])},A=t(32),J=t.n(A),T=function(e){var n=e.status,t=e.settings,i=e.onFaceClick,c=n.isSetup,s=n.isSolved,l=n.isBusted,o=n.hiddenMinesCount,r=Object(g.useState)(0),u=Object(b.a)(r,2),d=u[0],f=u[1],j=y((function(){f(0),i()}));return z((function(){f(d+1)}),!c||s||l?0:1e3),v((function(){f(0)}),t),Object(a.jsxs)("div",{className:J.a.indicators,children:[Object(a.jsx)(I,{count:o}),Object(a.jsx)(L,{frown:l,smile:s,onClick:j}),Object(a.jsx)(I,{count:d})]})},P=t(9),Q=t(14),R=t.n(Q),U=t(5),W=t.n(U),G=function(e){var n,t=e.cell,c=e.onClick,s=e.onMouseDown,l=e.onContextMenu,o=t.value,r=t.isVisible,u=t.isFlagged,d=t.isMined,f=t.isWrong,b=t.isBusted,j=R()(W.a.cell,W.a.visible),h=function(){null===l||void 0===l||l(t)};return d&&r||b||f?Object(a.jsx)("button",{type:"button",className:R()(j,(n={},Object(P.a)(n,W.a.busted,b),Object(P.a)(n,W.a.wrong,f),n)),children:Object(a.jsx)(i.a,{icon:["fas","bomb"]})}):u?Object(a.jsx)("button",{type:"button",className:W.a.cell,onContextMenu:h,children:Object(a.jsx)(i.a,{icon:["far","flag"]})}):r?o?Object(a.jsx)("button",{type:"button",className:R()(j,W.a["value_".concat(o)]),onMouseDown:function(e){null===s||void 0===s||s(e,t)},children:o}):Object(a.jsx)("button",{type:"button","aria-label":"cell",className:j}):Object(a.jsx)("button",{type:"button","aria-label":"cell",className:W.a.cell,onClick:function(){null===c||void 0===c||c(t)},onContextMenu:h})},q=Object(g.memo)(G),H=t(11),K=t.n(H),Y=function(e){var n=e.status,t=e.settings,i=e.cells,c=e.onCellsSetup,s=e.onCellOpen,l=e.onCellNeighborsOpen,o=e.onCellFlagToggle,r=n.isSetup,u=n.isSolved,d=n.isBusted,f=t.width,b=R()(K.a.row,K.a["row_".concat(f)],Object(P.a)({},K.a.disabled,u||d)),j={width:f*Number.parseFloat(W.a.cellSize)},h=y((function(e){(r?s:c)(e)})),_=y((function(e,n){var t=e.target,i=e.nativeEvent;t.addEventListener("mouseup",(function e(c){i.which!==c.which&&l(n),t.removeEventListener("mouseup",e)}))}));return Object(a.jsx)("div",{"data-testid":K.a.mine_field,className:K.a.mine_field,onContextMenu:function(e){e.preventDefault()},children:Object(a.jsx)("div",{"data-testid":K.a.row,className:b,style:j,children:i.map((function(e){return Object(a.jsx)(q,{cell:e,onClick:h,onMouseDown:_,onContextMenu:o},e.id)}))})})},Z=t(26),X=t.n(Z),$=function(e){var n=e.name,t=e.label,i=e.checked,c=e.onChange;return Object(a.jsxs)("div",{className:X.a.radio,children:[Object(a.jsx)("input",{type:"radio",name:n,className:X.a.input,defaultChecked:i,onChange:c}),Object(a.jsx)("span",{className:X.a.label,children:t})]})},ee=t(33),ne=t.n(ee),te=function(e){var n=e.currentSettings,t=e.onSettingsChange,i=function(e){return function(){t(e)}};return Object(a.jsx)("form",{className:ne.a.settings,children:O.map((function(e){var t=e.id,c=e.label;return Object(a.jsx)($,{name:"settings",label:c,checked:c===n.label,onChange:i(e)},t)}))})},ie=Object(g.memo)(te),ce=t(34),se=t.n(ce),ae=function(){var e=S(),n=e.status,t=e.settings,i=e.cells,c=e.resetCells,s=e.setupCells,l=e.openCell,o=e.openCellNeighbors,r=e.toggleCellFlag,u=e.setSettings;return Object(a.jsxs)("main",{className:se.a.minesweeper,children:[Object(a.jsx)(T,{status:n,settings:t,onFaceClick:c}),Object(a.jsx)(Y,{status:n,settings:t,cells:i,onCellsSetup:s,onCellOpen:l,onCellNeighborsOpen:o,onCellFlagToggle:r}),Object(a.jsx)(ie,{currentSettings:t,onSettingsChange:u})]})},le=t(35),oe=t(10),re=t(36),ue=t(18),de=t(37);(function(){oe.b.add(re.a,de.a,ue.a,ue.c,ue.b,ue.d)})(),Object(le.render)(Object(a.jsxs)(g.StrictMode,{children:[Object(a.jsx)(u,{}),Object(a.jsx)(ae,{}),Object(a.jsx)(l,{})]}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.cfcf7926.chunk.js.map