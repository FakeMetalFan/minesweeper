(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{11:function(e,n,t){e.exports={mine_field:"mineField_mine_field__2Fl0L",row:"mineField_row__35wCK",row_9:"mineField_row_9__2tIGm",row_16:"mineField_row_16__3WJBK",row_30:"mineField_row_30__2cLbb",disabled:"mineField_disabled__deIQ0"}},27:function(e,n,t){e.exports={footer:"footer_footer__3SziO",link:"footer_link__2dFa3"}},28:function(e,n,t){e.exports={header:"header_header__2yLQj",link:"header_link__3R6BL"}},29:function(e,n,t){e.exports={mine_field_params:"mineFieldParams_mine_field_params__1t4La",radio:"mineFieldParams_radio__2JQc5"}},31:function(e,n,t){e.exports={face:"face_face__1V5r6"}},32:function(e,n,t){e.exports={indicators:"indicators_indicators__xiJJ1"}},33:function(e,n,t){e.exports={minesweeper:"minesweeper_minesweeper__24ziS"}},39:function(e,n,t){},5:function(e,n,t){e.exports={cellSize:"32px",cell:"cell_cell__14Twb",visible:"cell_visible__Ladne",busted:"cell_busted__3Eypx",wrong:"cell_wrong__VEfOs",value_1:"cell_value_1__23PsV",value_2:"cell_value_2__1Q9Ag",value_3:"cell_value_3__1_bSN",value_4:"cell_value_4__Tvv7G",value_5:"cell_value_5__pfAPd",value_6:"cell_value_6__19hZL",value_7:"cell_value_7__1IqTn",value_8:"cell_value_8__2-ysP"}},50:function(e,n,t){"use strict";t.r(n);t(39);var i=t(3),c=t(1),a=t(27),o=t.n(a),r=t(0),s=function(){return Object(r.jsx)("footer",{className:o.a.footer,children:Object(r.jsxs)("span",{children:["Powered by",Object(r.jsx)("a",{className:o.a.link,href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer",children:Object(r.jsx)(i.a,{icon:["fab","github"]})}),"\xa9",Object(r.jsx)("span",{children:(new Date).getFullYear()})]})})},u=Object(c.memo)(s),l=t(28),d=t.n(l),f=function(){return Object(r.jsxs)("header",{className:d.a.header,children:["Minesweeper",Object(r.jsx)("a",{className:d.a.link,href:"https://github.com/FakeMetalFan/minesweeper",target:"_blank",rel:"noopener noreferrer",children:Object(r.jsx)(i.a,{icon:["fab","github"]})})]})},b=Object(c.memo)(f),j=Object(c.createContext)({mineField:[],mineFieldParams:{},mineFieldStatus:{},setMineFieldParams:function(){},setup:function(){},openCell:function(){},toggleFlag:function(){},openNeighbors:function(){},reset:function(){}}),m=j.Provider,_=j,h=t(4),O=t(37),v=t(17),x=t(38),g=function(e){return Object(h.a)(Object(h.a)({},e),{},{id:Object(x.a)()})},p=g({name:"Beginner",width:9,height:9,minesCount:10}),w=[p,g({name:"Intermediate",width:16,height:16,minesCount:40}),g({name:"Expert",width:30,height:16,minesCount:99})],F=function(e){for(var n=Object(c.useRef)(!1),t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];Object(c.useEffect)((function(){n.current?e():n.current=!0}),i)},M=t(18),C=t(52),k=t(53),y=t(12),S=t(13),N=function(){function e(n){Object(y.a)(this,e),this.mineField=n}return Object(S.a)(e,[{key:"isBusted",value:function(){return this.mineField.some((function(e){return e.isBusted}))}},{key:"isSolved",value:function(){return!this.mineField.some((function(e){var n=e.isMined,t=e.isVisible;return!(n||t)}))}}]),e}(),B=function(){function e(n){Object(y.a)(this,e),this.length=n}return Object(S.a)(e,[{key:"to2D",value:function(e){var n=e%this.length;return{rowIndex:n,columnIndex:(e-n)/this.length}}},{key:"to1D",value:function(e,n){return n*this.length+e}}]),e}(),E=function(e,n){return e>-1&&e<n},I=function(){function e(n,t){Object(y.a)(this,e),this.width=n,this.height=t,this.indexUtils=new B(this.width)}return Object(S.a)(e,[{key:"getIndexes",value:function(e){for(var n=e.index,t=this.indexUtils.to2D(n),i=t.rowIndex,c=t.columnIndex,a=[],o=-1;o<2;o+=1)for(var r=-1;r<2;r+=1)if(o||r){var s=i+o,u=c+r;E(s,this.width)&&E(u,this.height)&&a.push(this.indexUtils.to1D(s,u))}return a}},{key:"canFloodFill",value:function(e,n){return!this.getIndexes(n).some((function(n){var t=e[n],i=t.isMined,c=t.isFlagged;return i&&!c}))}},{key:"canOpen",value:function(e,n){return this.countMined(e,n)===this.countBy(e,n,"isFlagged")}},{key:"countMined",value:function(e,n){return this.countBy(e,n,"isMined")}},{key:"countBy",value:function(e,n,t){return this.getIndexes(n).reduce((function(n,i){return e[i][t]?n+1:n}),0)}}]),e}(),P=function(){var e=Object(c.useState)(p),n=Object(v.a)(e,2),t=n[0],i=n[1],a=t.width,o=t.height,r=t.minesCount,s=a*o,u=Object(c.useMemo)((function(){return Array.from({length:s},(function(e,n){return g({index:n})}))}),[s]),l=Object(c.useState)(u),d=Object(v.a)(l,2),f=d[0],b=d[1],j={hiddenMinesCount:r},m=Object(c.useState)(j),_=Object(v.a)(m,2),x=_[0],w=_[1],y=new I(a,o),S=function(e,n){return Object(M.a)(f,(function(t){null===n||void 0===n||n(t),t[e.index].isVisible=!0,function e(n){y.canFloodFill(t,n)&&y.getIndexes(n).forEach((function(n){var i=t[n],c=i.isMined,a=i.isVisible,o=i.isFlagged;c||a||o||(i.isVisible=!0,e(i))}))}(e)}))},B=function(e){return Object(M.a)(f,(function(n){e(n),n.forEach((function(e){var n=e.isMined,t=e.isBusted,i=e.isFlagged;!n&&i?e.isWrong=!0:!n||t||i||(e.isVisible=!0)}))}))},E=function(){b(u),w(j)};return F((function(){E()}),u),F((function(){var e=new N(f);e.isBusted()?w((function(e){return Object(h.a)(Object(h.a)({},e),{},{isBusted:!0})})):e.isSolved()&&(b((function(e){return Object(M.a)(e,(function(e){e.forEach((function(e){e.isMined&&(e.isFlagged=!0)}))}))})),w((function(e){return Object(h.a)(Object(h.a)({},e),{},{isSolved:!0,hiddenMinesCount:0})})))}),f),{mineField:f,mineFieldParams:t,mineFieldStatus:x,setMineFieldParams:i,setup:function(e){b(S(e,(function(n){for(var t=Object(C.a)(Object(k.a)(s),[e.index].concat(Object(O.a)(y.getIndexes(e)))),i=new Set;i.size<r;)i.add(t[Math.floor(Math.random()*t.length)]);i.forEach((function(e){n[e].isMined=!0})),n.forEach((function(e){e.isMined||(e.value=y.countMined(n,e))}))}))),w((function(e){return Object(h.a)(Object(h.a)({},e),{},{isSetup:!0})}))},openCell:function(e){var n=e.index,t=e.isMined;b(t?B((function(e){e[n].isBusted=!0})):S(e))},toggleFlag:function(e){var n=e.index,t=e.isFlagged;b((function(e){return Object(M.a)(e,(function(e){e[n].isFlagged=!t}))})),w((function(e){return Object(M.a)(e,(function(e){e.hiddenMinesCount+=t?1:-1}))}))},openNeighbors:function(e){y.canFloodFill(f,e)?b(S(e)):y.canOpen(f,e)&&b(B((function(n){y.getIndexes(e).forEach((function(e){var t=n[e],i=t.isMined,c=t.isFlagged;i&&!c?t.isBusted=!0:i||c||(t.isVisible=!0)}))})))},reset:E}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<1?"000":e<10?"00".concat(e):e<100?"0".concat(e):e.toString()},D=function(e){var n=e.count;return Object(r.jsx)("div",{children:V(n)})},L=Object(c.memo)(D),J=t(31),z=t.n(J),A=function(e){var n=e.frown,t=e.smile,c=e.onClick,a=Object(r.jsx)(i.a,{icon:["far","meh"]});return n&&(a=Object(r.jsx)(i.a,{icon:["far","frown"]})),t&&(a=Object(r.jsx)(i.a,{icon:["far","smile"]})),Object(r.jsx)("button",{type:"button",className:z.a.face,onClick:c,children:a})},Q=Object(c.memo)(A),R=function(e){var n=Object(c.useRef)();return Object(c.useEffect)((function(){n.current=e})),Object(c.useCallback)((function(){for(var e,t=arguments.length,i=new Array(t),c=0;c<t;c++)i[c]=arguments[c];null===(e=n.current)||void 0===e||e.call.apply(e,[n].concat(i))}),[])},T=function(e,n){var t=Object(c.useRef)();Object(c.useEffect)((function(){t.current=e})),Object(c.useEffect)((function(){if(n){var e=setInterval((function(){var e;null===(e=t.current)||void 0===e||e.call(t)}),n);return function(){clearInterval(e)}}}),[n])},U=t(32),W=t.n(U),G=function(){var e=Object(c.useContext)(_),n=e.mineFieldStatus,t=e.mineFieldParams,i=e.reset,a=n.isSetup,o=n.isSolved,s=n.isBusted,u=n.hiddenMinesCount,l=Object(c.useState)(0),d=Object(v.a)(l,2),f=d[0],b=d[1],j=R((function(){b(0),i()}));return T((function(){b(f+1)}),!a||o||s?null:1e3),F((function(){b(0)}),t),Object(r.jsxs)("div",{className:W.a.indicators,children:[Object(r.jsx)(L,{count:u}),Object(r.jsx)(Q,{frown:s,smile:o,onClick:j}),Object(r.jsx)(L,{count:f})]})},K=t(9),q=t(16),Y=t.n(q),Z=t(5),H=t.n(Z),X=function(e){var n,t=e.cell,c=e.onClick,a=e.onMouseDown,o=e.onContextMenu,s=t.value,u=t.isVisible,l=t.isFlagged,d=t.isMined,f=t.isWrong,b=t.isBusted,j=Y()(H.a.cell,H.a.visible),m=function(){null===o||void 0===o||o(t)};return d&&u||b||f?Object(r.jsx)("button",{type:"button",className:Y()(j,(n={},Object(K.a)(n,H.a.busted,b),Object(K.a)(n,H.a.wrong,f),n)),children:Object(r.jsx)(i.a,{icon:["fas","bomb"]})}):l?Object(r.jsx)("button",{type:"button",className:H.a.cell,onContextMenu:m,children:Object(r.jsx)(i.a,{icon:["far","flag"]})}):u?s?Object(r.jsx)("button",{type:"button",className:Y()(j,H.a["value_".concat(s)]),onMouseDown:function(e){null===a||void 0===a||a(e,t)},children:s}):Object(r.jsx)("button",{type:"button","aria-label":"cell",className:j}):Object(r.jsx)("button",{type:"button","aria-label":"cell",className:H.a.cell,onClick:function(){null===c||void 0===c||c(t)},onContextMenu:m})},$=Object(c.memo)(X),ee=t(11),ne=t.n(ee),te=function(){var e=Object(c.useContext)(_),n=e.mineFieldParams,t=(n=void 0===n?{}:n).width,i=void 0===t?0:t,a=e.mineField,o=void 0===a?[]:a,s=e.mineFieldStatus,u=(s=void 0===s?{}:s).isSetup,l=s.isBusted,d=s.isSolved,f=e.setup,b=e.openCell,j=e.toggleFlag,m=e.openNeighbors,h=R((function(e){(u?b:f)(e)})),O=R((function(e,n){var t=e.target,i=e.nativeEvent;t.addEventListener("mouseup",(function e(c){i.which!==c.which&&m(n),t.removeEventListener("mouseup",e)}))})),v=R(j);return Object(r.jsx)("div",{"data-testid":ne.a.mine_field,className:ne.a.mine_field,onContextMenu:function(e){e.preventDefault()},children:Object(r.jsx)("div",{"data-testid":ne.a.row,className:Y()(ne.a.row,ne.a["row_".concat(i)],Object(K.a)({},ne.a.disabled,l||d)),style:{width:i*Number.parseFloat(H.a.cellSize)},children:o.map((function(e){return Object(r.jsx)($,{cell:e,onClick:h,onMouseDown:O,onContextMenu:v},e.id)}))})})},ie=function(e){var n=e.item,t=e.name,i=e.checked,c=e.className,a=e.onChange;return Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{type:"radio",name:t,className:c,defaultChecked:i,onChange:function(){null===a||void 0===a||a(n)}}),n.name]})},ce=Object(c.memo)(ie),ae=t(29),oe=t.n(ae),re=function(){var e=Object(c.useContext)(_),n=e.mineFieldParams,t=e.setMineFieldParams,i=R(t);return Object(r.jsx)("form",{className:oe.a.mine_field_params,children:w.map((function(e){var t=e.name,c=e.id;return Object(r.jsx)(ce,{item:e,name:"mine-field-params",className:oe.a.radio,checked:t===n.name,onChange:i},c)}))})},se=t(33),ue=t.n(se),le=function(){return Object(r.jsxs)(m,{value:P(),children:[Object(r.jsx)(b,{}),Object(r.jsxs)("main",{className:ue.a.minesweeper,children:[Object(r.jsx)(G,{}),Object(r.jsx)(te,{}),Object(r.jsx)(re,{})]}),Object(r.jsx)(u,{})]})},de=function(){return Object(r.jsx)(le,{})},fe=t(34),be=t(10),je=t(35),me=t(20),_e=t(36);(function(){be.b.add(je.a,_e.a,me.a,me.c,me.b,me.d)})(),Object(fe.render)(Object(r.jsx)(c.StrictMode,{children:Object(r.jsx)(de,{})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.aef7d08b.chunk.js.map