(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{100:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),s=n(78),l=n(7),r=(n(96),function(){return a.a.createElement("footer",null,a.a.createElement("span",null,"Powered by",a.a.createElement("a",{className:"icon",href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer"},a.a.createElement(l.a,{icon:["fab","github"]})),"\xa9",a.a.createElement("span",null,(new Date).getFullYear())))}),c=(n(97),function(){return a.a.createElement("header",null,a.a.createElement("span",{className:"title"},"Minesweeper"),a.a.createElement("a",{className:"icon",href:"https://github.com/FakeMetalFan/minesweeper",target:"_blank",rel:"noopener noreferrer"},a.a.createElement(l.a,{icon:["fab","github"]})))}),u=n(3),o=(n(98),function(e){var t=e.state,n=e.cellRevealHandler,i=e.flagPlantingHandler,s=e.neighborsRevealHandler,r=t.isHidden,c=t.isFlagged,u=t.isEmpty,o=t.isMined,d=t.isIncorrectGuess,f=t.isBustedMine,h=t.value;return r?a.a.createElement("button",{className:"cell",onClick:n,onContextMenu:i}):c?a.a.createElement("button",{className:"cell",onContextMenu:i},a.a.createElement(l.a,{icon:["far","flag"]})):u?a.a.createElement("button",{className:"cell cell__visible"}):o||d||f?a.a.createElement("button",{className:"cell ".concat(d?"cell__incorrect-guess":f?"cell__busted-mine":"")},a.a.createElement(l.a,{icon:["fas","bomb"]})):a.a.createElement("button",{className:"cell cell__visible cell__visible__".concat(h),onMouseDown:s},h)}),d=(n(99),function(e){var t=e.columnsCount,n=e.disabled,i=e.state,s=e.cellRevealHandler,l=e.flagPlantingHandler,r=e.neighborsRevealHandler;return a.a.createElement("div",{className:"field".concat(n?" disabled":""),style:{gridTemplateColumns:"repeat(".concat(t,", 1fr)")},onContextMenu:function(e){e.preventDefault()}},i.map((function(e,t){return a.a.createElement(o,{key:t,state:e,cellRevealHandler:function(){s(e,t)},flagPlantingHandler:function(n){n.preventDefault(),l(e,t)},neighborsRevealHandler:function(e){var n=e.target,i=e.nativeEvent.which;n.addEventListener("mouseup",(function e(a){i!==a.which&&r(t),n.removeEventListener("mouseup",e)}))}})})))}),f=function(e){for(var t=Object(i.useRef)(!1),n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];Object(i.useEffect)((function(){t.current?e():t.current=!0}),a)},h=function(e){return e<1?"000":e<10?"00".concat(e):e<100?"0".concat(e):"".concat(e)},g=(n(100),function(e){var t=e.minesCount,n=e.smileyFaceClickHandler,s=e.shouldStartCountingSeconds,r=e.isBust,c=e.isVictory,o=Object(i.useState)(0),d=Object(u.a)(o,2),g=d[0],b=d[1],v=Object(i.useRef)();return f((function(){s&&(v.current=setInterval((function(){b((function(e){return e+1}))}),1e3))}),s),f((function(){(r||c)&&clearInterval(v.current)}),r,c),a.a.createElement("div",{className:"indicators"},a.a.createElement("div",{className:"mines-count"},h(t)),a.a.createElement("div",{className:"smiley-face",onClick:function(){clearInterval(v.current),b(0),n()}},a.a.createElement(l.a,{icon:["far",c?"smile":r?"frown":"meh"]})),a.a.createElement("div",{className:"timer"},h(g)))}),b=n(5),v=-3,m=-2,E=-1,_=0,y={Hidden:0,Visible:1,Flagged:2},F=9,k=16,N=16,j=0,O=1,S=2,M=9,p=16,w=30,H=10,A=30,C=99,R=n(85),U=n(10),B=n(6),V=n(79),x=n.n(V),D=n(80),I=n.n(D),P=n(81),W=n.n(P),G=n(82),J=n.n(G),L=n(47),z=n.n(L),T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.Hidden;Object(b.a)(this,e),this[B.b]=!0,this.value=t,this.state=n}return Object(U.a)(e,[{key:"isMined",get:function(){return this.value===E}},{key:"isBustedMine",get:function(){return this.value===v}},{key:"isIncorrectGuess",get:function(){return this.value===m}},{key:"isEmpty",get:function(){return this.value===_}},{key:"isHidden",get:function(){return this.state===y.Hidden}},{key:"isFlagged",get:function(){return this.state===y.Flagged}},{key:"isFloodFillAble",get:function(){return!this.isMined&&this.isHidden&&!this.isFlagged}},{key:"isMisplacedFlag",get:function(){return!this.isMined&&this.isFlagged}},{key:"isUnrevealedMine",get:function(){return this.isMined&&!this.isFlagged}}]),e}(),Y=function(){function e(t){Object(b.a)(this,e),this._fieldWidth=t}return Object(U.a)(e,[{key:"to2DAddresses",value:function(e){var t=e%this._fieldWidth;return[t,(e-t)/this._fieldWidth]}},{key:"to1DAddress",value:function(e,t){return t*this._fieldWidth+e}}]),e}(),q=function(){function e(t,n){Object(b.a)(this,e),this._fieldWidth=t,this._fieldHeight=n,this._cellAddressUtils=new Y(t)}return Object(U.a)(e,[{key:"isFloodFillAble",value:function(e,t){return!this.getNeighborsAddresses(t).some((function(t){return e[t].isUnrevealedMine}))}},{key:"getNeighborsAddresses",value:function(e){for(var t=this._cellAddressUtils.to2DAddresses(e),n=Object(u.a)(t,2),i=n[0],a=n[1],s=[],l=-1;l<2;l++)for(var r=-1;r<2;r++)if(l||r){var c=i+l,o=a+r;this._doesAddressExist(c,this._fieldWidth)&&this._doesAddressExist(o,this._fieldHeight)&&s.push(this._cellAddressUtils.to1DAddress(c,o))}return s}},{key:"countMinedNeighbors",value:function(e,t){return this._countNeighborsBy(e,t,"isMined")}},{key:"canRevealNeighbors",value:function(e,t){return this.countMinedNeighbors(e,t)===this._countNeighborsBy(e,t,"isFlagged")}},{key:"_countNeighborsBy",value:function(e,t,n){return this.getNeighborsAddresses(t).reduce((function(t,i){return e[i][n]?t+1:t}),0)}},{key:"_doesAddressExist",value:function(e,t){return-1<e&&e<t}}]),e}(),K=function(){function e(t,n,i){Object(b.a)(this,e),this.width=t,this.minesCount=i,this._height=n,this._cellNeighborsUtils=new q(t,n)}return Object(U.a)(e,[{key:"getEmptyState",value:function(){return Array.from({length:this._length},(function(){return new T}))}},{key:"getInitialState",value:function(e,t){var n=this;return this._getFloodFilledState(Object(B.a)(e,(function(e){for(var i=W()(I()(n._length),[t].concat(Object(R.a)(n._cellNeighborsUtils.getNeighborsAddresses(t)))),a=new Set;a.size<n.minesCount;)a.add(i[Math.random()*i.length|0]);a.forEach((function(t){e[t].value=E})),e.forEach((function(t,i){!t.isMined&&(t.value=n._cellNeighborsUtils.countMinedNeighbors(e,i))}))})),t)}},{key:"getCellRevealedState",value:function(e,t,n){return t.isMined?this._getBustedState(Object(B.a)(e,(function(e){e[n]=new T(v,y.Visible)}))):this._getFloodFilledState(e,n)}},{key:"getFlagPlantedState",value:function(e,t,n){var i=t.isFlagged;return Object(B.a)(e,(function(e){e[n].state=y[i?"Hidden":"Flagged"]}))}},{key:"getNeighborsRevealedState",value:function(e,t){var n=this;return this._cellNeighborsUtils.isFloodFillAble(e,t)?this._getFloodFilledState(e,t):this._cellNeighborsUtils.canRevealNeighbors(e,t)?this._getBustedState(Object(B.a)(e,(function(e){n._cellNeighborsUtils.getNeighborsAddresses(t).forEach((function(t){var n=e[t],i=n.isUnrevealedMine,a=n.isMisplacedFlag;i&&(n.value=v),a&&(n.value=m),n.state=y.Visible}))}))):x()(e)}},{key:"isBustedState",value:function(e){return z()(e,"isBustedMine")}},{key:"isVictoriousState",value:function(e){return!z()(J()(e,"isMined"),"isHidden")}},{key:"getMinesMarkedState",value:function(e){return Object(B.a)(e,(function(e){e.forEach((function(e){e.isMined&&(e.state=y.Flagged)}))}))}},{key:"_getFloodFilledState",value:function(e,t){var n=this;return Object(B.a)(e,(function(e){e[t].state=y.Visible;!function t(i){n._cellNeighborsUtils.isFloodFillAble(e,i)&&n._cellNeighborsUtils.getNeighborsAddresses(i).forEach((function(n){var i=e[n];i.isFloodFillAble&&(i.state=y.Visible,t(n))}))}(t)}))}},{key:"_getBustedState",value:function(e){return Object(B.a)(e,(function(e){e.forEach((function(t,n){var i=t.isUnrevealedMine,a=t.isMisplacedFlag;i&&(t.state=y.Visible),a&&(e[n]=new T(m,y.Visible))}))}))}},{key:"_length",get:function(){return this.width*this._height}}]),e}(),Q=function e(t){switch(Object(b.a)(this,e),t){case j:return new K(M,F,H);case O:return new K(p,k,A);case S:return new K(w,N,C);default:throw new Error('FieldProducer of type "'.concat(t,'" does not exist!'))}},X=(n(213),function(){var e=Object(i.useState)(new Q(O)),t=Object(u.a)(e,1)[0],n=Object(i.useState)([]),s=Object(u.a)(n,2),l=s[0],r=s[1],c=Object(i.useState)(t.minesCount),o=Object(u.a)(c,2),h=o[0],b=o[1],v=Object(i.useState)(!1),m=Object(u.a)(v,2),E=m[0],_=m[1],y=Object(i.useState)(!1),F=Object(u.a)(y,2),k=F[0],N=F[1],j=Object(i.useState)(!1),S=Object(u.a)(j,2),M=S[0],p=S[1];return Object(i.useEffect)((function(){r(t.getEmptyState())}),[t]),f((function(){t.isBustedState(l)?N(!0):t.isVictoriousState(l)&&(r(t.getMinesMarkedState(l)),b(0),p(!0))}),l),a.a.createElement("div",{className:"minesweeper"},a.a.createElement(g,{minesCount:h,isBust:k,isVictory:M,shouldStartCountingSeconds:E,smileyFaceClickHandler:function(){r(t.getEmptyState()),b(t.minesCount),_(!1),N(!1),p(!1)}}),a.a.createElement(d,{columnsCount:t.width,disabled:k||M,state:l,cellRevealHandler:function(e,n){E?r(t.getCellRevealedState(l,e,n)):(r(t.getInitialState(l,n)),_(!0))},flagPlantingHandler:function(e,n){r(t.getFlagPlantedState(l,e,n)),b(h+(e.isFlagged?1:-1))},neighborsRevealHandler:function(e){r(t.getNeighborsRevealedState(l,e))}}))}),Z=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(c,null),a.a.createElement(X,null),a.a.createElement(r,null))},$=n(16),ee=n(83),te=n(18),ne=n(84);n(214);$.b.add(ee.a,ne.a,te.a,te.c,te.b,te.d),Object(s.render)(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Z,null)),document.getElementById("root"))},86:function(e,t,n){e.exports=n(215)},96:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[86,1,2]]]);
//# sourceMappingURL=main.4f1688c1.chunk.js.map