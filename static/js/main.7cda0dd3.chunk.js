(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{20:function(e,n,t){},21:function(e,n,t){},22:function(e,n,t){},30:function(e,n,t){},31:function(e,n,t){},32:function(e,n,t){},33:function(e,n,t){},34:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);t(20);var i,c,o,u,s,r,a=t(3),l=(t(21),t(8)),d=(t(22),t(41)),f=function(e){return Object(a.a)(Object(a.a)({},e),{},{uuid:Object(d.a)()})};!function(e){e[e.SM=9]="SM",e[e.MD=16]="MD",e[e.BG=30]="BG"}(i||(i={})),function(e){e[e.SM=9]="SM",e[e.MD=16]="MD",e[e.BG=16]="BG"}(c||(c={})),function(e){e[e.SM=10]="SM",e[e.MD=40]="MD",e[e.BG=99]="BG"}(o||(o={})),function(e){e[e.SM=0]="SM",e[e.MD=1]="MD",e[e.BG=2]="BG"}(u||(u={})),function(e){e[e.Empty=0]="Empty",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Mine=9]="Mine",e[e.Incorrect=10]="Incorrect",e[e.Busted=11]="Busted"}(s||(s={})),function(e){e[e.Hidden=0]="Hidden",e[e.Visible=1]="Visible",e[e.Flagged=2]="Flagged"}(r||(r={}));var b=f({name:"Beginner",rowsCount:i.SM,columnsCount:c.SM,minesCount:o.SM}),j=(new Map).set(u.SM,b).set(u.MD,f({name:"Intermediate",rowsCount:i.MD,columnsCount:c.MD,minesCount:o.MD})).set(u.BG,f({name:"Expert",rowsCount:i.BG,columnsCount:c.BG,minesCount:o.BG})),h=t(1),m=Object(h.createContext)({mineFieldsProps:j,mineField:[],mineFieldProps:b,mineFieldStatus:{isSetup:!1,isBusted:!1,isSolved:!1,hiddenMinesCount:0},setMineFieldProps:function(){},setupMineField:function(){},revealCell:function(){},toggleFlag:function(){},revealNeighbors:function(){},reset:function(){}}),O=m.Provider,v=function(e){for(var n=Object(h.useRef)(!1),t=arguments.length,i=new Array(t>1?t-1:0),c=1;c<t;c++)i[c-1]=arguments[c];Object(h.useEffect)((function(){n.current?e():n.current=!0}),i)},p=function(e){return e<1?"000":e<10?"00".concat(e):e<100?"0".concat(e):e.toString()},x=t(4),g=t(0),M=function(e){var n=e.classNamePrefix,t=e.isSolved,i=e.isBusted,c=e.onClick,o=Object(g.jsx)(x.a,{icon:["far","meh"]});return t&&(o=Object(g.jsx)(x.a,{icon:["far","smile"]})),i&&(o=Object(g.jsx)(x.a,{icon:["far","frown"]})),Object(g.jsx)("div",{className:"".concat(n,"ResetIcon"),onClick:c,children:o})},C=function(){var e=Object(h.useContext)(m),n=e.mineFieldStatus,t=n.isSetup,i=n.isSolved,c=n.isBusted,o=n.hiddenMinesCount,u=e.mineFieldProps,s=e.reset,r=Object(h.useState)(0),a=Object(l.a)(r,2),d=a[0],f=a[1],b="Controls";return function(e,n){var t=Object(h.useRef)();Object(h.useEffect)((function(){t.current=e})),Object(h.useEffect)((function(){if(n){var e=setInterval((function(){var e;null===(e=t.current)||void 0===e||e.call(t)}),n);return function(){clearInterval(e)}}}),[n])}((function(){f(d+1)}),!t||i||c?void 0:1e3),v((function(){f(0)}),u),Object(g.jsxs)("div",{className:b,children:[Object(g.jsx)("div",{children:p(o)}),Object(g.jsx)(M,{isSolved:i,isBusted:c,classNamePrefix:b,onClick:function(){f(0),s()}}),Object(g.jsx)("div",{children:p(d)})]})},F=(t(30),function(){var e="Footer";return Object(g.jsx)("footer",{className:e,children:Object(g.jsxs)("span",{children:["Powered by",Object(g.jsx)("a",{className:"".concat(e,"Link"),href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer",children:Object(g.jsx)(x.a,{icon:["fab","github"]})}),"\xa9",Object(g.jsx)("span",{children:(new Date).getFullYear()})]})})}),w=(t(31),function(){var e="Header";return Object(g.jsxs)("header",{className:e,children:[Object(g.jsx)("span",{className:"".concat(e,"Title"),children:"Minesweeper"}),Object(g.jsx)("a",{className:"".concat(e,"Link"),href:"https://github.com/FakeMetalFan/minesweeper",target:"_blank",rel:"noopener noreferrer",children:Object(g.jsx)(x.a,{icon:["fab","github"]})})]})}),k=(t(32),t(5)),S=t(6),y=function(){function e(n){Object(k.a)(this,e),this.mineFieldRowsCount=n}return Object(S.a)(e,[{key:"to2D",value:function(e){var n=e%this.mineFieldRowsCount;return{rowIndex:n,columnIndex:(e-n)/this.mineFieldRowsCount}}},{key:"to1D",value:function(e,n){return n*this.mineFieldRowsCount+e}}]),e}(),B=(t(33),function(){function e(n){Object(k.a)(this,e),this.cell=n}return Object(S.a)(e,[{key:"checkCell",value:function(e,n){return this.cell[e]===n}},{key:"isEmpty",get:function(){return this.checkCell("value",s.Empty)}},{key:"isMined",get:function(){return this.checkCell("value",s.Mine)}},{key:"isIncorrect",get:function(){return this.checkCell("value",s.Incorrect)}},{key:"isBusted",get:function(){return this.checkCell("value",s.Busted)}},{key:"isHidden",get:function(){return this.checkCell("appearance",r.Hidden)}},{key:"isFlagged",get:function(){return this.checkCell("appearance",r.Flagged)}},{key:"isUnsolved",get:function(){return this.isMined&&!this.isFlagged}},{key:"isSolvedWrong",get:function(){return!this.isMined&&this.isFlagged}}]),e}()),N=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.join(" ").trim()},I="Cell",D=function(e){var n=e.classNameModifier,t=e.classNameSuffix;return Object(g.jsx)("button",{type:"button",className:N(I,n?"".concat(I).concat(n):"",t),children:Object(g.jsx)(x.a,{icon:["fas","bomb"]})})},E=function(e){var n=e.vm,t=e.withBorderRight,i=e.withBorderBottom,c=e.onClick,o=e.onMouseDown,u=e.onContextMenu,s=n.value,r=new B(n),a=r.isHidden,l=r.isEmpty,d=r.isFlagged,f=r.isMined,b=r.isIncorrect,j=r.isBusted,h=N(t?"Cell__border-right":"",i?"Cell__border-bottom":""),m=function(){u(n)};return a?Object(g.jsx)("button",{type:"button","aria-label":"Cell",className:N(I,h),onClick:function(){c(n)},onContextMenu:m}):d?Object(g.jsx)("button",{type:"button",className:N(I,h),onContextMenu:m,children:Object(g.jsx)(x.a,{icon:["far","flag"]})}):l?Object(g.jsx)("button",{type:"button","aria-label":"Cell",className:N(I,"".concat(I,"__empty"),h)}):f?Object(g.jsx)(D,{classNameSuffix:h}):b?Object(g.jsx)(D,{classNameModifier:"__incorrect",classNameSuffix:h}):j?Object(g.jsx)(D,{classNameModifier:"__busted",classNameSuffix:h}):Object(g.jsx)("button",{type:"button",className:N(I,"".concat(I,"__").concat(s),h),onMouseDown:function(e){o(e,n)},children:s})},P=Object(h.memo)(E),_=function(){var e=Object(h.useContext)(m),n=e.mineFieldProps,t=n.rowsCount,i=n.columnsCount,c=e.mineField,o=e.mineFieldStatus,u=o.isSetup,s=o.isBusted,r=o.isSolved,a=e.setupMineField,l=e.revealCell,d=e.toggleFlag,f=e.revealNeighbors,b=new y(t),j="MineField",O="".concat(j,"Row"),v=Object(h.useCallback)((function(e){(u?l:a)(e)}),[u,l,a]),p=Object(h.useCallback)((function(e,n){var t=e.target,i=e.nativeEvent;t.addEventListener("mouseup",(function e(c){i.which!==c.which&&f(n),t.removeEventListener("mouseup",e)}))}),[f]),x=Object(h.useCallback)((function(e){d(e)}),[d]);return Object(g.jsx)("div",{className:j,style:{width:32*t},onContextMenu:function(e){e.preventDefault()},children:Object(g.jsx)("div",{className:"".concat(O).concat(s||r?" ".concat(O,"__disabled"):""),children:c.map((function(e,n){var c=b.to2D(n),o=c.rowIndex,u=c.columnIndex;return Object(g.jsx)(P,{vm:e,withBorderRight:o===t-1,withBorderBottom:u===i-1,onClick:v,onMouseDown:p,onContextMenu:x},e.uuid)}))})})},R=(t(34),function(){var e=Object(h.useContext)(m),n=e.mineFieldsProps,t=e.mineFieldProps,i=e.setMineFieldProps,c=Array.from(n.values()),o="MineFieldProps";return Object(g.jsx)("form",{className:o,children:c.map((function(e){var n,c=e.uuid,u=e.name;return Object(g.jsxs)("div",{children:[Object(g.jsx)("input",{type:"radio",name:"mineFieldProp",className:"".concat(o,"RadioButton"),defaultChecked:u===t.name,onChange:(n=e,function(){i(n)})}),"\xa0",u]},c)}))})}),G=t(19),H=t(9),V=t(11),U=function(){function e(n){Object(k.a)(this,e),this.mineField=n}return Object(S.a)(e,[{key:"isBusted",value:function(){return this.mineField.some((function(e){return new B(e).isBusted}))}},{key:"isSolved",value:function(){return!V.reject(this.mineField,(function(e){return new B(e).isMined})).some((function(e){return new B(e).isHidden}))}}]),e}(),T=function(e,n){return e>-1&&e<n},A=function(){function e(n,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new y(n);Object(k.a)(this,e),this.mineFieldRowsCount=n,this.mineFieldColumnsCount=t,this.indexUtils=i}return Object(S.a)(e,[{key:"getIndexes",value:function(e){for(var n=e.index,t=[],i=this.indexUtils.to2D(n),c=i.rowIndex,o=i.columnIndex,u=-1;u<2;u+=1)for(var s=-1;s<2;s+=1)if(u||s){var r=c+u,a=o+s;T(r,this.mineFieldRowsCount)&&T(a,this.mineFieldColumnsCount)&&t.push(this.indexUtils.to1D(r,a))}return t}},{key:"canFloodFill",value:function(e,n){return!this.getIndexes(n).some((function(n){return new B(e[n]).isUnsolved}))}},{key:"canReveal",value:function(e,n){return this.countMined(e,n)===this.countBy(e,n,(function(e){return new B(e).isFlagged}))}},{key:"countMined",value:function(e,n){return this.countBy(e,n,(function(e){return new B(e).isMined}))}},{key:"countBy",value:function(e,n,t){return this.getIndexes(n).reduce((function(n,i){return t(e[i])?n+1:n}),0)}}]),e}(),L=function(){var e=function(e){var n=Object(h.useState)(e),t=Object(l.a)(n,2),i=t[0],c=t[1],o=i.rowsCount,u=i.columnsCount,d=i.minesCount,b=o*u,j=Object(h.useMemo)((function(){return Array.from({length:b},(function(e,n){return f({index:n,value:s.Empty,appearance:r.Hidden})}))}),[b]),m=Object(h.useMemo)((function(){return{isSetup:!1,isBusted:!1,isSolved:!1,hiddenMinesCount:d}}),[d]),O=Object(h.useMemo)((function(){return new A(o,u)}),[o,u]),p=Object(h.useState)(j),x=Object(l.a)(p,2),g=x[0],M=x[1],C=Object(h.useState)(m),F=Object(l.a)(C,2),w=F[0],k=F[1],S=Object(h.useCallback)((function(e,n,t){return Object(H.a)(e,(function(e){null===t||void 0===t||t(e),e[n.index].appearance=r.Visible,function n(t){O.canFloodFill(e,t)&&O.getIndexes(t).forEach((function(t){var i=e[t],c=new B(i),o=c.isMined,u=c.isHidden,s=c.isFlagged;o||!u||s||(i.appearance=r.Visible,n(i))}))}(n)}))}),[O]),y=Object(h.useCallback)((function(e,n){return Object(H.a)(e,(function(e){n(e),e.forEach((function(n,t){var i=new B(n),c=i.isUnsolved,o=i.isSolvedWrong;c?n.appearance=r.Visible:o&&(e[t]=Object(a.a)(Object(a.a)({},n),{},{value:s.Incorrect,appearance:r.Visible}))}))}))}),[]),N=Object(h.useCallback)((function(e){M((function(n){return S(n,e,(function(n){for(var t=V.difference(V.range(b),[e.index].concat(Object(G.a)(O.getIndexes(e)))),i=new Set;i.size<d;)i.add(t[Math.floor(Math.random()*t.length)]);i.forEach((function(e){n[e].value=s.Mine})),n.forEach((function(e){new B(e).isMined||(e.value=O.countMined(n,e))}))}))})),k((function(e){return Object(a.a)(Object(a.a)({},e),{},{isSetup:!0})}))}),[S,b,d,O]),I=Object(h.useCallback)((function(e){M((function(n){return new B(e).isMined?y(n,(function(n){n[e.index]=Object(a.a)(Object(a.a)({},e),{},{value:s.Busted,appearance:r.Visible})})):S(n,e)}))}),[y,S]),D=Object(h.useCallback)((function(e){var n=new B(e).isFlagged;M((function(t){return Object(H.a)(t,(function(t){t[e.index].appearance=n?r.Hidden:r.Flagged}))})),k((function(e){return Object(H.a)(e,(function(e){e.hiddenMinesCount+=n?1:-1}))}))}),[]),E=Object(h.useCallback)((function(e){M((function(n){return O.canFloodFill(n,e)?S(n,e):O.canReveal(n,e)?y(n,(function(n){O.getIndexes(e).forEach((function(e){var t=n[e],i=new B(t),c=i.isUnsolved,o=i.isSolvedWrong;c?t.value=s.Busted:o&&(t.value=s.Incorrect),t.appearance=r.Visible}))})):n}))}),[y,S,O]),P=Object(h.useCallback)((function(){M(j),k(m)}),[j,m]);return v((function(){P()}),j),v((function(){var e=new U(g);e.isBusted()?k((function(e){return Object(a.a)(Object(a.a)({},e),{},{isBusted:!0})})):e.isSolved()&&(M((function(e){return Object(H.a)(e,(function(e){e.forEach((function(e){new B(e).isMined&&(e.appearance=r.Flagged)}))}))})),k((function(e){return Object(a.a)(Object(a.a)({},e),{},{isSolved:!0,hiddenMinesCount:0})})))}),g),{mineField:g,mineFieldProps:i,mineFieldStatus:w,setMineFieldProps:c,setupMineField:N,revealCell:I,toggleFlag:D,revealNeighbors:E,reset:P}}(b);return Object(g.jsxs)(O,{value:Object(a.a)(Object(a.a)({},e),{},{mineFieldsProps:j}),children:[Object(g.jsx)(w,{}),Object(g.jsxs)("main",{className:"Minesweeper",children:[Object(g.jsx)(C,{}),Object(g.jsx)(_,{}),Object(g.jsx)(R,{})]}),Object(g.jsx)(F,{})]})},W=function(){return Object(g.jsx)(L,{})},J=t(16),z=t(7),Y=t(17),q=t(12),K=t(18);z.b.add(Y.a,K.a,q.a,q.c,q.b,q.d),Object(J.render)(Object(g.jsx)(h.StrictMode,{children:Object(g.jsx)(W,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.7cda0dd3.chunk.js.map