{"version":3,"sources":["const/index.ts","utils/add-uuid.ts","contexts/minesweeper.ts","hooks/use-did-update.ts","components/Controls/_format-count.ts","components/Controls/_ResetIcon.tsx","components/Controls/index.tsx","hooks/use-interval.ts","components/Footer/index.tsx","components/Header/index.tsx","utils/index-utils.ts","utils/cell-checker.ts","utils/join-class-names.ts","components/CellFactory/_const.ts","components/CellFactory/_BombIcon.tsx","components/CellFactory/index.tsx","components/MineField/index.tsx","components/MineFieldProps/index.tsx","utils/mine-field-utils.ts","utils/neighbors-utils.ts","containers/Minesweeper/index.tsx","hooks/use-mine-field.ts","App.tsx","setupIcons.ts","index.tsx"],"names":["MineFieldRowsCount","MineFieldColumnsCount","MineFieldMinesCount","MineFieldPropsKey","CellValue","CellAppearance","addUUID","item","uuid","UUID","smallMineFieldProps","name","rowsCount","SM","columnsCount","minesCount","mineFieldsProps","Map","set","MD","BG","MinesweeperContext","createContext","mineField","mineFieldProps","defaultMineFieldProps","mineFieldStatus","isSetup","isBusted","isSolved","hiddenMinesCount","setMineFieldProps","setupMineField","revealCell","toggleFlag","revealNeighbors","reset","MinesweeperProvider","Provider","useDidUpdate","fn","didMount","useRef","deps","useEffect","current","formatCount","count","toString","ResetIcon","classNamePrefix","onClick","icon","className","memo","Controls","delay","useContext","useState","secondsCount","setSecondsCount","handleSecondsCount","useCallback","prevSecondsCount","intervalId","setInterval","clearInterval","Footer","href","target","rel","Date","getFullYear","Header","IndexUtils","mineFieldRowsCount","index","rowIndex","this","columnIndex","CellChecker","cell","prop","criteria","checkCell","Empty","Mine","Incorrect","Busted","Hidden","Flagged","isMined","isFlagged","joinClassNames","classNames","join","trim","BombIcon","classNameModifier","classNameSuffix","CellFactory","props","borderRight","borderBottom","value","onMouseDown","onContextMenu","isHidden","isEmpty","isIncorrect","prev","next","appearance","MineField","indexUtils","useMemo","rowClassName","style","width","event","preventDefault","map","cellIndex","to2D","handleCellClick","nativeEvent","addEventListener","handleMouseUp","which","removeEventListener","handleMouseDown","handleCellContextMenu","key","MineFieldProps","items","Array","from","values","type","defaultChecked","onChange","MineFieldUtils","some","_","isValidArrayIndex","length","NeighborsUtils","mineFieldColumnsCount","indexes","rowIndexOffset","columnIndexOffset","targetedRowIndex","targetedColumnIndex","push","to1D","getIndexes","neighborIndex","isUnsolved","countMined","countBy","criteriaFn","reduce","acc","Minesweeper","initialMineFieldProps","emptyMineField","initialMineFieldStatus","neighborsUtils","setMineField","setMineFieldStatus","getFloodFilledMineField","prevMineField","draftFn","produce","draft","Visible","floodFill","canFloodFill","forEach","getBustedMineField","isSolvedWrong","mineFieldUtils","prevMineFieldStatus","minesIndexes","Set","size","add","Math","floor","random","canReveal","useMineField","App","library","faGithub","faBomb","faFlag","faMeh","faFrown","faSmile","render","document","getElementById"],"mappings":"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","file":"static/js/main.e64de5b8.chunk.js","sourcesContent":["import { addUUID } from 'utils/add-uuid';\r\nimport { MineFieldsPropsVM } from 'view-models';\r\n\r\n/* eslint-disable no-shadow */\r\nexport enum MineFieldRowsCount {\r\n  SM = 9,\r\n  MD = 16,\r\n  BG = 30,\r\n}\r\n\r\nexport enum MineFieldColumnsCount {\r\n  SM = 9,\r\n  MD = 16,\r\n  BG = 16,\r\n}\r\n\r\nexport enum MineFieldMinesCount {\r\n  SM = 10,\r\n  MD = 40,\r\n  BG = 99,\r\n}\r\n\r\nexport enum MineFieldPropsKey {\r\n  SM,\r\n  MD,\r\n  BG,\r\n}\r\n\r\nexport enum CellValue {\r\n  Empty,\r\n  One,\r\n  Two,\r\n  Three,\r\n  Four,\r\n  Five,\r\n  Six,\r\n  Seven,\r\n  Eight,\r\n  Mine,\r\n  Incorrect,\r\n  Busted,\r\n}\r\n\r\nexport enum CellAppearance {\r\n  Hidden,\r\n  Visible,\r\n  Flagged,\r\n}\r\n\r\nconst smallMineFieldProps = addUUID({\r\n  name: 'Beginner',\r\n  rowsCount: MineFieldRowsCount.SM,\r\n  columnsCount: MineFieldColumnsCount.SM,\r\n  minesCount: MineFieldMinesCount.SM,\r\n});\r\n\r\nexport const mineFieldsProps: MineFieldsPropsVM = new Map()\r\n  .set(MineFieldPropsKey.SM, smallMineFieldProps)\r\n  .set(\r\n    MineFieldPropsKey.MD,\r\n    addUUID({\r\n      name: 'Intermediate',\r\n      rowsCount: MineFieldRowsCount.MD,\r\n      columnsCount: MineFieldColumnsCount.MD,\r\n      minesCount: MineFieldMinesCount.MD,\r\n    })\r\n  )\r\n  .set(\r\n    MineFieldPropsKey.BG,\r\n    addUUID({\r\n      name: 'Expert',\r\n      rowsCount: MineFieldRowsCount.BG,\r\n      columnsCount: MineFieldColumnsCount.BG,\r\n      minesCount: MineFieldMinesCount.BG,\r\n    })\r\n  );\r\n\r\nexport { smallMineFieldProps as defaultMineFieldProps };\r\n","import { v4 as UUID } from 'uuid';\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport const addUUID = <T extends {}>(item: T) => ({ ...item, uuid: UUID() });\n","import { defaultMineFieldProps, mineFieldsProps } from 'const';\nimport { useMineField } from 'hooks/use-mine-field';\nimport { createContext } from 'react';\nimport { MineFieldsPropsVM } from 'view-models';\n\ntype MinesweeperContextValue = Readonly<\n  ReturnType<typeof useMineField> & {\n    readonly mineFieldsProps: MineFieldsPropsVM;\n  }\n>;\n\n/* eslint-disable @typescript-eslint/no-empty-function */\nexport const MinesweeperContext = createContext<MinesweeperContextValue>({\n  mineFieldsProps,\n  mineField: [],\n  mineFieldProps: defaultMineFieldProps,\n  mineFieldStatus: {\n    isSetup: false,\n    isBusted: false,\n    isSolved: false,\n    hiddenMinesCount: 0,\n  },\n  setMineFieldProps: () => {},\n  setupMineField: () => {},\n  revealCell: () => {},\n  toggleFlag: () => {},\n  revealNeighbors: () => {},\n  reset: () => {},\n});\n\nexport const { Provider: MinesweeperProvider } = MinesweeperContext;\n","import { useEffect, useRef } from 'react';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const useDidUpdate = (fn: () => void, ...deps: any[]) => {\n  const didMount = useRef(false);\n\n  useEffect(() => {\n    if (didMount.current) {\n      fn();\n    } else {\n      didMount.current = true;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, deps);\n};\n","export const formatCount = (count: number) => {\r\n  if (count < 1) {\r\n    return '000';\r\n  }\r\n\r\n  if (count < 10) {\r\n    return `00${count}`;\r\n  }\r\n\r\n  if (count < 100) {\r\n    return `0${count}`;\r\n  }\r\n\r\n  return count.toString();\r\n};\r\n","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React, { memo } from 'react';\r\n\r\ntype ResetIconProps = Readonly<{\r\n  readonly isSolved: boolean;\r\n  readonly isBusted: boolean;\r\n  readonly classNamePrefix: string;\r\n  readonly onClick: () => void;\r\n}>;\r\n\r\nconst ResetIcon = ({\r\n  classNamePrefix,\r\n  isSolved,\r\n  isBusted,\r\n  onClick,\r\n}: ResetIconProps) => {\r\n  let icon = <FontAwesomeIcon icon={['far', 'meh']} />;\r\n\r\n  if (isSolved) {\r\n    icon = <FontAwesomeIcon icon={['far', 'smile']} />;\r\n  }\r\n\r\n  if (isBusted) {\r\n    icon = <FontAwesomeIcon icon={['far', 'frown']} />;\r\n  }\r\n\r\n  return (\r\n    /* eslint-disable jsx-a11y/click-events-have-key-events, jsx-a11y/no-static-element-interactions */\r\n    <div className={`${classNamePrefix}ResetIcon`} onClick={onClick}>\r\n      {icon}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(ResetIcon);\r\n","import './_controls.scss';\r\n\r\nimport { MinesweeperContext } from 'contexts/minesweeper';\r\nimport { useDidUpdate } from 'hooks/use-did-update';\r\nimport { useInterval } from 'hooks/use-interval';\r\nimport React, { useCallback, useContext, useState } from 'react';\r\n\r\nimport { formatCount } from './_format-count';\r\nimport ResetIcon from './_ResetIcon';\r\n\r\nconst INTERVAL_DELAY = 1e3;\r\n\r\nconst Controls = () => {\r\n  const {\r\n    mineFieldStatus: { isSetup, isSolved, isBusted, hiddenMinesCount },\r\n    mineFieldProps,\r\n    reset,\r\n  } = useContext(MinesweeperContext);\r\n\r\n  const [secondsCount, setSecondsCount] = useState(0);\r\n\r\n  const classNamePrefix = 'Controls';\r\n\r\n  const handleSecondsCount = useCallback(() => {\r\n    setSecondsCount((prevSecondsCount) => prevSecondsCount + 1);\r\n  }, []);\r\n\r\n  const handleResetIconClick = () => {\r\n    setSecondsCount(0);\r\n    reset();\r\n  };\r\n\r\n  useInterval(\r\n    handleSecondsCount,\r\n    isSetup && !(isSolved || isBusted) ? INTERVAL_DELAY : void 0\r\n  );\r\n\r\n  useDidUpdate(() => {\r\n    setSecondsCount(0);\r\n  }, mineFieldProps);\r\n\r\n  return (\r\n    <div className={classNamePrefix}>\r\n      <div>{formatCount(hiddenMinesCount)}</div>\r\n\r\n      <ResetIcon\r\n        isSolved={isSolved}\r\n        isBusted={isBusted}\r\n        classNamePrefix={classNamePrefix}\r\n        onClick={handleResetIconClick}\r\n      />\r\n\r\n      <div>{formatCount(secondsCount)}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Controls;\r\n","import { useEffect } from 'react';\r\n\r\nexport const useInterval = (fn: () => void, delay?: number) => {\r\n  // eslint-disable-next-line consistent-return\r\n  useEffect(() => {\r\n    if (delay) {\r\n      const intervalId = setInterval(() => {\r\n        fn();\r\n      }, delay);\r\n\r\n      return () => {\r\n        clearInterval(intervalId);\r\n      };\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [delay]);\r\n};\r\n","import './_footer.scss';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React from 'react';\r\n\r\nconst Footer = () => {\r\n  const classNamePrefix = 'Footer';\r\n\r\n  return (\r\n    <footer className={classNamePrefix}>\r\n      <span>\r\n        Powered by\r\n        <a\r\n          className={`${classNamePrefix}Link`}\r\n          href=\"https://github.com/FakeMetalFan\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          <FontAwesomeIcon icon={['fab', 'github']} />\r\n        </a>\r\n        &copy;<span>{new Date().getFullYear()}</span>\r\n      </span>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import './_header.scss';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React from 'react';\r\n\r\nconst Header = () => {\r\n  const classNamePrefix = 'Header';\r\n\r\n  return (\r\n    <header className={classNamePrefix}>\r\n      <span className={`${classNamePrefix}Title`}>Minesweeper</span>\r\n\r\n      <a\r\n        className={`${classNamePrefix}Link`}\r\n        href=\"https://github.com/FakeMetalFan/minesweeper\"\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n      >\r\n        <FontAwesomeIcon icon={['fab', 'github']} />\r\n      </a>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","export class IndexUtils {\n  // eslint-disable-next-line no-useless-constructor\n  constructor(private readonly mineFieldRowsCount: number) {}\n\n  to2D(index: number) {\n    const rowIndex = index % this.mineFieldRowsCount;\n\n    return {\n      rowIndex,\n      columnIndex: (index - rowIndex) / this.mineFieldRowsCount,\n    };\n  }\n\n  to1D(rowIndex: number, columnIndex: number) {\n    return columnIndex * this.mineFieldRowsCount + rowIndex;\n  }\n}\n","import { CellAppearance, CellValue } from 'const';\nimport { CellVM } from 'view-models';\n\nexport class CellChecker {\n  // eslint-disable-next-line no-useless-constructor\n  constructor(private readonly cell: CellVM) {}\n\n  private checkCell(prop: keyof CellVM, criteria: CellValue | CellAppearance) {\n    return this.cell[prop] === criteria;\n  }\n\n  get isEmpty() {\n    return this.checkCell('value', CellValue.Empty);\n  }\n\n  get isMined() {\n    return this.checkCell('value', CellValue.Mine);\n  }\n\n  get isIncorrect() {\n    return this.checkCell('value', CellValue.Incorrect);\n  }\n\n  get isBusted() {\n    return this.checkCell('value', CellValue.Busted);\n  }\n\n  get isHidden() {\n    return this.checkCell('appearance', CellAppearance.Hidden);\n  }\n\n  get isFlagged() {\n    return this.checkCell('appearance', CellAppearance.Flagged);\n  }\n\n  get isUnsolved() {\n    return this.isMined && !this.isFlagged;\n  }\n\n  get isSolvedWrong() {\n    return !this.isMined && this.isFlagged;\n  }\n}\n","export const joinClassNames = (...classNames: string[]) =>\r\n  classNames.join(' ').trim();\r\n","export const classNamePrefix = 'Cell';\r\n","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React from 'react';\r\nimport { joinClassNames } from 'utils/join-class-names';\r\n\r\nimport { classNamePrefix } from './_const';\r\n\r\ntype BombIconProps = Readonly<{\r\n  readonly classNameModifier?: string;\r\n  readonly classNameSuffix: string;\r\n}>;\r\n\r\nconst BombIcon = ({ classNameModifier, classNameSuffix }: BombIconProps) => (\r\n  <td\r\n    className={joinClassNames(\r\n      classNamePrefix,\r\n      classNameModifier ? `${classNamePrefix}${classNameModifier}` : '',\r\n      classNameSuffix\r\n    )}\r\n  >\r\n    <FontAwesomeIcon icon={['fas', 'bomb']} />\r\n  </td>\r\n);\r\n\r\nexport default BombIcon;\r\n","import './_cell-factory.scss';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React, { memo, SyntheticEvent } from 'react';\r\nimport { CellChecker } from 'utils/cell-checker';\r\nimport { joinClassNames } from 'utils/join-class-names';\r\nimport { CellVM } from 'view-models';\r\n\r\nimport BombIcon from './_BombIcon';\r\nimport { classNamePrefix } from './_const';\r\n\r\ntype CellFactoryProps = Readonly<\r\n  {\r\n    readonly borderRight?: boolean;\r\n    readonly borderBottom?: boolean;\r\n    readonly onClick: () => void;\r\n    readonly onMouseDown: (event: SyntheticEvent<HTMLTableCellElement>) => void;\r\n    readonly onContextMenu: () => void;\r\n  } & CellVM\r\n>;\r\n\r\nconst CellFactory = (props: CellFactoryProps) => {\r\n  const {\r\n    borderRight,\r\n    borderBottom,\r\n    value,\r\n    onClick,\r\n    onMouseDown,\r\n    onContextMenu,\r\n  } = props;\r\n\r\n  const {\r\n    isHidden,\r\n    isEmpty,\r\n    isFlagged,\r\n    isMined,\r\n    isIncorrect,\r\n    isBusted,\r\n  } = new CellChecker(props);\r\n\r\n  const classNameSuffix = joinClassNames(\r\n    borderRight ? 'Cell__border-right' : '',\r\n    borderBottom ? 'Cell__border-bottom' : ''\r\n  );\r\n\r\n  if (isHidden) {\r\n    return (\r\n      /* eslint-disable jsx-a11y/click-events-have-key-events, jsx-a11y/no-noninteractive-element-interactions */\r\n      <td\r\n        className={joinClassNames(classNamePrefix, classNameSuffix)}\r\n        onClick={onClick}\r\n        onContextMenu={onContextMenu}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (isFlagged) {\r\n    return (\r\n      <td\r\n        className={joinClassNames(classNamePrefix, classNameSuffix)}\r\n        onContextMenu={onContextMenu}\r\n      >\r\n        <FontAwesomeIcon icon={['far', 'flag']} />\r\n      </td>\r\n    );\r\n  }\r\n\r\n  if (isEmpty) {\r\n    return (\r\n      <td\r\n        className={joinClassNames(\r\n          classNamePrefix,\r\n          `${classNamePrefix}__empty`,\r\n          classNameSuffix\r\n        )}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (isMined) {\r\n    return <BombIcon classNameSuffix={classNameSuffix} />;\r\n  }\r\n\r\n  if (isIncorrect) {\r\n    return (\r\n      <BombIcon\r\n        classNameModifier=\"__incorrect\"\r\n        classNameSuffix={classNameSuffix}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (isBusted) {\r\n    return (\r\n      <BombIcon\r\n        classNameModifier=\"__busted\"\r\n        classNameSuffix={classNameSuffix}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <td\r\n      className={joinClassNames(\r\n        classNamePrefix,\r\n        `${classNamePrefix}__${value}`,\r\n        classNameSuffix\r\n      )}\r\n      onMouseDown={onMouseDown}\r\n    >\r\n      {value}\r\n    </td>\r\n  );\r\n};\r\n\r\nexport default memo(\r\n  CellFactory,\r\n  (prev, next) =>\r\n    prev.value === next.value && prev.appearance === next.appearance\r\n);\r\n","import './_mine-field.scss';\r\n\r\nimport { MinesweeperContext } from 'contexts/minesweeper';\r\nimport React, { SyntheticEvent, useContext, useMemo } from 'react';\r\nimport { IndexUtils } from 'utils/index-utils';\r\n\r\nimport CellFactory from '../CellFactory';\r\n\r\nconst CELL_SIZE = 32;\r\n\r\nconst MineField = () => {\r\n  const {\r\n    mineFieldProps: { rowsCount, columnsCount },\r\n    mineField,\r\n    mineFieldStatus: { isSetup, isBusted, isSolved },\r\n    setupMineField,\r\n    revealCell,\r\n    toggleFlag,\r\n    revealNeighbors,\r\n  } = useContext(MinesweeperContext);\r\n\r\n  const indexUtils = useMemo(() => new IndexUtils(rowsCount), [rowsCount]);\r\n\r\n  const classNamePrefix = 'MineField';\r\n  const rowClassName = `${classNamePrefix}Row`;\r\n\r\n  const handleTableContextMenu = (event: SyntheticEvent<HTMLTableElement>) => {\r\n    event.preventDefault();\r\n  };\r\n\r\n  const handleCellClick = (cellIndex: number) => {\r\n    (isSetup ? revealCell : setupMineField)(cellIndex);\r\n  };\r\n\r\n  const handleMouseDown = (\r\n    { target, nativeEvent }: SyntheticEvent<HTMLTableCellElement>,\r\n    cellIndex: number\r\n  ) => {\r\n    const handleMouseUp = (event: Event) => {\r\n      if ((nativeEvent as MouseEvent).which !== (event as MouseEvent).which) {\r\n        revealNeighbors(cellIndex);\r\n      }\r\n\r\n      target.removeEventListener('mouseup', handleMouseUp);\r\n    };\r\n\r\n    target.addEventListener('mouseup', handleMouseUp);\r\n  };\r\n\r\n  const handleCellContextMenu = (cellIndex: number) => {\r\n    toggleFlag(cellIndex);\r\n  };\r\n\r\n  return (\r\n    <table\r\n      className={classNamePrefix}\r\n      style={{ width: rowsCount * CELL_SIZE }}\r\n      onContextMenu={handleTableContextMenu}\r\n    >\r\n      <tbody>\r\n        <tr\r\n          className={\r\n            isBusted || isSolved\r\n              ? `${rowClassName} ${rowClassName}__disabled`\r\n              : void 0\r\n          }\r\n        >\r\n          {mineField.map((cell, cellIndex) => {\r\n            const { rowIndex, columnIndex } = indexUtils.to2D(cellIndex);\r\n\r\n            return (\r\n              <CellFactory\r\n                {...cell}\r\n                borderRight={rowIndex === rowsCount - 1}\r\n                borderBottom={columnIndex === columnsCount - 1}\r\n                onClick={() => {\r\n                  handleCellClick(cellIndex);\r\n                }}\r\n                onMouseDown={(event) => {\r\n                  handleMouseDown(event, cellIndex);\r\n                }}\r\n                onContextMenu={() => {\r\n                  handleCellContextMenu(cellIndex);\r\n                }}\r\n                key={cell.uuid}\r\n              />\r\n            );\r\n          })}\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n\r\nexport default MineField;\r\n","import './_mine-field-props.scss';\n\nimport { MinesweeperContext } from 'contexts/minesweeper';\nimport React, { useContext, useMemo } from 'react';\n\nconst MineFieldProps = () => {\n  const { mineFieldsProps, mineFieldProps, setMineFieldProps } = useContext(\n    MinesweeperContext\n  );\n\n  const items = useMemo(() => Array.from(mineFieldsProps.values()), [\n    mineFieldsProps,\n  ]);\n\n  return (\n    <form className=\"MineFieldParams\">\n      {items.map((item) => {\n        const { uuid, name } = item;\n\n        return (\n          <div key={uuid}>\n            <input\n              type=\"radio\"\n              name=\"mineFieldProps\"\n              defaultChecked={name === mineFieldProps.name}\n              onChange={() => {\n                setMineFieldProps(item);\n              }}\n            />\n            &nbsp;\n            {name}\n          </div>\n        );\n      })}\n    </form>\n  );\n};\n\nexport default MineFieldProps;\n","import * as _ from 'lodash';\nimport { CellChecker } from 'utils/cell-checker';\nimport { MineFieldVM } from 'view-models';\n\nexport class MineFieldUtils {\n  // eslint-disable-next-line no-useless-constructor\n  constructor(private readonly mineField: MineFieldVM) {}\n\n  isBusted() {\n    return this.mineField.some((cell) => new CellChecker(cell).isBusted);\n  }\n\n  isSolved() {\n    return !_.reject(\n      this.mineField,\n      (cell) => new CellChecker(cell).isMined\n    ).some((cell) => new CellChecker(cell).isHidden);\n  }\n}\n","import { CellChecker } from 'utils/cell-checker';\nimport { IndexUtils } from 'utils/index-utils';\nimport { CellVM, MineFieldVM } from 'view-models';\n\nconst isValidArrayIndex = (index: number, length: number) =>\n  index > -1 && index < length;\n\nexport class NeighborsUtils {\n  // eslint-disable-next-line no-useless-constructor\n  constructor(\n    private readonly mineFieldRowsCount: number,\n    private readonly mineFieldColumnsCount: number,\n    private readonly indexUtils = new IndexUtils(mineFieldRowsCount)\n  ) {}\n\n  getIndexes(index: number) {\n    const indexes: number[] = [];\n\n    const { rowIndex, columnIndex } = this.indexUtils.to2D(index);\n\n    for (let rowIndexOffset = -1; rowIndexOffset < 2; rowIndexOffset += 1) {\n      for (\n        let columnIndexOffset = -1;\n        columnIndexOffset < 2;\n        columnIndexOffset += 1\n      ) {\n        if (rowIndexOffset || columnIndexOffset) {\n          const targetedRowIndex = rowIndex + rowIndexOffset;\n          const targetedColumnIndex = columnIndex + columnIndexOffset;\n\n          if (\n            isValidArrayIndex(targetedRowIndex, this.mineFieldRowsCount) &&\n            isValidArrayIndex(targetedColumnIndex, this.mineFieldColumnsCount)\n          ) {\n            indexes.push(\n              this.indexUtils.to1D(targetedRowIndex, targetedColumnIndex)\n            );\n          }\n        }\n      }\n    }\n\n    return indexes;\n  }\n\n  canFloodFill(mineField: MineFieldVM, index: number) {\n    return !this.getIndexes(index).some(\n      (neighborIndex) => new CellChecker(mineField[neighborIndex]).isUnsolved\n    );\n  }\n\n  canReveal(mineField: MineFieldVM, index: number) {\n    return (\n      this.countMined(mineField, index) ===\n      this.countBy(mineField, index, (cell) => new CellChecker(cell).isFlagged)\n    );\n  }\n\n  countMined(mineField: MineFieldVM, index: number) {\n    return this.countBy(\n      mineField,\n      index,\n      (cell) => new CellChecker(cell).isMined\n    );\n  }\n\n  private countBy(\n    mineField: MineFieldVM,\n    index: number,\n    criteriaFn: (cell: CellVM) => boolean\n  ) {\n    return this.getIndexes(index).reduce(\n      (acc, neighborIndex) =>\n        criteriaFn(mineField[neighborIndex]) ? acc + 1 : acc,\n      0\n    );\n  }\n}\n","import './_minesweeper.scss';\n\nimport Controls from 'components/Controls';\nimport Footer from 'components/Footer';\nimport Header from 'components/Header';\nimport MineField from 'components/MineField';\nimport MineFieldProps from 'components/MineFieldProps';\nimport { defaultMineFieldProps, mineFieldsProps } from 'const';\nimport { MinesweeperProvider } from 'contexts/minesweeper';\nimport { useMineField } from 'hooks/use-mine-field';\nimport React from 'react';\n\nconst Minesweeper = () => {\n  const mineField = useMineField(defaultMineFieldProps);\n\n  return (\n    <MinesweeperProvider value={{ ...mineField, mineFieldsProps }}>\n      <Header />\n\n      <main className=\"Minesweeper\">\n        <Controls />\n        <MineField />\n        <MineFieldProps />\n      </main>\n\n      <Footer />\n    </MinesweeperProvider>\n  );\n};\n\nexport default Minesweeper;\n","import { CellAppearance, CellValue } from 'const';\nimport { useDidUpdate } from 'hooks/use-did-update';\nimport produce, { Draft } from 'immer';\nimport * as _ from 'lodash';\nimport { useMemo, useState } from 'react';\nimport { addUUID } from 'utils/add-uuid';\nimport { CellChecker } from 'utils/cell-checker';\nimport { MineFieldUtils } from 'utils/mine-field-utils';\nimport { NeighborsUtils } from 'utils/neighbors-utils';\nimport { CellVM, MineFieldPropsVM, MineFieldVM } from 'view-models';\n\ntype DraftFn = (mineField: Draft<MineFieldVM>) => void;\n\nexport const useMineField = (initialMineFieldProps: MineFieldPropsVM) => {\n  const [mineFieldProps, setMineFieldProps] = useState(initialMineFieldProps);\n\n  const { rowsCount, columnsCount, minesCount } = mineFieldProps;\n\n  const length = rowsCount * columnsCount;\n\n  const emptyMineField = useMemo(\n    () =>\n      Array.from({ length }, () =>\n        addUUID({ value: CellValue.Empty, appearance: CellAppearance.Hidden })\n      ),\n    [length]\n  );\n\n  const initialMineFieldStatus = useMemo(\n    () => ({\n      isSetup: false,\n      isBusted: false,\n      isSolved: false,\n      hiddenMinesCount: minesCount,\n    }),\n    [minesCount]\n  );\n\n  const neighborsUtils = useMemo(\n    () => new NeighborsUtils(rowsCount, columnsCount),\n    [rowsCount, columnsCount]\n  );\n\n  const [mineField, setMineField] = useState(emptyMineField);\n\n  const [mineFieldStatus, setMineFieldStatus] = useState(\n    initialMineFieldStatus\n  );\n\n  const getFloodFilledMineField = (\n    prevMineField: CellVM[],\n    cellIndex: number,\n    draftFn?: DraftFn\n  ) =>\n    produce(prevMineField, (draft) => {\n      draftFn?.(draft);\n\n      /* eslint-disable no-param-reassign */\n      draft[cellIndex].appearance = CellAppearance.Visible;\n\n      (function floodFill(index: number) {\n        if (neighborsUtils.canFloodFill(draft, index)) {\n          neighborsUtils.getIndexes(index).forEach((neighborIndex) => {\n            const cell = draft[neighborIndex];\n\n            const { isMined, isHidden, isFlagged } = new CellChecker(cell);\n\n            if (!isMined && isHidden && !isFlagged) {\n              cell.appearance = CellAppearance.Visible;\n\n              floodFill(neighborIndex);\n            }\n          });\n        }\n      })(cellIndex);\n    });\n\n  const getBustedMineField = (prevMineField: CellVM[], draftFn: DraftFn) =>\n    produce(prevMineField, (draft) => {\n      draftFn(draft);\n\n      draft.forEach((cell, index) => {\n        const { isUnsolved, isSolvedWrong } = new CellChecker(cell);\n\n        if (isUnsolved) {\n          cell.appearance = CellAppearance.Visible;\n        } else if (isSolvedWrong) {\n          draft[index] = {\n            ...cell,\n            value: CellValue.Incorrect,\n            appearance: CellAppearance.Visible,\n          };\n        }\n      });\n    });\n\n  const setupMineField = (cellIndex: number) => {\n    setMineField((prevMineField) =>\n      getFloodFilledMineField(prevMineField, cellIndex, (draft) => {\n        const indexes = _.difference(_.range(length), [\n          cellIndex,\n          ...neighborsUtils.getIndexes(cellIndex),\n        ]);\n\n        const minesIndexes = new Set<number>();\n\n        while (minesIndexes.size < minesCount) {\n          minesIndexes.add(indexes[Math.floor(Math.random() * indexes.length)]);\n        }\n\n        minesIndexes.forEach((index) => {\n          draft[index].value = CellValue.Mine;\n        });\n\n        draft.forEach((cell, index) => {\n          if (!new CellChecker(cell).isMined) {\n            cell.value = neighborsUtils.countMined(draft, index);\n          }\n        });\n      })\n    );\n\n    setMineFieldStatus({ ...mineFieldStatus, isSetup: true });\n  };\n\n  const revealCell = (cellIndex: number) => {\n    setMineField((prevMineField) => {\n      const cell = prevMineField[cellIndex];\n\n      return new CellChecker(cell).isMined\n        ? getBustedMineField(prevMineField, (draft) => {\n            draft[cellIndex] = {\n              ...cell,\n              value: CellValue.Busted,\n              appearance: CellAppearance.Visible,\n            };\n          })\n        : getFloodFilledMineField(prevMineField, cellIndex);\n    });\n  };\n\n  const toggleFlag = (cellIndex: number) => {\n    const { isFlagged } = new CellChecker(mineField[cellIndex]);\n\n    setMineField((prevMineField) =>\n      produce(prevMineField, (draft) => {\n        draft[cellIndex].appearance = isFlagged\n          ? CellAppearance.Hidden\n          : CellAppearance.Flagged;\n      })\n    );\n\n    setMineFieldStatus((prevMineFieldStatus) =>\n      produce(prevMineFieldStatus, (draft) => {\n        draft.hiddenMinesCount += isFlagged ? 1 : -1;\n      })\n    );\n  };\n\n  const revealNeighbors = (cellIndex: number) => {\n    setMineField((prevMineField) => {\n      if (neighborsUtils.canFloodFill(prevMineField, cellIndex)) {\n        return getFloodFilledMineField(prevMineField, cellIndex);\n      }\n\n      if (neighborsUtils.canReveal(prevMineField, cellIndex)) {\n        return getBustedMineField(prevMineField, (draft) => {\n          neighborsUtils.getIndexes(cellIndex).forEach((index) => {\n            const cell = draft[index];\n\n            const { isUnsolved, isSolvedWrong } = new CellChecker(cell);\n\n            if (isUnsolved) {\n              cell.value = CellValue.Busted;\n            } else if (isSolvedWrong) {\n              cell.value = CellValue.Incorrect;\n            }\n\n            cell.appearance = CellAppearance.Visible;\n          });\n        });\n      }\n\n      return prevMineField;\n    });\n  };\n\n  const reset = () => {\n    setMineField(emptyMineField);\n\n    setMineFieldStatus(initialMineFieldStatus);\n  };\n\n  useDidUpdate(() => {\n    reset();\n  }, emptyMineField);\n\n  useDidUpdate(() => {\n    const mineFieldUtils = new MineFieldUtils(mineField);\n\n    if (mineFieldUtils.isBusted()) {\n      setMineFieldStatus((prevMineFieldStatus) => ({\n        ...prevMineFieldStatus,\n        isBusted: true,\n      }));\n    } else if (mineFieldUtils.isSolved()) {\n      setMineField((prevMineField) =>\n        produce(prevMineField, (draft) => {\n          draft.forEach((cell) => {\n            if (new CellChecker(cell).isMined) {\n              cell.appearance = CellAppearance.Flagged;\n            }\n          });\n        })\n      );\n\n      setMineFieldStatus((prevMineFieldStatus) => ({\n        ...prevMineFieldStatus,\n        isSolved: true,\n        hiddenMinesCount: 0,\n      }));\n    }\n  }, mineField);\n\n  return {\n    mineField,\n    mineFieldProps,\n    mineFieldStatus,\n    setMineFieldProps,\n    setupMineField,\n    revealCell,\n    toggleFlag,\n    revealNeighbors,\n    reset,\n  };\n};\n","import Minesweeper from 'containers/Minesweeper';\nimport React from 'react';\n\nconst App = () => <Minesweeper />;\n\nexport default App;\n","import { library } from '@fortawesome/fontawesome-svg-core';\nimport { faGithub } from '@fortawesome/free-brands-svg-icons';\nimport {\n  faFlag,\n  faFrown,\n  faMeh,\n  faSmile,\n} from '@fortawesome/free-regular-svg-icons';\nimport { faBomb } from '@fortawesome/free-solid-svg-icons';\n\nexport const setupIcons = () => {\n  library.add(faGithub, faBomb, faFlag, faMeh, faFrown, faSmile);\n};\n","import 'index.scss';\n\nimport App from 'App';\nimport React, { StrictMode } from 'react';\nimport { render } from 'react-dom';\nimport { setupIcons } from 'setupIcons';\n\nsetupIcons();\n\nrender(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}