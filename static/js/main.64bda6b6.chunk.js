(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{11:function(e,n,t){e.exports={mine_field:"mineField_mine_field__2Fl0L",row:"mineField_row__35wCK",disabled:"mineField_disabled__deIQ0"}},26:function(e,n,t){e.exports={radio:"radio_radio__WGkBE",input:"radio_input__3VDJr",label:"radio_label__35OQj"}},28:function(e,n,t){e.exports={footer:"footer_footer__3SziO",link:"footer_link__2dFa3"}},29:function(e,n,t){e.exports={header:"header_header__2yLQj",link:"header_link__3R6BL"}},31:function(e,n,t){e.exports={face:"face_face__1V5r6"}},32:function(e,n,t){e.exports={indicators:"indicators_indicators__xiJJ1"}},33:function(e,n,t){e.exports={mine_field_params:"mineFieldParams_mine_field_params__1t4La"}},34:function(e,n,t){e.exports={minesweeper:"minesweeper_minesweeper__24ziS"}},40:function(e,n,t){},5:function(e,n,t){e.exports={cellSize:"28px",cell:"cell_cell__14Twb",visible:"cell_visible__Ladne",busted:"cell_busted__3Eypx",wrong:"cell_wrong__VEfOs",value_1:"cell_value_1__23PsV",value_2:"cell_value_2__1Q9Ag",value_3:"cell_value_3__1_bSN",value_4:"cell_value_4__Tvv7G",value_5:"cell_value_5__pfAPd",value_6:"cell_value_6__19hZL",value_7:"cell_value_7__1IqTn",value_8:"cell_value_8__2-ysP"}},51:function(e,n,t){"use strict";t.r(n);t(40);var i=t(3),c=t(1),a=t(28),o=t.n(a),s=t(0),l=function(){return Object(s.jsx)("footer",{className:o.a.footer,children:Object(s.jsxs)("span",{children:["Powered by",Object(s.jsx)("a",{className:o.a.link,href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer",children:Object(s.jsx)(i.a,{icon:["fab","github"]})}),"\xa9",Object(s.jsx)("span",{children:(new Date).getFullYear()})]})})},r=Object(c.memo)(l),u=t(29),d=t.n(u),b=function(){return Object(s.jsxs)("header",{className:d.a.header,children:["Minesweeper",Object(s.jsx)("a",{className:d.a.link,href:"https://github.com/FakeMetalFan/minesweeper",target:"_blank",rel:"noopener noreferrer",children:Object(s.jsx)(i.a,{icon:["fab","github"]})})]})},f=Object(c.memo)(b),j=Object(c.createContext)({}),h=j.Provider,_=j,m=t(4),O=t(38),v=t(15),x=t(39),p=function(e){return Object(m.a)(Object(m.a)({},e),{},{id:Object(x.a)()})},g=p({label:"Easy",width:9,height:9,minesCount:10}),w=[g,p({label:"Medium",width:16,height:16,minesCount:40}),p({label:"Hard",width:30,height:16,minesCount:99})],F=function(e){for(var n=Object(c.useRef)(!1),t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];Object(c.useEffect)((function(){n.current?e():n.current=!0}),i)},M=t(16),C=t(53),k=t(54),y=t(21),N=t(22),S=function(){function e(n){Object(y.a)(this,e),this.length=n}return Object(N.a)(e,[{key:"to2D",value:function(e){var n=e%this.length;return{rowIndex:n,columnIndex:(e-n)/this.length}}},{key:"to1D",value:function(e,n){return n*this.length+e}}]),e}(),E=function(e,n){return e>-1&&e<n},I=function(){function e(n,t){Object(y.a)(this,e),this.width=n,this.height=t,this.indexUtils=new S(this.width)}return Object(N.a)(e,[{key:"getIndexes",value:function(e){for(var n=e.index,t=this.indexUtils.to2D(n),i=t.rowIndex,c=t.columnIndex,a=[],o=-1;o<2;o+=1)for(var s=-1;s<2;s+=1)if(o||s){var l=i+o,r=c+s;E(l,this.width)&&E(r,this.height)&&a.push(this.indexUtils.to1D(l,r))}return a}},{key:"canFloodFill",value:function(e,n){return!this.getIndexes(n).some((function(n){var t=e[n],i=t.isMined,c=t.isFlagged;return i&&!c}))}},{key:"canOpen",value:function(e,n){return this.countMined(e,n)===this.countBy(e,n,"isFlagged")}},{key:"countMined",value:function(e,n){return this.countBy(e,n,"isMined")}},{key:"countBy",value:function(e,n,t){return this.getIndexes(n).reduce((function(n,i){return e[i][t]?n+1:n}),0)}}]),e}(),B=function(e){var n=Object(c.useRef)();return Object(c.useEffect)((function(){n.current=e})),Object(c.useCallback)((function(){for(var e,t=arguments.length,i=new Array(t),c=0;c<t;c++)i[c]=arguments[c];null===(e=n.current)||void 0===e||e.call.apply(e,[n].concat(i))}),[])},P=function(){var e=Object(c.useState)(g),n=Object(v.a)(e,2),t=n[0],i=n[1],a=t.width,o=t.height,s=t.minesCount,l=a*o,r=Object(c.useMemo)((function(){return Array.from({length:l},(function(e,n){return p({index:n})}))}),[l]),u=Object(c.useState)(r),d=Object(v.a)(u,2),b=d[0],f=d[1],j={hiddenMinesCount:s},h=Object(c.useState)(j),_=Object(v.a)(h,2),x=_[0],w=_[1],y=new I(a,o),N=function(e,n){return Object(M.a)(b,(function(t){null===n||void 0===n||n(t),t[e.index].isVisible=!0,function e(n){y.canFloodFill(t,n)&&y.getIndexes(n).forEach((function(n){var i=t[n],c=i.isMined,a=i.isVisible,o=i.isFlagged;c||a||o||(i.isVisible=!0,e(i))}))}(e)}))},S=function(e){return Object(M.a)(b,(function(n){e(n),n.forEach((function(e){var n=e.isMined,t=e.isBusted,i=e.isFlagged;!n&&i?e.isWrong=!0:!n||t||i||(e.isVisible=!0)}))}))},E=B((function(e){var n=e.index,t=e.isFlagged;f(Object(M.a)(b,(function(e){e[n].isFlagged=!t}))),w(Object(M.a)(x,(function(e){e.hiddenMinesCount+=t?1:-1})))})),P=function(){f(r),w(j)};return F(P,r),F((function(){b.some((function(e){return e.isBusted}))?w(Object(m.a)(Object(m.a)({},x),{},{isBusted:!0})):b.some((function(e){var n=e.isMined,t=e.isVisible;return!(n||t)}))||(f(Object(M.a)(b,(function(e){e.forEach((function(e){e.isMined&&(e.isFlagged=!0)}))}))),w(Object(m.a)(Object(m.a)({},x),{},{isSolved:!0,hiddenMinesCount:0})))}),b),{mineField:b,mineFieldParams:t,mineFieldStatus:x,setMineFieldParams:i,setup:function(e){f(N(e,(function(n){for(var t=Object(C.a)(Object(k.a)(l),[e.index].concat(Object(O.a)(y.getIndexes(e)))),i=new Set;i.size<s;)i.add(t[Math.floor(Math.random()*t.length)]);i.forEach((function(e){n[e].isMined=!0})),n.forEach((function(e){e.isMined||(e.value=y.countMined(n,e))}))}))),w(Object(m.a)(Object(m.a)({},x),{},{isSetup:!0}))},openCell:function(e){var n=e.index,t=e.isMined;f(t?S((function(e){e[n].isBusted=!0})):N(e))},toggleFlag:E,openNeighbors:function(e){y.canFloodFill(b,e)?f(N(e)):y.canOpen(b,e)&&f(S((function(n){y.getIndexes(e).forEach((function(e){var t=n[e],i=t.isMined,c=t.isFlagged;i&&!c?t.isBusted=!0:i||c||(t.isVisible=!0)}))})))},reset:P}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"000".concat(e).slice(-3)},D=function(e){var n=e.count;return Object(s.jsx)("div",{children:V(n)})},L=Object(c.memo)(D),z=t(31),A=t.n(z),J=function(e){var n=e.frown,t=e.smile,c=e.onClick,a=Object(s.jsx)(i.a,{icon:["far","meh"]});return n&&(a=Object(s.jsx)(i.a,{icon:["far","frown"]})),t&&(a=Object(s.jsx)(i.a,{icon:["far","smile"]})),Object(s.jsx)("button",{type:"button",className:A.a.face,onClick:c,children:a})},Q=Object(c.memo)(J),R=function(e,n){var t=Object(c.useRef)();Object(c.useEffect)((function(){t.current=e})),Object(c.useEffect)((function(){if(n){var e=setInterval((function(){var e;null===(e=t.current)||void 0===e||e.call(t)}),n);return function(){clearInterval(e)}}}),[n])},T=t(32),U=t.n(T),W=function(){var e=Object(c.useContext)(_),n=e.mineFieldStatus,t=e.mineFieldParams,i=e.reset,a=n.isSetup,o=n.isSolved,l=n.isBusted,r=n.hiddenMinesCount,u=Object(c.useState)(0),d=Object(v.a)(u,2),b=d[0],f=d[1],j=B((function(){f(0),i()}));return R((function(){f(b+1)}),!a||o||l?null:1e3),F((function(){f(0)}),t),Object(s.jsxs)("div",{className:U.a.indicators,children:[Object(s.jsx)(L,{count:r}),Object(s.jsx)(Q,{frown:l,smile:o,onClick:j}),Object(s.jsx)(L,{count:b})]})},G=t(9),q=t(14),H=t.n(q),K=t(5),Y=t.n(K),Z=function(e){var n,t=e.cell,c=e.onClick,a=e.onMouseDown,o=e.onContextMenu,l=t.value,r=t.isVisible,u=t.isFlagged,d=t.isMined,b=t.isWrong,f=t.isBusted,j=H()(Y.a.cell,Y.a.visible),h=function(){null===o||void 0===o||o(t)};return d&&r||f||b?Object(s.jsx)("button",{type:"button",className:H()(j,(n={},Object(G.a)(n,Y.a.busted,f),Object(G.a)(n,Y.a.wrong,b),n)),children:Object(s.jsx)(i.a,{icon:["fas","bomb"]})}):u?Object(s.jsx)("button",{type:"button",className:Y.a.cell,onContextMenu:h,children:Object(s.jsx)(i.a,{icon:["far","flag"]})}):r?l?Object(s.jsx)("button",{type:"button",className:H()(j,Y.a["value_".concat(l)]),onMouseDown:function(e){null===a||void 0===a||a(e,t)},children:l}):Object(s.jsx)("button",{type:"button","aria-label":"cell",className:j}):Object(s.jsx)("button",{type:"button","aria-label":"cell",className:Y.a.cell,onClick:function(){null===c||void 0===c||c(t)},onContextMenu:h})},X=Object(c.memo)(Z),$=t(11),ee=t.n($),ne=function(){var e=Object(c.useContext)(_),n=e.mineFieldParams,t=(n=void 0===n?{}:n).width,i=void 0===t?0:t,a=e.mineField,o=void 0===a?[]:a,l=e.mineFieldStatus,r=(l=void 0===l?{}:l).isSetup,u=l.isBusted,d=l.isSolved,b=e.setup,f=e.openCell,j=e.toggleFlag,h=e.openNeighbors,m=B((function(e){(r?f:b)(e)})),O=B((function(e,n){var t=e.target,i=e.nativeEvent;t.addEventListener("mouseup",(function e(c){i.which!==c.which&&h(n),t.removeEventListener("mouseup",e)}))}));return Object(s.jsx)("div",{"data-testid":ee.a.mine_field,className:ee.a.mine_field,onContextMenu:function(e){e.preventDefault()},children:Object(s.jsx)("div",{"data-testid":ee.a.row,className:H()(ee.a.row,ee.a["row_".concat(i)],Object(G.a)({},ee.a.disabled,u||d)),style:{width:i*Number.parseFloat(Y.a.cellSize)},children:o.map((function(e){return Object(s.jsx)(X,{cell:e,onClick:m,onMouseDown:O,onContextMenu:j},e.id)}))})})},te=t(26),ie=t.n(te),ce=function(e){var n=e.name,t=e.label,i=e.checked,c=e.onChange;return Object(s.jsxs)("div",{className:ie.a.radio,children:[Object(s.jsx)("input",{type:"radio",name:n,className:ie.a.input,defaultChecked:i,onChange:c}),Object(s.jsx)("span",{className:ie.a.label,children:t})]})},ae=Object(c.memo)(ce),oe=t(33),se=t.n(oe),le=function(){var e=Object(c.useContext)(_),n=e.mineFieldParams,t=e.setMineFieldParams,i=function(e){return Object(c.useCallback)((function(){t(e)}),[])};return Object(s.jsx)("form",{className:se.a.mine_field_params,children:w.map((function(e){var t=e.label,c=e.id;return Object(s.jsx)(ae,{name:"mine-field-params",label:t,checked:t===n.label,onChange:i(e)},c)}))})},re=t(34),ue=t.n(re),de=function(){return Object(s.jsxs)(h,{value:P(),children:[Object(s.jsx)(f,{}),Object(s.jsxs)("main",{className:ue.a.minesweeper,children:[Object(s.jsx)(W,{}),Object(s.jsx)(ne,{}),Object(s.jsx)(le,{})]}),Object(s.jsx)(r,{})]})},be=t(35),fe=t(10),je=t(36),he=t(18),_e=t(37);(function(){fe.b.add(je.a,_e.a,he.a,he.c,he.b,he.d)})(),Object(be.render)(Object(s.jsx)(c.StrictMode,{children:Object(s.jsx)(de,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.64bda6b6.chunk.js.map