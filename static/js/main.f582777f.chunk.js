(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{20:function(e,n,t){},21:function(e,n,t){},22:function(e,n,t){},30:function(e,n,t){},31:function(e,n,t){},32:function(e,n,t){},33:function(e,n,t){},34:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);t(20);var i,c,o,r,s,u,a=t(3),l=(t(21),t(8)),d=(t(22),t(41)),f=function(e){return Object(a.a)(Object(a.a)({},e),{},{uuid:Object(d.a)()})};!function(e){e[e.SM=9]="SM",e[e.MD=16]="MD",e[e.BG=30]="BG"}(i||(i={})),function(e){e[e.SM=9]="SM",e[e.MD=16]="MD",e[e.BG=16]="BG"}(c||(c={})),function(e){e[e.SM=10]="SM",e[e.MD=40]="MD",e[e.BG=99]="BG"}(o||(o={})),function(e){e[e.SM=0]="SM",e[e.MD=1]="MD",e[e.BG=2]="BG"}(r||(r={})),function(e){e[e.Empty=0]="Empty",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Mine=9]="Mine",e[e.Incorrect=10]="Incorrect",e[e.Busted=11]="Busted"}(s||(s={})),function(e){e[e.Hidden=0]="Hidden",e[e.Visible=1]="Visible",e[e.Flagged=2]="Flagged"}(u||(u={}));var j=f({name:"Beginner",rowsCount:i.SM,columnsCount:c.SM,minesCount:o.SM}),b=(new Map).set(r.SM,j).set(r.MD,f({name:"Intermediate",rowsCount:i.MD,columnsCount:c.MD,minesCount:o.MD})).set(r.BG,f({name:"Expert",rowsCount:i.BG,columnsCount:c.BG,minesCount:o.BG})),m=t(1),h=Object(m.createContext)({mineFieldsProps:b,mineField:[],mineFieldProps:j,mineFieldStatus:{isSetup:!1,isBusted:!1,isSolved:!1,hiddenMinesCount:0},setMineFieldProps:function(){},setupMineField:function(){},revealCell:function(){},toggleFlag:function(){},revealNeighbors:function(){},reset:function(){}}),v=h.Provider,O=function(e){for(var n=Object(m.useRef)(!1),t=arguments.length,i=new Array(t>1?t-1:0),c=1;c<t;c++)i[c-1]=arguments[c];Object(m.useEffect)((function(){n.current?e():n.current=!0}),i)},M=function(e){return e<1?"000":e<10?"00".concat(e):e<100?"0".concat(e):e.toString()},g=t(4),p=t(0),x=function(e){var n=e.classNamePrefix,t=e.isSolved,i=e.isBusted,c=e.onClick,o=Object(p.jsx)(g.a,{icon:["far","meh"]});return t&&(o=Object(p.jsx)(g.a,{icon:["far","smile"]})),i&&(o=Object(p.jsx)(g.a,{icon:["far","frown"]})),Object(p.jsx)("div",{className:"".concat(n,"ResetIcon"),onClick:c,children:o})},F=function(){var e,n,t=Object(m.useContext)(h),i=t.mineFieldStatus,c=i.isSetup,o=i.isSolved,r=i.isBusted,s=i.hiddenMinesCount,u=t.mineFieldProps,a=t.reset,d=Object(m.useState)(0),f=Object(l.a)(d,2),j=f[0],b=f[1],v="Controls",g=Object(m.useCallback)((function(){b((function(e){return e+1}))}),[]);return e=g,n=!c||o||r?void 0:1e3,Object(m.useEffect)((function(){if(n){var t=setInterval((function(){e()}),n);return function(){clearInterval(t)}}}),[n]),O((function(){b(0)}),u),Object(p.jsxs)("div",{className:v,children:[Object(p.jsx)("div",{children:M(s)}),Object(p.jsx)(x,{isSolved:o,isBusted:r,classNamePrefix:v,onClick:function(){b(0),a()}}),Object(p.jsx)("div",{children:M(j)})]})},C=(t(30),function(){var e="Footer";return Object(p.jsx)("footer",{className:e,children:Object(p.jsxs)("span",{children:["Powered by",Object(p.jsx)("a",{className:"".concat(e,"Link"),href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(g.a,{icon:["fab","github"]})}),"\xa9",Object(p.jsx)("span",{children:(new Date).getFullYear()})]})})}),w=(t(31),function(){var e="Header";return Object(p.jsxs)("header",{className:e,children:[Object(p.jsx)("span",{className:"".concat(e,"Title"),children:"Minesweeper"}),Object(p.jsx)("a",{className:"".concat(e,"Link"),href:"https://github.com/FakeMetalFan/minesweeper",target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)(g.a,{icon:["fab","github"]})})]})}),S=(t(32),t(5)),k=t(6),y=function(){function e(n){Object(S.a)(this,e),this.mineFieldRowsCount=n}return Object(k.a)(e,[{key:"to2D",value:function(e){var n=e%this.mineFieldRowsCount;return{rowIndex:n,columnIndex:(e-n)/this.mineFieldRowsCount}}},{key:"to1D",value:function(e,n){return n*this.mineFieldRowsCount+e}}]),e}(),B=(t(33),function(){function e(n){Object(S.a)(this,e),this.cell=n}return Object(k.a)(e,[{key:"checkCell",value:function(e,n){return this.cell[e]===n}},{key:"isEmpty",get:function(){return this.checkCell("value",s.Empty)}},{key:"isMined",get:function(){return this.checkCell("value",s.Mine)}},{key:"isIncorrect",get:function(){return this.checkCell("value",s.Incorrect)}},{key:"isBusted",get:function(){return this.checkCell("value",s.Busted)}},{key:"isHidden",get:function(){return this.checkCell("appearance",u.Hidden)}},{key:"isFlagged",get:function(){return this.checkCell("appearance",u.Flagged)}},{key:"isUnsolved",get:function(){return this.isMined&&!this.isFlagged}},{key:"isSolvedWrong",get:function(){return!this.isMined&&this.isFlagged}}]),e}()),N=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.join(" ").trim()},I="Cell",D=function(e){var n=e.classNameModifier,t=e.classNameSuffix;return Object(p.jsx)("td",{className:N(I,n?"".concat(I).concat(n):"",t),children:Object(p.jsx)(g.a,{icon:["fas","bomb"]})})},E=function(e){var n=e.borderRight,t=e.borderBottom,i=e.value,c=e.onClick,o=e.onMouseDown,r=e.onContextMenu,s=new B(e),u=s.isHidden,a=s.isEmpty,l=s.isFlagged,d=s.isMined,f=s.isIncorrect,j=s.isBusted,b=N(n?"Cell__border-right":"",t?"Cell__border-bottom":"");return u?Object(p.jsx)("td",{className:N(I,b),onClick:c,onContextMenu:r}):l?Object(p.jsx)("td",{className:N(I,b),onContextMenu:r,children:Object(p.jsx)(g.a,{icon:["far","flag"]})}):a?Object(p.jsx)("td",{className:N(I,"".concat(I,"__empty"),b)}):d?Object(p.jsx)(D,{classNameSuffix:b}):f?Object(p.jsx)(D,{classNameModifier:"__incorrect",classNameSuffix:b}):j?Object(p.jsx)(D,{classNameModifier:"__busted",classNameSuffix:b}):Object(p.jsx)("td",{className:N(I,"".concat(I,"__").concat(i),b),onMouseDown:o,children:i})},P=Object(m.memo)(E),_=function(){var e=Object(m.useContext)(h),n=e.mineFieldProps,t=n.rowsCount,i=n.columnsCount,c=e.mineField,o=e.mineFieldStatus,r=o.isSetup,s=o.isBusted,u=o.isSolved,l=e.setupMineField,d=e.revealCell,f=e.toggleFlag,j=e.revealNeighbors,b=Object(m.useMemo)((function(){return new y(t)}),[t]),v="MineField",O="".concat(v,"Row");return Object(p.jsx)("table",{className:v,style:{width:32*t},onContextMenu:function(e){e.preventDefault()},children:Object(p.jsx)("tbody",{children:Object(p.jsx)("tr",{className:s||u?"".concat(O," ").concat(O,"__disabled"):void 0,children:c.map((function(e,n){var c=b.to2D(n),o=c.rowIndex,s=c.columnIndex;return Object(m.createElement)(P,Object(a.a)(Object(a.a)({},e),{},{borderRight:o===t-1,borderBottom:s===i-1,onClick:function(){!function(e){(r?d:l)(e)}(n)},onMouseDown:function(e){!function(e,n){var t=e.target,i=e.nativeEvent;t.addEventListener("mouseup",(function e(c){i.which!==c.which&&j(n),t.removeEventListener("mouseup",e)}))}(e,n)},onContextMenu:function(){!function(e){f(e)}(n)},key:e.uuid}))}))})})})},R=(t(34),function(){var e=Object(m.useContext)(h),n=e.mineFieldsProps,t=e.mineFieldProps,i=e.setMineFieldProps,c=Object(m.useMemo)((function(){return Array.from(n.values())}),[n]),o="MineFieldProps";return Object(p.jsx)("form",{className:o,children:c.map((function(e){var n=e.uuid,c=e.name;return Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"radio",name:"mineFieldProp",className:"".concat(o,"RadioButton"),defaultChecked:c===t.name,onChange:function(){i(e)}}),"\xa0",c]},n)}))})}),G=t(19),H=t(9),V=t(11),U=function(){function e(n){Object(S.a)(this,e),this.mineField=n}return Object(k.a)(e,[{key:"isBusted",value:function(){return this.mineField.some((function(e){return new B(e).isBusted}))}},{key:"isSolved",value:function(){return!V.reject(this.mineField,(function(e){return new B(e).isMined})).some((function(e){return new B(e).isHidden}))}}]),e}(),T=function(e,n){return e>-1&&e<n},A=function(){function e(n,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new y(n);Object(S.a)(this,e),this.mineFieldRowsCount=n,this.mineFieldColumnsCount=t,this.indexUtils=i}return Object(k.a)(e,[{key:"getIndexes",value:function(e){for(var n=[],t=this.indexUtils.to2D(e),i=t.rowIndex,c=t.columnIndex,o=-1;o<2;o+=1)for(var r=-1;r<2;r+=1)if(o||r){var s=i+o,u=c+r;T(s,this.mineFieldRowsCount)&&T(u,this.mineFieldColumnsCount)&&n.push(this.indexUtils.to1D(s,u))}return n}},{key:"canFloodFill",value:function(e,n){return!this.getIndexes(n).some((function(n){return new B(e[n]).isUnsolved}))}},{key:"canReveal",value:function(e,n){return this.countMined(e,n)===this.countBy(e,n,(function(e){return new B(e).isFlagged}))}},{key:"countMined",value:function(e,n){return this.countBy(e,n,(function(e){return new B(e).isMined}))}},{key:"countBy",value:function(e,n,t){return this.getIndexes(n).reduce((function(n,i){return t(e[i])?n+1:n}),0)}}]),e}(),L=function(){var e=function(e){var n=Object(m.useState)(e),t=Object(l.a)(n,2),i=t[0],c=t[1],o=i.rowsCount,r=i.columnsCount,d=i.minesCount,j=o*r,b=Object(m.useMemo)((function(){return Array.from({length:j},(function(){return f({value:s.Empty,appearance:u.Hidden})}))}),[j]),h=Object(m.useMemo)((function(){return{isSetup:!1,isBusted:!1,isSolved:!1,hiddenMinesCount:d}}),[d]),v=Object(m.useMemo)((function(){return new A(o,r)}),[o,r]),M=Object(m.useState)(b),g=Object(l.a)(M,2),p=g[0],x=g[1],F=Object(m.useState)(h),C=Object(l.a)(F,2),w=C[0],S=C[1],k=function(e,n,t){return Object(H.a)(e,(function(e){null===t||void 0===t||t(e),e[n].appearance=u.Visible,function n(t){v.canFloodFill(e,t)&&v.getIndexes(t).forEach((function(t){var i=e[t],c=new B(i),o=c.isMined,r=c.isHidden,s=c.isFlagged;o||!r||s||(i.appearance=u.Visible,n(t))}))}(n)}))},y=function(e,n){return Object(H.a)(e,(function(e){n(e),e.forEach((function(n,t){var i=new B(n),c=i.isUnsolved,o=i.isSolvedWrong;c?n.appearance=u.Visible:o&&(e[t]=Object(a.a)(Object(a.a)({},n),{},{value:s.Incorrect,appearance:u.Visible}))}))}))},N=function(){x(b),S(h)};return O((function(){N()}),b),O((function(){var e=new U(p);e.isBusted()?S((function(e){return Object(a.a)(Object(a.a)({},e),{},{isBusted:!0})})):e.isSolved()&&(x((function(e){return Object(H.a)(e,(function(e){e.forEach((function(e){new B(e).isMined&&(e.appearance=u.Flagged)}))}))})),S((function(e){return Object(a.a)(Object(a.a)({},e),{},{isSolved:!0,hiddenMinesCount:0})})))}),p),{mineField:p,mineFieldProps:i,mineFieldStatus:w,setMineFieldProps:c,setupMineField:function(e){x((function(n){return k(n,e,(function(n){for(var t=V.difference(V.range(j),[e].concat(Object(G.a)(v.getIndexes(e)))),i=new Set;i.size<d;)i.add(t[Math.floor(Math.random()*t.length)]);i.forEach((function(e){n[e].value=s.Mine})),n.forEach((function(e,t){new B(e).isMined||(e.value=v.countMined(n,t))}))}))})),S((function(e){return Object(a.a)(Object(a.a)({},e),{},{isSetup:!0})}))},revealCell:function(e){x((function(n){var t=n[e];return new B(t).isMined?y(n,(function(n){n[e]=Object(a.a)(Object(a.a)({},t),{},{value:s.Busted,appearance:u.Visible})})):k(n,e)}))},toggleFlag:function(e){var n=new B(p[e]).isFlagged;x((function(t){return Object(H.a)(t,(function(t){t[e].appearance=n?u.Hidden:u.Flagged}))})),S((function(e){return Object(H.a)(e,(function(e){e.hiddenMinesCount+=n?1:-1}))}))},revealNeighbors:function(e){x((function(n){return v.canFloodFill(n,e)?k(n,e):v.canReveal(n,e)?y(n,(function(n){v.getIndexes(e).forEach((function(e){var t=n[e],i=new B(t),c=i.isUnsolved,o=i.isSolvedWrong;c?t.value=s.Busted:o&&(t.value=s.Incorrect),t.appearance=u.Visible}))})):n}))},reset:N}}(j);return Object(p.jsxs)(v,{value:Object(a.a)(Object(a.a)({},e),{},{mineFieldsProps:b}),children:[Object(p.jsx)(w,{}),Object(p.jsxs)("main",{className:"Minesweeper",children:[Object(p.jsx)(F,{}),Object(p.jsx)(_,{}),Object(p.jsx)(R,{})]}),Object(p.jsx)(C,{})]})},W=function(){return Object(p.jsx)(L,{})},J=t(16),z=t(7),Y=t(17),q=t(12),K=t(18);z.b.add(Y.a,K.a,q.a,q.c,q.b,q.d),Object(J.render)(Object(p.jsx)(m.StrictMode,{children:Object(p.jsx)(W,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.f582777f.chunk.js.map