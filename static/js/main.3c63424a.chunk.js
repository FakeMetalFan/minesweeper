(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{20:function(e,n,t){},21:function(e,n,t){},22:function(e,n,t){},30:function(e,n,t){},31:function(e,n,t){},32:function(e,n,t){},33:function(e,n,t){},34:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);t(20);var i,c,o,s,u,r,a=t(3),l=(t(21),t(8)),d=(t(22),t(41)),f=function(e){return Object(a.a)(Object(a.a)({},e),{},{uuid:Object(d.a)()})};!function(e){e[e.SM=9]="SM",e[e.MD=16]="MD",e[e.BG=30]="BG"}(i||(i={})),function(e){e[e.SM=9]="SM",e[e.MD=16]="MD",e[e.BG=16]="BG"}(c||(c={})),function(e){e[e.SM=10]="SM",e[e.MD=40]="MD",e[e.BG=99]="BG"}(o||(o={})),function(e){e[e.SM=0]="SM",e[e.MD=1]="MD",e[e.BG=2]="BG"}(s||(s={})),function(e){e[e.Empty=0]="Empty",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Mine=9]="Mine",e[e.Incorrect=10]="Incorrect",e[e.Busted=11]="Busted"}(u||(u={})),function(e){e[e.Hidden=0]="Hidden",e[e.Visible=1]="Visible",e[e.Flagged=2]="Flagged"}(r||(r={}));var j=f({name:"Beginner",rowsCount:i.SM,columnsCount:c.SM,minesCount:o.SM}),b=(new Map).set(s.SM,j).set(s.MD,f({name:"Intermediate",rowsCount:i.MD,columnsCount:c.MD,minesCount:o.MD})).set(s.BG,f({name:"Expert",rowsCount:i.BG,columnsCount:c.BG,minesCount:o.BG})),h=t(1),m=Object(h.createContext)({mineFieldsProps:b,mineField:[],mineFieldProps:j,mineFieldStatus:{isSetup:!1,isBusted:!1,isSolved:!1,hiddenMinesCount:0},setMineFieldProps:function(){},setupMineField:function(){},revealCell:function(){},toggleFlag:function(){},revealNeighbors:function(){},reset:function(){}}),O=m.Provider,v=function(e){for(var n=Object(h.useRef)(!1),t=arguments.length,i=new Array(t>1?t-1:0),c=1;c<t;c++)i[c-1]=arguments[c];Object(h.useEffect)((function(){n.current?e():n.current=!0}),i)},x=function(e){return e<1?"000":e<10?"00".concat(e):e<100?"0".concat(e):e.toString()},M=t(4),g=t(0),p=function(e){var n=e.classNamePrefix,t=e.isSolved,i=e.isBusted,c=e.onClick,o=Object(g.jsx)(M.a,{icon:["far","meh"]});return t&&(o=Object(g.jsx)(M.a,{icon:["far","smile"]})),i&&(o=Object(g.jsx)(M.a,{icon:["far","frown"]})),Object(g.jsx)("div",{className:"".concat(n,"ResetIcon"),onClick:c,children:o})},C=function(){var e,n,t=Object(h.useContext)(m),i=t.mineFieldStatus,c=i.isSetup,o=i.isSolved,s=i.isBusted,u=i.hiddenMinesCount,r=t.mineFieldProps,a=t.reset,d=Object(h.useState)(0),f=Object(l.a)(d,2),j=f[0],b=f[1],O="Controls",M=Object(h.useCallback)((function(){b((function(e){return e+1}))}),[]);return e=M,n=!c||o||s?void 0:1e3,Object(h.useEffect)((function(){if(n){var t=setInterval((function(){e()}),n);return function(){clearInterval(t)}}}),[n]),v((function(){b(0)}),r),Object(g.jsxs)("div",{className:O,children:[Object(g.jsx)("div",{children:x(u)}),Object(g.jsx)(p,{isSolved:o,isBusted:s,classNamePrefix:O,onClick:function(){b(0),a()}}),Object(g.jsx)("div",{children:x(j)})]})},F=(t(30),function(){var e="Footer";return Object(g.jsx)("footer",{className:e,children:Object(g.jsxs)("span",{children:["Powered by",Object(g.jsx)("a",{className:"".concat(e,"Link"),href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer",children:Object(g.jsx)(M.a,{icon:["fab","github"]})}),"\xa9",Object(g.jsx)("span",{children:(new Date).getFullYear()})]})})}),w=(t(31),function(){var e="Header";return Object(g.jsxs)("header",{className:e,children:[Object(g.jsx)("span",{className:"".concat(e,"Title"),children:"Minesweeper"}),Object(g.jsx)("a",{className:"".concat(e,"Link"),href:"https://github.com/FakeMetalFan/minesweeper",target:"_blank",rel:"noopener noreferrer",children:Object(g.jsx)(M.a,{icon:["fab","github"]})})]})}),k=(t(32),t(5)),S=t(6),B=function(){function e(n){Object(k.a)(this,e),this.mineFieldRowsCount=n}return Object(S.a)(e,[{key:"to2D",value:function(e){var n=e%this.mineFieldRowsCount;return{rowIndex:n,columnIndex:(e-n)/this.mineFieldRowsCount}}},{key:"to1D",value:function(e,n){return n*this.mineFieldRowsCount+e}}]),e}(),y=(t(33),function(){function e(n){Object(k.a)(this,e),this.cell=n}return Object(S.a)(e,[{key:"checkCell",value:function(e,n){return this.cell[e]===n}},{key:"isEmpty",get:function(){return this.checkCell("value",u.Empty)}},{key:"isMined",get:function(){return this.checkCell("value",u.Mine)}},{key:"isIncorrect",get:function(){return this.checkCell("value",u.Incorrect)}},{key:"isBusted",get:function(){return this.checkCell("value",u.Busted)}},{key:"isHidden",get:function(){return this.checkCell("appearance",r.Hidden)}},{key:"isFlagged",get:function(){return this.checkCell("appearance",r.Flagged)}},{key:"isUnsolved",get:function(){return this.isMined&&!this.isFlagged}},{key:"isSolvedWrong",get:function(){return!this.isMined&&this.isFlagged}}]),e}()),N=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.join(" ").trim()},I="Cell",D=function(e){var n=e.classNameModifier,t=e.classNameSuffix;return Object(g.jsx)("td",{className:N(I,n?"".concat(I).concat(n):"",t),children:Object(g.jsx)(M.a,{icon:["fas","bomb"]})})},E=function(e){var n=e.vm,t=e.withBorderRight,i=e.withBorderBottom,c=e.onClick,o=e.onMouseDown,s=e.onContextMenu,u=n.value,r=new y(n),a=r.isHidden,l=r.isEmpty,d=r.isFlagged,f=r.isMined,j=r.isIncorrect,b=r.isBusted,h=N(t?"Cell__border-right":"",i?"Cell__border-bottom":""),m=function(){s(n)};return a?Object(g.jsx)("td",{className:N(I,h),onClick:function(){c(n)},onContextMenu:m}):d?Object(g.jsx)("td",{className:N(I,h),onContextMenu:m,children:Object(g.jsx)(M.a,{icon:["far","flag"]})}):l?Object(g.jsx)("td",{className:N(I,"".concat(I,"__empty"),h)}):f?Object(g.jsx)(D,{classNameSuffix:h}):j?Object(g.jsx)(D,{classNameModifier:"__incorrect",classNameSuffix:h}):b?Object(g.jsx)(D,{classNameModifier:"__busted",classNameSuffix:h}):Object(g.jsx)("td",{className:N(I,"".concat(I,"__").concat(u),h),onMouseDown:function(e){o(e,n)},children:u})},P=Object(h.memo)(E),_=function(){var e=Object(h.useContext)(m),n=e.mineFieldProps,t=n.rowsCount,i=n.columnsCount,c=e.mineField,o=e.mineFieldStatus,s=o.isSetup,u=o.isBusted,r=o.isSolved,a=e.setupMineField,l=e.revealCell,d=e.toggleFlag,f=e.revealNeighbors,j=Object(h.useMemo)((function(){return new B(t)}),[t]),b="MineField",O="".concat(b,"Row"),v=Object(h.useCallback)((function(e){(s?l:a)(e)}),[s,l,a]),x=Object(h.useCallback)((function(e,n){var t=e.target,i=e.nativeEvent;t.addEventListener("mouseup",(function e(c){i.which!==c.which&&f(n),t.removeEventListener("mouseup",e)}))}),[f]),M=Object(h.useCallback)((function(e){d(e)}),[d]);return Object(g.jsx)("table",{className:b,style:{width:32*t},onContextMenu:function(e){e.preventDefault()},children:Object(g.jsx)("tbody",{children:Object(g.jsx)("tr",{className:u||r?"".concat(O," ").concat(O,"__disabled"):void 0,children:c.map((function(e,n){var c=j.to2D(n),o=c.rowIndex,s=c.columnIndex;return Object(g.jsx)(P,{vm:e,withBorderRight:o===t-1,withBorderBottom:s===i-1,onClick:v,onMouseDown:x,onContextMenu:M},e.uuid)}))})})})},R=(t(34),function(){var e=Object(h.useContext)(m),n=e.mineFieldsProps,t=e.mineFieldProps,i=e.setMineFieldProps,c=Object(h.useMemo)((function(){return Array.from(n.values())}),[n]),o="MineFieldProps";return Object(g.jsx)("form",{className:o,children:c.map((function(e){var n=e.uuid,c=e.name;return Object(g.jsxs)("div",{children:[Object(g.jsx)("input",{type:"radio",name:"mineFieldProp",className:"".concat(o,"RadioButton"),defaultChecked:c===t.name,onChange:function(){i(e)}}),"\xa0",c]},n)}))})}),G=t(19),H=t(9),V=t(11),U=function(){function e(n){Object(k.a)(this,e),this.mineField=n}return Object(S.a)(e,[{key:"isBusted",value:function(){return this.mineField.some((function(e){return new y(e).isBusted}))}},{key:"isSolved",value:function(){return!V.reject(this.mineField,(function(e){return new y(e).isMined})).some((function(e){return new y(e).isHidden}))}}]),e}(),T=function(e,n){return e>-1&&e<n},A=function(){function e(n,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new B(n);Object(k.a)(this,e),this.mineFieldRowsCount=n,this.mineFieldColumnsCount=t,this.indexUtils=i}return Object(S.a)(e,[{key:"getIndexes",value:function(e){for(var n=e.index,t=[],i=this.indexUtils.to2D(n),c=i.rowIndex,o=i.columnIndex,s=-1;s<2;s+=1)for(var u=-1;u<2;u+=1)if(s||u){var r=c+s,a=o+u;T(r,this.mineFieldRowsCount)&&T(a,this.mineFieldColumnsCount)&&t.push(this.indexUtils.to1D(r,a))}return t}},{key:"canFloodFill",value:function(e,n){return!this.getIndexes(n).some((function(n){return new y(e[n]).isUnsolved}))}},{key:"canReveal",value:function(e,n){return this.countMined(e,n)===this.countBy(e,n,(function(e){return new y(e).isFlagged}))}},{key:"countMined",value:function(e,n){return this.countBy(e,n,(function(e){return new y(e).isMined}))}},{key:"countBy",value:function(e,n,t){return this.getIndexes(n).reduce((function(n,i){return t(e[i])?n+1:n}),0)}}]),e}(),L=function(){var e=function(e){var n=Object(h.useState)(e),t=Object(l.a)(n,2),i=t[0],c=t[1],o=i.rowsCount,s=i.columnsCount,d=i.minesCount,j=o*s,b=Object(h.useMemo)((function(){return Array.from({length:j},(function(e,n){return f({index:n,value:u.Empty,appearance:r.Hidden})}))}),[j]),m=Object(h.useMemo)((function(){return{isSetup:!1,isBusted:!1,isSolved:!1,hiddenMinesCount:d}}),[d]),O=Object(h.useMemo)((function(){return new A(o,s)}),[o,s]),x=Object(h.useState)(b),M=Object(l.a)(x,2),g=M[0],p=M[1],C=Object(h.useState)(m),F=Object(l.a)(C,2),w=F[0],k=F[1],S=Object(h.useCallback)((function(e,n,t){return Object(H.a)(e,(function(e){null===t||void 0===t||t(e),e[n.index].appearance=r.Visible,function n(t){O.canFloodFill(e,t)&&O.getIndexes(t).forEach((function(t){var i=e[t],c=new y(i),o=c.isMined,s=c.isHidden,u=c.isFlagged;o||!s||u||(i.appearance=r.Visible,n(i))}))}(n)}))}),[O]),B=Object(h.useCallback)((function(e,n){return Object(H.a)(e,(function(e){n(e),e.forEach((function(n,t){var i=new y(n),c=i.isUnsolved,o=i.isSolvedWrong;c?n.appearance=r.Visible:o&&(e[t]=Object(a.a)(Object(a.a)({},n),{},{value:u.Incorrect,appearance:r.Visible}))}))}))}),[]),N=Object(h.useCallback)((function(e){p((function(n){return S(n,e,(function(n){for(var t=V.difference(V.range(j),[e.index].concat(Object(G.a)(O.getIndexes(e)))),i=new Set;i.size<d;)i.add(t[Math.floor(Math.random()*t.length)]);i.forEach((function(e){n[e].value=u.Mine})),n.forEach((function(e){new y(e).isMined||(e.value=O.countMined(n,e))}))}))})),k((function(e){return Object(a.a)(Object(a.a)({},e),{},{isSetup:!0})}))}),[S,j,d,O]),I=Object(h.useCallback)((function(e){p((function(n){return new y(e).isMined?B(n,(function(n){n[e.index]=Object(a.a)(Object(a.a)({},e),{},{value:u.Busted,appearance:r.Visible})})):S(n,e)}))}),[B,S]),D=Object(h.useCallback)((function(e){var n=new y(e).isFlagged;p((function(t){return Object(H.a)(t,(function(t){t[e.index].appearance=n?r.Hidden:r.Flagged}))})),k((function(e){return Object(H.a)(e,(function(e){e.hiddenMinesCount+=n?1:-1}))}))}),[]),E=Object(h.useCallback)((function(e){p((function(n){return O.canFloodFill(n,e)?S(n,e):O.canReveal(n,e)?B(n,(function(n){O.getIndexes(e).forEach((function(e){var t=n[e],i=new y(t),c=i.isUnsolved,o=i.isSolvedWrong;c?t.value=u.Busted:o&&(t.value=u.Incorrect),t.appearance=r.Visible}))})):n}))}),[B,S,O]),P=Object(h.useCallback)((function(){p(b),k(m)}),[b,m]);return v((function(){P()}),b),v((function(){var e=new U(g);e.isBusted()?k((function(e){return Object(a.a)(Object(a.a)({},e),{},{isBusted:!0})})):e.isSolved()&&(p((function(e){return Object(H.a)(e,(function(e){e.forEach((function(e){new y(e).isMined&&(e.appearance=r.Flagged)}))}))})),k((function(e){return Object(a.a)(Object(a.a)({},e),{},{isSolved:!0,hiddenMinesCount:0})})))}),g),{mineField:g,mineFieldProps:i,mineFieldStatus:w,setMineFieldProps:c,setupMineField:N,revealCell:I,toggleFlag:D,revealNeighbors:E,reset:P}}(j);return Object(g.jsxs)(O,{value:Object(a.a)(Object(a.a)({},e),{},{mineFieldsProps:b}),children:[Object(g.jsx)(w,{}),Object(g.jsxs)("main",{className:"Minesweeper",children:[Object(g.jsx)(C,{}),Object(g.jsx)(_,{}),Object(g.jsx)(R,{})]}),Object(g.jsx)(F,{})]})},W=function(){return Object(g.jsx)(L,{})},J=t(16),z=t(7),Y=t(17),q=t(12),K=t(18);z.b.add(Y.a,K.a,q.a,q.c,q.b,q.d),Object(J.render)(Object(g.jsx)(h.StrictMode,{children:Object(g.jsx)(W,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.3c63424a.chunk.js.map