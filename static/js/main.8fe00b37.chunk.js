(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{126:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(55),c=n(4),l=-3,s=-2,u=-1,o=0,d={Hidden:0,Visible:1,Flagged:2},f=function(e,t,n){return e[t]===n},m=function(e){return f(e,"value",u)},h=function(e){return f(e,"state",d.Hidden)},v=function(e){return f(e,"state",d.Flagged)},b=function(e){return f(e,"value",l)},g=(n(73),Object(a.memo)((function(e){var t=e.state,n=e.cellRevealHandler,a=e.flagPlantingHandler,r=e.neighborsRevealHandler,l=t.value,u=l===s,d=b(t);return h(t)?i.a.createElement("div",{className:"cell",onClick:n,onContextMenu:a}):v(t)?i.a.createElement("div",{className:"cell",onContextMenu:a},i.a.createElement(c.a,{icon:["far","flag"]})):l===o?i.a.createElement("div",{className:"cell cell__visible"}):m(t)||u||d?i.a.createElement("div",{className:"cell ".concat(u?"cell__incorrect-guess":d?"cell__busted-mine":"")},i.a.createElement(c.a,{icon:["fas","bomb"]})):i.a.createElement("div",{className:"cell cell__visible cell__visible__".concat(l),onMouseDown:r},l)}))),E=(n(74),function(e){var t=e.width,n=e.disabled,a=e.state,r=e.cellRevealHandler,c=e.flagPlantingHandler,l=e.neighborsRevealHandler,s=function(e,t){var a=e.target,i=e.nativeEvent.which;if(!n){a.addEventListener("mouseup",(function e(n){i!==n.which&&l(t),a.removeEventListener("mouseup",e)}))}};return i.a.createElement("div",{className:"field".concat(n?" disabled":""),style:{gridTemplateColumns:"repeat(".concat(t,", 1fr)")},onContextMenu:function(e){e.preventDefault()}},a.map((function(e,t){return i.a.createElement(g,{key:t,state:e,cellRevealHandler:function(){!n&&r(e,t)},flagPlantingHandler:function(){!n&&c(e,t)},neighborsRevealHandler:function(e){s(e,t)}})})))}),p=(n(75),function(){return i.a.createElement("footer",null,i.a.createElement("span",null,"Powered by",i.a.createElement("a",{href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer"},i.a.createElement(c.a,{icon:["fab","github"]})),"\xa9",i.a.createElement("span",null,(new Date).getFullYear())))}),y=(n(76),function(){return i.a.createElement("header",null,i.a.createElement("span",{className:"title"},"Minesweeper"),i.a.createElement("a",{href:"https://github.com/FakeMetalFan/minesweeper",target:"_blank",rel:"noopener noreferrer"},i.a.createElement(c.a,{icon:["fab","github"]})))}),_=n(5),j=n(61),O=n(7),C=n(56),k=n.n(C),w=n(57),F=n.n(w),H=n(24),M=n(25),A=function(){function e(t){Object(H.a)(this,e),this._fieldWidth=t}return Object(M.a)(e,[{key:"to2DAddresses",value:function(e){var t=e%this._fieldWidth;return[t,(e-t)/this._fieldWidth]}},{key:"to1DAddress",value:function(e,t){return t*this._fieldWidth+e}}]),e}(),N=function(){function e(t,n){Object(H.a)(this,e),this._fieldWidth=t,this._fieldHeight=n,this._cellAddressUtils=new A(t)}return Object(M.a)(e,[{key:"canFloodFill",value:function(e,t){return!this.getAddresses(t).some((function(t){var n=e[t];return m(n)&&!v(n)}))}},{key:"getAddresses",value:function(e){for(var t=this._cellAddressUtils.to2DAddresses(e),n=Object(_.a)(t,2),a=n[0],i=n[1],r=[],c=-1;c<2;c++)for(var l=-1;l<2;l++)if(c||l){var s=a+c,u=i+l;this._doesAddressExist(s,this._fieldWidth)&&this._doesAddressExist(u,this._fieldHeight)&&r.push(this._cellAddressUtils.to1DAddress(s,u))}return r}},{key:"getMinedCount",value:function(e,t){return this._getCountBy(e,t,m)}},{key:"canRevealNeighbors",value:function(e,t){return this.getMinedCount(e,t)===this._getCountBy(e,t,v)}},{key:"_getCountBy",value:function(e,t,n){return this.getAddresses(t).reduce((function(t,a){return n(e[a])?t+1:t}),0)}},{key:"_doesAddressExist",value:function(e,t){return-1<e&&e<t}}]),e}(),R=(n(126),function(e){var t=e.minesCount,n=e.smileyFaceClickHandler,r=e.shouldStartCountingSeconds,l=e.isBust,s=e.isVictory,u=Object(a.useState)(0),o=Object(_.a)(u,2),d=o[0],f=o[1],m=function(e){return e<1?"000":e<10?"00".concat(e):e<100?"0".concat(e):"".concat(e)};return function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(t){var e=setInterval((function(){n.current()}),t);return function(){clearInterval(e)}}}),[t])}((function(){f(d+1)}),r?1e3:null),i.a.createElement("div",{className:"indicators"},i.a.createElement("div",{className:"mines-count"},m(t)),i.a.createElement("div",{className:"smiley-face",onClick:function(){f(0),n()}},i.a.createElement(c.a,{icon:["far",s?"smile":l?"frown":"meh"]})),i.a.createElement("div",{className:"timer"},m(d)))}),V=n(62),B=n(58),D=n.n(B),S=(n(181),"init"),x="hidden-mines-count-update",I="reset",W="bust",P="victory",U=function(e,t){var n=t.type,a=t.payload;return n===I?Object(V.a)({},a):Object(O.a)(e,(function(e){switch(n){case S:e.isInit=!0;break;case x:e.hiddenMinesCount+=a;break;case W:e.isBust=!0;break;case P:e.hiddenMinesCount=0,e.isVictory=!0}}))},J=function(e){var t=e.minesCount,n=e.fieldDimension,r={hiddenMinesCount:t,isInit:!1,isBust:!1,isVictory:!1},c=Object(a.useReducer)(U,r),f=Object(_.a)(c,2),g=f[0],p=g.hiddenMinesCount,y=g.isInit,C=g.isBust,w=g.isVictory,H=f[1],M=function(e){var t=e.width,n=e.height,i=e.minesCount,r=t*n,c=Object(a.useMemo)((function(){return new N(t,n)}),[r]),f=Object(a.useMemo)((function(){return Array(r).fill({value:o,state:d.Hidden})}),[r]),b=Object(a.useState)(f),g=Object(_.a)(b,2),E=g[0],p=g[1],y=function(e,t){return Object(O.a)(E,(function(n){null===t||void 0===t||t(n),n[e].state=d.Visible;!function e(t){c.canFloodFill(n,t)&&c.getAddresses(t).forEach((function(t){var a=n[t];m(a)||!h(a)||v(a)||(a.state=d.Visible,e(t))}))}(e)}))},C=function(e){return Object(O.a)(E,(function(t){e(t),t.forEach((function(e,n){m(e)&&!v(e)&&(e.state=d.Visible),!m(e)&&v(e)&&(t[n]={value:s,state:d.Visible})}))}))};return{field:E,reset:function(){p(f)},init:function(e){p(y(e,(function(t){for(var n=k()(F()(r),[e].concat(Object(j.a)(c.getAddresses(e)))),a=new Set;a.size<i;)a.add(n[Math.random()*n.length|0]);a.forEach((function(e){t[e].value=u})),t.forEach((function(e,n){!m(e)&&(e.value=c.getMinedCount(t,n))}))})))},revealCell:function(e,t){p(m(e)?C((function(e){e[t]={value:l,state:d.Visible}})):y(t))},plantFlag:function(e,t){p(Object(O.a)(E,(function(n){n[t].state=d[v(e)?"Hidden":"Flagged"]})))},revealNeighbors:function(e){c.canFloodFill(E,e)?p(y(e)):c.canRevealNeighbors(E,e)&&p(C((function(t){c.getAddresses(e).forEach((function(e){var n=t[e];m(n)&&!v(n)&&(n.value=l),!m(n)&&v(n)&&(n.value=s),n.state=d.Visible}))})))},markMines:function(){p(Object(O.a)(E,(function(e){e.forEach((function(e){m(e)&&(e.state=d.Flagged)}))})))}}}({minesCount:t,width:n,height:n}),A=M.field,V=M.reset,B=M.init,J=M.revealCell,L=M.plantFlag,z=M.revealNeighbors,T=M.markMines;return function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(!1);Object(a.useEffect)((function(){t.current=e}),[e]);for(var i=arguments.length,r=new Array(i>1?i-1:0),c=1;c<i;c++)r[c-1]=arguments[c];Object(a.useEffect)((function(){n.current?t.current():n.current=!0}),r)}((function(){A.some(b)?H({type:W}):D()(A,m).some(h)||(T(),H({type:P}))}),A),i.a.createElement("div",{className:"minesweeper"},i.a.createElement(R,{minesCount:p,isBust:C,isVictory:w,shouldStartCountingSeconds:y&&!(C||w),smileyFaceClickHandler:function(){V(),H({type:I,payload:r})}}),i.a.createElement(E,{width:n,disabled:C||w,state:A,cellRevealHandler:function(e,t){y?J(e,t):(B(t),H({type:S}))},flagPlantingHandler:function(e,t){L(e,t),H({type:x,payload:v(e)?1:-1})},neighborsRevealHandler:z}))},L=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(y,null),i.a.createElement(J,{minesCount:30,fieldDimension:16}),i.a.createElement(p,null))},z=n(12),T=n(59),Y=n(14),q=n(60);n(182);z.b.add(T.a,q.a,Y.a,Y.c,Y.b,Y.d),Object(r.render)(i.a.createElement(a.StrictMode,null,i.a.createElement(L,null)),document.getElementById("root"))},63:function(e,t,n){e.exports=n(183)},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){}},[[63,1,2]]]);
//# sourceMappingURL=main.8fe00b37.chunk.js.map