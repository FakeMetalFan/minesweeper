(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{130:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(61),r=n(5),c=(n(78),Object(a.memo)((function(e){var t=e.state,n=e.cellRevealHandler,a=e.flagPlantingHandler,s=e.neighborsRevealHandler,c=t.isHidden,l=t.hasFlag,u=t.isEmpty,o=t.hasMine,d=t.hasGuessedIncorrectly,f=t.hasBustedMine,h=t.value;return c?i.a.createElement("div",{className:"cell",onClick:n,onContextMenu:a}):l?i.a.createElement("div",{className:"cell",onContextMenu:a},i.a.createElement(r.a,{icon:["far","flag"]})):u?i.a.createElement("div",{className:"cell cell__visible"}):o||d||f?i.a.createElement("div",{className:"cell ".concat(d?"cell__incorrect-guess":f?"cell__busted-mine":"")},i.a.createElement(r.a,{icon:["fas","bomb"]})):i.a.createElement("div",{className:"cell cell__visible cell__visible__".concat(h),onMouseDown:s},h)}))),l=(n(79),function(e){var t=e.width,n=e.disabled,a=e.state,s=e.cellRevealHandler,r=e.flagPlantingHandler,l=e.neighborsRevealHandler,u=function(e,t){var a=e.target,i=e.nativeEvent.which;if(!n){a.addEventListener("mouseup",(function e(n){i!==n.which&&l(t),a.removeEventListener("mouseup",e)}))}};return i.a.createElement("div",{className:"field".concat(n?" disabled":""),style:{gridTemplateColumns:"repeat(".concat(t,", 1fr)")},onContextMenu:function(e){e.preventDefault()}},a.map((function(e,t){return i.a.createElement(c,{key:t,state:e,cellRevealHandler:function(){!n&&s(e,t)},flagPlantingHandler:function(){!n&&r(e,t)},neighborsRevealHandler:function(e){u(e,t)}})})))}),u=(n(80),function(){return i.a.createElement("footer",null,i.a.createElement("span",null,"Powered by",i.a.createElement("a",{href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer"},i.a.createElement(r.a,{icon:["fab","github"]})),"\xa9",i.a.createElement("span",null,(new Date).getFullYear())))}),o=(n(81),function(){return i.a.createElement("header",null,i.a.createElement("span",{className:"title"},"Minesweeper"),i.a.createElement("a",{href:"https://github.com/FakeMetalFan/minesweeper",target:"_blank",rel:"noopener noreferrer"},i.a.createElement(r.a,{icon:["fab","github"]})))}),d=n(6),f=function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(!1);Object(a.useEffect)((function(){t.current=e}),[e]);for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];Object(a.useEffect)((function(){n.current?t.current():n.current=!0}),s)},h=n(67),m=n(8),g=n(62),v=n.n(g),b=n(63),E=n.n(b),j=-3,M=-2,O=-1,y=0,p={Hidden:0,Visible:1,Flagged:2},F=n(10),_=n(11),k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.Hidden;Object(F.a)(this,e),this[m.b]=!0,this.value=t,this.state=n}return Object(_.a)(e,[{key:"hasMine",get:function(){return this.value===O}},{key:"hasBustedMine",get:function(){return this.value===j}},{key:"hasGuessedIncorrectly",get:function(){return this.value===M}},{key:"isEmpty",get:function(){return this.value===y}},{key:"isHidden",get:function(){return this.state===p.Hidden}},{key:"hasFlag",get:function(){return this.state===p.Flagged}},{key:"hasMisplacedFlag",get:function(){return!this.hasMine&&this.hasFlag}},{key:"hasUnrevealedMine",get:function(){return this.hasMine&&!this.hasFlag}}]),e}(),C=function(){function e(t){Object(F.a)(this,e),this._fieldWidth=t}return Object(_.a)(e,[{key:"to2DAddresses",value:function(e){var t=e%this._fieldWidth;return[t,(e-t)/this._fieldWidth]}},{key:"to1DAddress",value:function(e,t){return t*this._fieldWidth+e}}]),e}(),w=function(){function e(t,n){Object(F.a)(this,e),this._fieldWidth=t,this._fieldHeight=n,this._cellAddressUtils=new C(t)}return Object(_.a)(e,[{key:"canFloodFill",value:function(e,t){return!this.getAddresses(t).some((function(t){return e[t].hasUnrevealedMine}))}},{key:"getAddresses",value:function(e){for(var t=this._cellAddressUtils.to2DAddresses(e),n=Object(d.a)(t,2),a=n[0],i=n[1],s=[],r=-1;r<2;r++)for(var c=-1;c<2;c++)if(r||c){var l=a+r,u=i+c;this._doesAddressExist(l,this._fieldWidth)&&this._doesAddressExist(u,this._fieldHeight)&&s.push(this._cellAddressUtils.to1DAddress(l,u))}return s}},{key:"getMinedCount",value:function(e,t){return this._getCountBy(e,t,"hasMine")}},{key:"canRevealNeighbors",value:function(e,t){return this.getMinedCount(e,t)===this._getCountBy(e,t,"hasFlag")}},{key:"_getCountBy",value:function(e,t,n){return this.getAddresses(t).reduce((function(t,a){return e[a][n]?t+1:t}),0)}},{key:"_doesAddressExist",value:function(e,t){return-1<e&&e<t}}]),e}(),H=(n(130),function(e){var t=e.minesCount,n=e.smileyFaceClickHandler,s=e.shouldStartCountingSeconds,c=e.isBust,l=e.isVictory,u=Object(a.useState)(0),o=Object(d.a)(u,2),h=o[0],m=o[1],g=Object(a.useState)(!1),v=Object(d.a)(g,2),b=v[0],E=v[1],j=function(e){return e<1?"000":e<10?"00".concat(e):e<100?"0".concat(e):"".concat(e)};return f((function(){s&&E(!0)}),s),f((function(){(c||l)&&E(!1)}),c,l),function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(t){var e=setInterval((function(){n.current()}),t);return function(){clearInterval(e)}}}),[t])}((function(){m(h+1)}),b?1e3:null),i.a.createElement("div",{className:"indicators"},i.a.createElement("div",{className:"mines-count"},j(t)),i.a.createElement("div",{className:"smiley-face",onClick:function(){E(!1),m(0),n()}},i.a.createElement(r.a,{icon:["far",l?"smile":c?"frown":"meh"]})),i.a.createElement("div",{className:"timer"},j(h)))}),A=n(3),N=n(64),R=n.n(N),B=n(36),V=n.n(B),S=(n(183),function(e){var t=e.minesCount,n=e.fieldDimension,s=function(e){var t=e.width,n=e.height,i=e.minesCount,s=t*n,r=Object(a.useMemo)((function(){return Array(s).fill(new k)}),[s]),c=new w(t,n),l=Object(a.useState)(r),u=Object(d.a)(l,2),o=u[0],f=u[1],g=function(e,t,n){return Object(m.a)(e,(function(e){null===n||void 0===n||n(e),e[t].state=p.Visible;!function t(n){c.canFloodFill(e,n)&&c.getAddresses(n).forEach((function(n){var a=e[n],i=a.hasMine,s=a.isHidden,r=a.hasFlag;i||!s||r||(a.state=p.Visible,t(n))}))}(t)}))},b=function(e,t){return Object(m.a)(e,(function(e){t(e),e.forEach((function(t,n){var a=t.hasUnrevealedMine,i=t.hasMisplacedFlag;a&&(t.state=p.Visible),i&&(e[n]=new k(M,p.Visible))}))}))};return{state:o,reset:function(){f(r)},init:function(e){f(g(o,e,(function(t){for(var n=v()(E()(s),[e].concat(Object(h.a)(c.getAddresses(e)))),a=new Set;a.size<i;)a.add(n[Math.random()*n.length|0]);a.forEach((function(e){t[e].value=O})),t.forEach((function(e,n){!e.hasMine&&(e.value=c.getMinedCount(t,n))}))})))},revealCell:function(e,t){var n=e.hasMine;f(n?b(o,(function(e){e[t]=new k(j,p.Visible)})):g(o,t))},plantFlag:function(e,t){var n=e.hasFlag;f(Object(m.a)(o,(function(e){e[t].state=p[n?"Hidden":"Flagged"]})))},revealNeighbors:function(e){f((function(){return c.canFloodFill(o,e)?g(o,e):c.canRevealNeighbors(o,e)?b(o,(function(t){c.getAddresses(e).forEach((function(e){var n=t[e],a=n.hasUnrevealedMine,i=n.hasMisplacedFlag;a&&(n.value=j),i&&(n.value=M),n.state=p.Visible}))})):o}))},markMines:function(){f(Object(m.a)(o,(function(e){e.forEach((function(e){e.hasMine&&(e.state=p.Flagged)}))})))}}}({minesCount:t,width:n,height:n}),r=s.state,c=s.reset,u=s.init,o=s.revealCell,g=s.plantFlag,b=s.revealNeighbors,y=s.markMines,F={remainingMinesCount:t,isInit:!1,isBust:!1,isVictory:!1},_=Object(a.useState)(F),C=Object(d.a)(_,2),N=C[0],B=C[1],S=N.remainingMinesCount,D=N.isInit,I=N.isBust,x=N.isVictory;return f((function(){V()(r,"hasBustedMine")?B(Object(A.a)(Object(A.a)({},N),{},{isBust:!0})):V()(R()(r,"hasMine"),"isHidden")||(y(),B(Object(A.a)(Object(A.a)({},N),{},{remainingMinesCount:0,isVictory:!0})))}),r),i.a.createElement("div",{className:"minesweeper"},i.a.createElement(H,{minesCount:S,isBust:I,isVictory:x,shouldStartCountingSeconds:D,smileyFaceClickHandler:function(){c(),B(Object(A.a)({},F))}}),i.a.createElement(l,{width:n,disabled:I||x,state:r,cellRevealHandler:function(e,t){D?o(e,t):(u(t),B(Object(A.a)(Object(A.a)({},N),{},{isInit:!0})))},flagPlantingHandler:function(e,t){g(e,t),B(Object(A.a)(Object(A.a)({},N),{},{remainingMinesCount:S+(e.hasFlag?1:-1)}))},neighborsRevealHandler:b}))}),D=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(o,null),i.a.createElement(S,{minesCount:30,fieldDimension:16}),i.a.createElement(u,null))},I=n(15),x=n(65),U=n(17),W=n(66);n(184);I.b.add(x.a,W.a,U.a,U.c,U.b,U.d),Object(s.render)(i.a.createElement(a.StrictMode,null,i.a.createElement(D,null)),document.getElementById("root"))},68:function(e,t,n){e.exports=n(185)},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){}},[[68,1,2]]]);
//# sourceMappingURL=main.cf520caa.chunk.js.map