(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{166:function(e,t,n){},167:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),c=n(78),r=n(5),s=(n(96),function(){return a.a.createElement("footer",null,a.a.createElement("span",null,"Powered by",a.a.createElement("a",{className:"icon",href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer"},a.a.createElement(r.a,{icon:["fab","github"]})),"\xa9",a.a.createElement("span",null,(new Date).getFullYear())))}),l=(n(97),function(){return a.a.createElement("header",null,a.a.createElement("span",{className:"title"},"Minesweeper"),a.a.createElement("a",{className:"icon",href:"https://github.com/FakeMetalFan/minesweeper",target:"_blank",rel:"noopener noreferrer"},a.a.createElement(r.a,{icon:["fab","github"]})))}),u=n(3),o=n(79),d=n.n(o),f=n(47),h=n.n(f),g=(n(166),function(e){var t=e.state,n=e.cellRevealHandler,i=e.flagPlantingHandler,c=e.neighborsRevealHandler,s=t.isHidden,l=t.isFlagged,u=t.isEmpty,o=t.isMined,d=t.isIncorrectGuess,f=t.isBustedMine,h=t.value;return s?a.a.createElement("button",{className:"cell",onClick:n,onContextMenu:i}):l?a.a.createElement("button",{className:"cell",onContextMenu:i},a.a.createElement(r.a,{icon:["far","flag"]})):u?a.a.createElement("button",{className:"cell cell__visible"}):o||d||f?a.a.createElement("button",{className:"cell ".concat(d?"cell__incorrect-guess":f?"cell__busted-mine":"")},a.a.createElement(r.a,{icon:["fas","bomb"]})):a.a.createElement("button",{className:"cell cell__visible cell__visible__".concat(h),onMouseDown:c},h)}),m=(n(167),function(e){var t=e.columnsCount,n=e.disabled,i=e.state,c=e.cellRevealHandler,r=e.flagPlantingHandler,s=e.neighborsRevealHandler;return a.a.createElement("div",{className:"field".concat(n?" disabled":""),style:{gridTemplateColumns:"repeat(".concat(t,", 1fr)")},onContextMenu:function(e){e.preventDefault()}},i.map((function(e,t){return a.a.createElement(g,{key:t,state:e,cellRevealHandler:function(){c(e,t)},flagPlantingHandler:function(n){n.preventDefault(),r(e,t)},neighborsRevealHandler:function(e){var n=e.target,i=e.nativeEvent.which;n.addEventListener("mouseup",(function e(a){i!==a.which&&s(t),n.removeEventListener("mouseup",e)}))}})})))}),b=function(e){for(var t=Object(i.useRef)(!1),n=arguments.length,a=new Array(n>1?n-1:0),c=1;c<n;c++)a[c-1]=arguments[c];Object(i.useEffect)((function(){t.current?e():t.current=!0}),a)},v=n(85),E=n(9),M=n(80),j=n.n(M),y=n(81),O=n.n(y),p=n(82),_=n.n(p),F=-3,k=-2,H=-1,C=0,w={Hidden:0,Visible:1,Flagged:2},A=n(11),N=n(12),R=function(){function e(t){Object(A.a)(this,e),this._fieldWidth=t}return Object(N.a)(e,[{key:"to2DAddresses",value:function(e){var t=e%this._fieldWidth;return[t,(e-t)/this._fieldWidth]}},{key:"to1DAddress",value:function(e,t){return t*this._fieldWidth+e}}]),e}(),S=function(){function e(t,n){Object(A.a)(this,e),this._fieldWidth=t,this._fieldHeight=n,this._cellAddressUtils=new R(t)}return Object(N.a)(e,[{key:"canFloodFill",value:function(e,t){return!this.getAddresses(t).some((function(t){return e[t].isUnrevealedMine}))}},{key:"getAddresses",value:function(e){for(var t=this._cellAddressUtils.to2DAddresses(e),n=Object(u.a)(t,2),i=n[0],a=n[1],c=[],r=-1;r<2;r++)for(var s=-1;s<2;s++)if(r||s){var l=i+r,o=a+s;this._doesAddressExist(l,this._fieldWidth)&&this._doesAddressExist(o,this._fieldHeight)&&c.push(this._cellAddressUtils.to1DAddress(l,o))}return c}},{key:"getMinedCount",value:function(e,t){return this._getCountBy(e,t,"isMined")}},{key:"canRevealNeighbors",value:function(e,t){return this.getMinedCount(e,t)===this._getCountBy(e,t,"isFlagged")}},{key:"_getCountBy",value:function(e,t,n){return this.getAddresses(t).reduce((function(t,i){return e[i][n]?t+1:t}),0)}},{key:"_doesAddressExist",value:function(e,t){return-1<e&&e<t}}]),e}(),B=function(e){return e<1?"000":e<10?"00".concat(e):e<100?"0".concat(e):"".concat(e)},V=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.Hidden;Object(A.a)(this,e),this[E.b]=!0,this.value=t,this.state=n}return Object(N.a)(e,[{key:"isMined",get:function(){return this.value===H}},{key:"isBustedMine",get:function(){return this.value===F}},{key:"isIncorrectGuess",get:function(){return this.value===k}},{key:"isEmpty",get:function(){return this.value===C}},{key:"isHidden",get:function(){return this.state===w.Hidden}},{key:"isFlagged",get:function(){return this.state===w.Flagged}},{key:"isMisplacedFlag",get:function(){return!this.isMined&&this.isFlagged}},{key:"isUnrevealedMine",get:function(){return this.isMined&&!this.isFlagged}}]),e}(),D=(n(212),function(e){var t=e.minesCount,n=e.smileyFaceClickHandler,c=e.shouldStartCountingSeconds,s=e.isBust,l=e.isVictory,o=Object(i.useState)(0),d=Object(u.a)(o,2),f=d[0],h=d[1],g=Object(i.useRef)();return b((function(){c&&(g.current=setInterval((function(){h((function(e){return e+1}))}),1e3))}),c),b((function(){(s||l)&&clearInterval(g.current)}),s,l),a.a.createElement("div",{className:"indicators"},a.a.createElement("div",{className:"mines-count"},B(t)),a.a.createElement("div",{className:"smiley-face",onClick:function(){clearInterval(g.current),h(0),n()}},a.a.createElement(r.a,{icon:["far",l?"smile":s?"frown":"meh"]})),a.a.createElement("div",{className:"timer"},B(f)))}),x=(n(213),function(){var e=function(e){var t=e.width,n=e.height,a=e.minesCount,c=Object(i.useState)([]),r=Object(u.a)(c,2),s=r[0],l=r[1],o=Object(i.useMemo)((function(){return new S(t,n)}),[t,n]),d=t*n,f=function(e,t,n){return Object(E.a)(e,(function(e){null===n||void 0===n||n(e),e[t].state=w.Visible;!function t(n){o.canFloodFill(e,n)&&o.getAddresses(n).forEach((function(n){var i=e[n],a=i.isMined,c=i.isHidden,r=i.isFlagged;a||!c||r||(i.state=w.Visible,t(n))}))}(t)}))},h=function(e,t){return Object(E.a)(e,(function(e){t(e),e.forEach((function(t,n){var i=t.isUnrevealedMine,a=t.isMisplacedFlag;i&&(t.state=w.Visible),a&&(e[n]=new V(k,w.Visible))}))}))},g=Object(i.useCallback)((function(){return Array.from({length:d},(function(){return new V}))}),[d]),m=function(){l(g())};return Object(i.useEffect)((function(){m()}),[]),[s,m,function(e){l((function(t){return f(t,e,(function(t){for(var n=j()(O()(d),[e].concat(Object(v.a)(o.getAddresses(e)))),i=new Set;i.size<a;)i.add(n[Math.random()*n.length|0]);i.forEach((function(e){t[e].value=H})),t.forEach((function(e,n){!e.isMined&&(e.value=o.getMinedCount(t,n))}))}))}))},function(e,t){var n=e.isMined;l((function(e){return n?h(e,(function(e){e[t]=new V(F,w.Visible)})):f(e,t)}))},function(e,t){var n=e.isFlagged;l((function(e){return Object(E.a)(e,(function(e){e[t].state=w[n?"Hidden":"Flagged"]}))}))},function(e){l((function(t){return o.canFloodFill(t,e)?f(t,e):o.canRevealNeighbors(t,e)?h(t,(function(t){o.getAddresses(e).forEach((function(e){var n=t[e],i=n.isUnrevealedMine,a=n.isMisplacedFlag;i&&(n.value=F),a&&(n.value=k),n.state=w.Visible}))})):_()(t)}))},function(){l((function(e){return Object(E.a)(e,(function(e){e.forEach((function(e){e.isMined&&(e.state=w.Flagged)}))}))}))}]}({minesCount:30,width:16,height:16}),t=Object(u.a)(e,7),n=t[0],c=t[1],r=t[2],s=t[3],l=t[4],o=t[5],f=t[6],g=Object(i.useState)(30),M=Object(u.a)(g,2),y=M[0],p=M[1],C=Object(i.useState)(!1),A=Object(u.a)(C,2),N=A[0],R=A[1],B=Object(i.useState)(!1),x=Object(u.a)(B,2),U=x[0],I=x[1],W=Object(i.useState)(!1),P=Object(u.a)(W,2),G=P[0],J=P[1];return b((function(){h()(n,"isBustedMine")?I(!0):h()(d()(n,"isMined"),"isHidden")||(f(),p(0),J(!0))}),n),a.a.createElement("div",{className:"minesweeper"},a.a.createElement(D,{minesCount:y,isBust:U,isVictory:G,shouldStartCountingSeconds:N,smileyFaceClickHandler:function(){c(),p(30),R(!1),I(!1),J(!1)}}),a.a.createElement(m,{columnsCount:16,disabled:U||G,state:n,cellRevealHandler:function(e,t){N?s(e,t):(r(t),R(!0))},flagPlantingHandler:function(e,t){l(e,t),p(y+(e.isFlagged?1:-1))},neighborsRevealHandler:function(e){o(e)}}))}),U=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(l,null),a.a.createElement(x,null),a.a.createElement(s,null))},I=n(16),W=n(83),P=n(18),G=n(84);n(214);I.b.add(W.a,G.a,P.a,P.c,P.b,P.d),Object(c.render)(a.a.createElement(i.StrictMode,null,a.a.createElement(U,null)),document.getElementById("root"))},86:function(e,t,n){e.exports=n(215)},96:function(e,t,n){},97:function(e,t,n){}},[[86,1,2]]]);
//# sourceMappingURL=main.f2f65150.chunk.js.map