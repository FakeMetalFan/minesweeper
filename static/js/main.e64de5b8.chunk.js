(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{20:function(e,n,t){},21:function(e,n,t){},22:function(e,n,t){},30:function(e,n,t){},31:function(e,n,t){},32:function(e,n,t){},33:function(e,n,t){},34:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);t(20);var i,c,o,r,u,s,a=t(3),l=(t(21),t(8)),d=(t(22),t(41)),f=function(e){return Object(a.a)(Object(a.a)({},e),{},{uuid:Object(d.a)()})};!function(e){e[e.SM=9]="SM",e[e.MD=16]="MD",e[e.BG=30]="BG"}(i||(i={})),function(e){e[e.SM=9]="SM",e[e.MD=16]="MD",e[e.BG=16]="BG"}(c||(c={})),function(e){e[e.SM=10]="SM",e[e.MD=40]="MD",e[e.BG=99]="BG"}(o||(o={})),function(e){e[e.SM=0]="SM",e[e.MD=1]="MD",e[e.BG=2]="BG"}(r||(r={})),function(e){e[e.Empty=0]="Empty",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Mine=9]="Mine",e[e.Incorrect=10]="Incorrect",e[e.Busted=11]="Busted"}(u||(u={})),function(e){e[e.Hidden=0]="Hidden",e[e.Visible=1]="Visible",e[e.Flagged=2]="Flagged"}(s||(s={}));var j=f({name:"Beginner",rowsCount:i.SM,columnsCount:c.SM,minesCount:o.SM}),b=(new Map).set(r.SM,j).set(r.MD,f({name:"Intermediate",rowsCount:i.MD,columnsCount:c.MD,minesCount:o.MD})).set(r.BG,f({name:"Expert",rowsCount:i.BG,columnsCount:c.BG,minesCount:o.BG})),m=t(1),h=Object(m.createContext)({mineFieldsProps:b,mineField:[],mineFieldProps:j,mineFieldStatus:{isSetup:!1,isBusted:!1,isSolved:!1,hiddenMinesCount:0},setMineFieldProps:function(){},setupMineField:function(){},revealCell:function(){},toggleFlag:function(){},revealNeighbors:function(){},reset:function(){}}),v=h.Provider,O=function(e){for(var n=Object(m.useRef)(!1),t=arguments.length,i=new Array(t>1?t-1:0),c=1;c<t;c++)i[c-1]=arguments[c];Object(m.useEffect)((function(){n.current?e():n.current=!0}),i)},p=function(e){return e<1?"000":e<10?"00".concat(e):e<100?"0".concat(e):e.toString()},M=t(4),g=t(0),x=function(e){var n=e.classNamePrefix,t=e.isSolved,i=e.isBusted,c=e.onClick,o=Object(g.jsx)(M.a,{icon:["far","meh"]});return t&&(o=Object(g.jsx)(M.a,{icon:["far","smile"]})),i&&(o=Object(g.jsx)(M.a,{icon:["far","frown"]})),Object(g.jsx)("div",{className:"".concat(n,"ResetIcon"),onClick:c,children:o})},F=Object(m.memo)(x),C=function(){var e,n,t=Object(m.useContext)(h),i=t.mineFieldStatus,c=i.isSetup,o=i.isSolved,r=i.isBusted,u=i.hiddenMinesCount,s=t.mineFieldProps,a=t.reset,d=Object(m.useState)(0),f=Object(l.a)(d,2),j=f[0],b=f[1],v="Controls",M=Object(m.useCallback)((function(){b((function(e){return e+1}))}),[]);return e=M,n=!c||o||r?void 0:1e3,Object(m.useEffect)((function(){if(n){var t=setInterval((function(){e()}),n);return function(){clearInterval(t)}}}),[n]),O((function(){b(0)}),s),Object(g.jsxs)("div",{className:v,children:[Object(g.jsx)("div",{children:p(u)}),Object(g.jsx)(F,{isSolved:o,isBusted:r,classNamePrefix:v,onClick:function(){b(0),a()}}),Object(g.jsx)("div",{children:p(j)})]})},w=(t(30),function(){var e="Footer";return Object(g.jsx)("footer",{className:e,children:Object(g.jsxs)("span",{children:["Powered by",Object(g.jsx)("a",{className:"".concat(e,"Link"),href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer",children:Object(g.jsx)(M.a,{icon:["fab","github"]})}),"\xa9",Object(g.jsx)("span",{children:(new Date).getFullYear()})]})})}),S=(t(31),function(){var e="Header";return Object(g.jsxs)("header",{className:e,children:[Object(g.jsx)("span",{className:"".concat(e,"Title"),children:"Minesweeper"}),Object(g.jsx)("a",{className:"".concat(e,"Link"),href:"https://github.com/FakeMetalFan/minesweeper",target:"_blank",rel:"noopener noreferrer",children:Object(g.jsx)(M.a,{icon:["fab","github"]})})]})}),k=(t(32),t(5)),y=t(6),B=function(){function e(n){Object(k.a)(this,e),this.mineFieldRowsCount=n}return Object(y.a)(e,[{key:"to2D",value:function(e){var n=e%this.mineFieldRowsCount;return{rowIndex:n,columnIndex:(e-n)/this.mineFieldRowsCount}}},{key:"to1D",value:function(e,n){return n*this.mineFieldRowsCount+e}}]),e}(),N=(t(33),function(){function e(n){Object(k.a)(this,e),this.cell=n}return Object(y.a)(e,[{key:"checkCell",value:function(e,n){return this.cell[e]===n}},{key:"isEmpty",get:function(){return this.checkCell("value",u.Empty)}},{key:"isMined",get:function(){return this.checkCell("value",u.Mine)}},{key:"isIncorrect",get:function(){return this.checkCell("value",u.Incorrect)}},{key:"isBusted",get:function(){return this.checkCell("value",u.Busted)}},{key:"isHidden",get:function(){return this.checkCell("appearance",s.Hidden)}},{key:"isFlagged",get:function(){return this.checkCell("appearance",s.Flagged)}},{key:"isUnsolved",get:function(){return this.isMined&&!this.isFlagged}},{key:"isSolvedWrong",get:function(){return!this.isMined&&this.isFlagged}}]),e}()),I=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.join(" ").trim()},D="Cell",E=function(e){var n=e.classNameModifier,t=e.classNameSuffix;return Object(g.jsx)("td",{className:I(D,n?"".concat(D).concat(n):"",t),children:Object(g.jsx)(M.a,{icon:["fas","bomb"]})})},P=function(e){var n=e.borderRight,t=e.borderBottom,i=e.value,c=e.onClick,o=e.onMouseDown,r=e.onContextMenu,u=new N(e),s=u.isHidden,a=u.isEmpty,l=u.isFlagged,d=u.isMined,f=u.isIncorrect,j=u.isBusted,b=I(n?"Cell__border-right":"",t?"Cell__border-bottom":"");return s?Object(g.jsx)("td",{className:I(D,b),onClick:c,onContextMenu:r}):l?Object(g.jsx)("td",{className:I(D,b),onContextMenu:r,children:Object(g.jsx)(M.a,{icon:["far","flag"]})}):a?Object(g.jsx)("td",{className:I(D,"".concat(D,"__empty"),b)}):d?Object(g.jsx)(E,{classNameSuffix:b}):f?Object(g.jsx)(E,{classNameModifier:"__incorrect",classNameSuffix:b}):j?Object(g.jsx)(E,{classNameModifier:"__busted",classNameSuffix:b}):Object(g.jsx)("td",{className:I(D,"".concat(D,"__").concat(i),b),onMouseDown:o,children:i})},_=Object(m.memo)(P,(function(e,n){return e.value===n.value&&e.appearance===n.appearance})),R=function(){var e=Object(m.useContext)(h),n=e.mineFieldProps,t=n.rowsCount,i=n.columnsCount,c=e.mineField,o=e.mineFieldStatus,r=o.isSetup,u=o.isBusted,s=o.isSolved,l=e.setupMineField,d=e.revealCell,f=e.toggleFlag,j=e.revealNeighbors,b=Object(m.useMemo)((function(){return new B(t)}),[t]),v="MineField",O="".concat(v,"Row");return Object(g.jsx)("table",{className:v,style:{width:32*t},onContextMenu:function(e){e.preventDefault()},children:Object(g.jsx)("tbody",{children:Object(g.jsx)("tr",{className:u||s?"".concat(O," ").concat(O,"__disabled"):void 0,children:c.map((function(e,n){var c=b.to2D(n),o=c.rowIndex,u=c.columnIndex;return Object(m.createElement)(_,Object(a.a)(Object(a.a)({},e),{},{borderRight:o===t-1,borderBottom:u===i-1,onClick:function(){!function(e){(r?d:l)(e)}(n)},onMouseDown:function(e){!function(e,n){var t=e.target,i=e.nativeEvent;t.addEventListener("mouseup",(function e(c){i.which!==c.which&&j(n),t.removeEventListener("mouseup",e)}))}(e,n)},onContextMenu:function(){!function(e){f(e)}(n)},key:e.uuid}))}))})})})},G=(t(34),function(){var e=Object(m.useContext)(h),n=e.mineFieldsProps,t=e.mineFieldProps,i=e.setMineFieldProps,c=Object(m.useMemo)((function(){return Array.from(n.values())}),[n]);return Object(g.jsx)("form",{className:"MineFieldParams",children:c.map((function(e){var n=e.uuid,c=e.name;return Object(g.jsxs)("div",{children:[Object(g.jsx)("input",{type:"radio",name:"mineFieldProps",defaultChecked:c===t.name,onChange:function(){i(e)}}),"\xa0",c]},n)}))})}),H=t(19),V=t(9),U=t(11),T=function(){function e(n){Object(k.a)(this,e),this.mineField=n}return Object(y.a)(e,[{key:"isBusted",value:function(){return this.mineField.some((function(e){return new N(e).isBusted}))}},{key:"isSolved",value:function(){return!U.reject(this.mineField,(function(e){return new N(e).isMined})).some((function(e){return new N(e).isHidden}))}}]),e}(),A=function(e,n){return e>-1&&e<n},L=function(){function e(n,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new B(n);Object(k.a)(this,e),this.mineFieldRowsCount=n,this.mineFieldColumnsCount=t,this.indexUtils=i}return Object(y.a)(e,[{key:"getIndexes",value:function(e){for(var n=[],t=this.indexUtils.to2D(e),i=t.rowIndex,c=t.columnIndex,o=-1;o<2;o+=1)for(var r=-1;r<2;r+=1)if(o||r){var u=i+o,s=c+r;A(u,this.mineFieldRowsCount)&&A(s,this.mineFieldColumnsCount)&&n.push(this.indexUtils.to1D(u,s))}return n}},{key:"canFloodFill",value:function(e,n){return!this.getIndexes(n).some((function(n){return new N(e[n]).isUnsolved}))}},{key:"canReveal",value:function(e,n){return this.countMined(e,n)===this.countBy(e,n,(function(e){return new N(e).isFlagged}))}},{key:"countMined",value:function(e,n){return this.countBy(e,n,(function(e){return new N(e).isMined}))}},{key:"countBy",value:function(e,n,t){return this.getIndexes(n).reduce((function(n,i){return t(e[i])?n+1:n}),0)}}]),e}(),W=function(){var e=function(e){var n=Object(m.useState)(e),t=Object(l.a)(n,2),i=t[0],c=t[1],o=i.rowsCount,r=i.columnsCount,d=i.minesCount,j=o*r,b=Object(m.useMemo)((function(){return Array.from({length:j},(function(){return f({value:u.Empty,appearance:s.Hidden})}))}),[j]),h=Object(m.useMemo)((function(){return{isSetup:!1,isBusted:!1,isSolved:!1,hiddenMinesCount:d}}),[d]),v=Object(m.useMemo)((function(){return new L(o,r)}),[o,r]),p=Object(m.useState)(b),M=Object(l.a)(p,2),g=M[0],x=M[1],F=Object(m.useState)(h),C=Object(l.a)(F,2),w=C[0],S=C[1],k=function(e,n,t){return Object(V.a)(e,(function(e){null===t||void 0===t||t(e),e[n].appearance=s.Visible,function n(t){v.canFloodFill(e,t)&&v.getIndexes(t).forEach((function(t){var i=e[t],c=new N(i),o=c.isMined,r=c.isHidden,u=c.isFlagged;o||!r||u||(i.appearance=s.Visible,n(t))}))}(n)}))},y=function(e,n){return Object(V.a)(e,(function(e){n(e),e.forEach((function(n,t){var i=new N(n),c=i.isUnsolved,o=i.isSolvedWrong;c?n.appearance=s.Visible:o&&(e[t]=Object(a.a)(Object(a.a)({},n),{},{value:u.Incorrect,appearance:s.Visible}))}))}))},B=function(){x(b),S(h)};return O((function(){B()}),b),O((function(){var e=new T(g);e.isBusted()?S((function(e){return Object(a.a)(Object(a.a)({},e),{},{isBusted:!0})})):e.isSolved()&&(x((function(e){return Object(V.a)(e,(function(e){e.forEach((function(e){new N(e).isMined&&(e.appearance=s.Flagged)}))}))})),S((function(e){return Object(a.a)(Object(a.a)({},e),{},{isSolved:!0,hiddenMinesCount:0})})))}),g),{mineField:g,mineFieldProps:i,mineFieldStatus:w,setMineFieldProps:c,setupMineField:function(e){x((function(n){return k(n,e,(function(n){for(var t=U.difference(U.range(j),[e].concat(Object(H.a)(v.getIndexes(e)))),i=new Set;i.size<d;)i.add(t[Math.floor(Math.random()*t.length)]);i.forEach((function(e){n[e].value=u.Mine})),n.forEach((function(e,t){new N(e).isMined||(e.value=v.countMined(n,t))}))}))})),S(Object(a.a)(Object(a.a)({},w),{},{isSetup:!0}))},revealCell:function(e){x((function(n){var t=n[e];return new N(t).isMined?y(n,(function(n){n[e]=Object(a.a)(Object(a.a)({},t),{},{value:u.Busted,appearance:s.Visible})})):k(n,e)}))},toggleFlag:function(e){var n=new N(g[e]).isFlagged;x((function(t){return Object(V.a)(t,(function(t){t[e].appearance=n?s.Hidden:s.Flagged}))})),S((function(e){return Object(V.a)(e,(function(e){e.hiddenMinesCount+=n?1:-1}))}))},revealNeighbors:function(e){x((function(n){return v.canFloodFill(n,e)?k(n,e):v.canReveal(n,e)?y(n,(function(n){v.getIndexes(e).forEach((function(e){var t=n[e],i=new N(t),c=i.isUnsolved,o=i.isSolvedWrong;c?t.value=u.Busted:o&&(t.value=u.Incorrect),t.appearance=s.Visible}))})):n}))},reset:B}}(j);return Object(g.jsxs)(v,{value:Object(a.a)(Object(a.a)({},e),{},{mineFieldsProps:b}),children:[Object(g.jsx)(S,{}),Object(g.jsxs)("main",{className:"Minesweeper",children:[Object(g.jsx)(C,{}),Object(g.jsx)(R,{}),Object(g.jsx)(G,{})]}),Object(g.jsx)(w,{})]})},J=function(){return Object(g.jsx)(W,{})},z=t(16),Y=t(7),q=t(17),K=t(12),Q=t(18);Y.b.add(q.a,Q.a,K.a,K.c,K.b,K.d),Object(z.render)(Object(g.jsx)(m.StrictMode,{children:Object(g.jsx)(J,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.e64de5b8.chunk.js.map