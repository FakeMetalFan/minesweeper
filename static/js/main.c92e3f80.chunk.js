(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{50:function(e,n,t){},51:function(e,n,t){},52:function(e,n,t){},60:function(e,n,t){},61:function(e,n,t){},62:function(e,n,t){},63:function(e,n,t){},64:function(e,n,t){},65:function(e,n,t){},69:function(e,n,t){"use strict";t.r(n);t(50);var i,c,o,u,r,s,a=t(5),l=(t(51),t(52),t(8)),d=t(1),b=t(0),f=function(){var e="Footer";return Object(b.jsx)("footer",{className:e,children:Object(b.jsxs)("span",{children:["Powered by",Object(b.jsx)("a",{className:"".concat(e,"Link"),href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer",children:Object(b.jsx)(l.a,{icon:["fab","github"]})}),"\xa9",Object(b.jsx)("span",{children:(new Date).getFullYear()})]})})},j=Object(d.memo)(f),m=(t(60),function(){var e="Header";return Object(b.jsxs)("header",{className:e,children:[Object(b.jsx)("span",{className:"".concat(e,"Title"),children:"Minesweeper"}),Object(b.jsx)("a",{className:"".concat(e,"Link"),href:"https://github.com/FakeMetalFan/minesweeper",target:"_blank",rel:"noopener noreferrer",children:Object(b.jsx)(l.a,{icon:["fab","github"]})})]})}),h=Object(d.memo)(m),O=t(48),v=function(e){return Object(a.a)(Object(a.a)({},e),{},{id:Object(O.a)()})};!function(e){e[e.SM=9]="SM",e[e.MD=16]="MD",e[e.BG=30]="BG"}(i||(i={})),function(e){e[e.SM=9]="SM",e[e.MD=16]="MD",e[e.BG=16]="BG"}(c||(c={})),function(e){e[e.SM=10]="SM",e[e.MD=40]="MD",e[e.BG=99]="BG"}(o||(o={})),function(e){e[e.SM=0]="SM",e[e.MD=1]="MD",e[e.BG=2]="BG"}(u||(u={})),function(e){e[e.Empty=0]="Empty",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Mine=9]="Mine",e[e.Incorrect=10]="Incorrect",e[e.Busted=11]="Busted"}(r||(r={})),function(e){e[e.Hidden=0]="Hidden",e[e.Visible=1]="Visible",e[e.Flagged=2]="Flagged"}(s||(s={}));var p=v({name:"Beginner",rowsCount:i.SM,columnsCount:c.SM,minesCount:o.SM}),g=(new Map).set(u.SM,p).set(u.MD,v({name:"Intermediate",rowsCount:i.MD,columnsCount:c.MD,minesCount:o.MD})).set(u.BG,v({name:"Expert",rowsCount:i.BG,columnsCount:c.BG,minesCount:o.BG})),x=Object(d.createContext)({mineFieldsProps:g,mineField:[],mineFieldProps:p,mineFieldStatus:{isSetup:!1,isBusted:!1,isSolved:!1,hiddenMinesCount:0},setMineFieldProps:function(){},setupMineField:function(){},revealCell:function(){},toggleFlag:function(){},revealNeighbors:function(){},reset:function(){}}),C=x.Provider,M=t(47),F=t(26),w=function(e){for(var n=Object(d.useRef)(!1),t=arguments.length,i=new Array(t>1?t-1:0),c=1;c<t;c++)i[c-1]=arguments[c];Object(d.useEffect)((function(){n.current?e():n.current=!0}),i)},k=t(27),y=t(71),S=t(72),B=t(13),N=t(14),I=function(){function e(n){Object(B.a)(this,e),this.cell=n}return Object(N.a)(e,[{key:"checkCell",value:function(e,n){return this.cell[e]===n}},{key:"isEmpty",get:function(){return this.checkCell("value",r.Empty)}},{key:"isMined",get:function(){return this.checkCell("value",r.Mine)}},{key:"isIncorrect",get:function(){return this.checkCell("value",r.Incorrect)}},{key:"isBusted",get:function(){return this.checkCell("value",r.Busted)}},{key:"isHidden",get:function(){return this.checkCell("appearance",s.Hidden)}},{key:"isFlagged",get:function(){return this.checkCell("appearance",s.Flagged)}},{key:"isUnsolved",get:function(){return this.isMined&&!this.isFlagged}},{key:"isSolvedWrong",get:function(){return!this.isMined&&this.isFlagged}}]),e}(),D=t(70),E=function(){function e(n){Object(B.a)(this,e),this.mineField=n}return Object(N.a)(e,[{key:"isBusted",value:function(){return this.mineField.some((function(e){return new I(e).isBusted}))}},{key:"isSolved",value:function(){return!Object(D.a)(this.mineField,(function(e){return new I(e).isMined})).some((function(e){return new I(e).isHidden}))}}]),e}(),_=function(){function e(n){Object(B.a)(this,e),this.mineFieldRowsCount=n}return Object(N.a)(e,[{key:"to2D",value:function(e){var n=e%this.mineFieldRowsCount;return{rowIndex:n,columnIndex:(e-n)/this.mineFieldRowsCount}}},{key:"to1D",value:function(e,n){return n*this.mineFieldRowsCount+e}}]),e}(),P=function(e,n){return e>-1&&e<n},R=function(){function e(n,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new _(n);Object(B.a)(this,e),this.mineFieldRowsCount=n,this.mineFieldColumnsCount=t,this.indexUtils=i}return Object(N.a)(e,[{key:"getIndexes",value:function(e){for(var n=e.index,t=[],i=this.indexUtils.to2D(n),c=i.rowIndex,o=i.columnIndex,u=-1;u<2;u+=1)for(var r=-1;r<2;r+=1)if(u||r){var s=c+u,a=o+r;P(s,this.mineFieldRowsCount)&&P(a,this.mineFieldColumnsCount)&&t.push(this.indexUtils.to1D(s,a))}return t}},{key:"canFloodFill",value:function(e,n){return!this.getIndexes(n).some((function(n){return new I(e[n]).isUnsolved}))}},{key:"canReveal",value:function(e,n){return this.countMined(e,n)===this.countBy(e,n,(function(e){return new I(e).isFlagged}))}},{key:"countMined",value:function(e,n){return this.countBy(e,n,(function(e){return new I(e).isMined}))}},{key:"countBy",value:function(e,n,t){return this.getIndexes(n).reduce((function(n,i){return t(e[i])?n+1:n}),0)}}]),e}(),G=(t(61),function(e){return e<1?"000":e<10?"00".concat(e):e<100?"0".concat(e):e.toString()}),H=function(e){var n=e.count;return Object(b.jsx)("div",{className:"Counter",children:G(n)})},V=Object(d.memo)(H),U=(t(62),function(e){var n=e.icon,t=void 0===n?Object(b.jsx)(l.a,{icon:["far","meh"]}):n,i=e.onClick;return Object(b.jsx)("button",{type:"button",className:"FaceIcon",onClick:i,children:t})}),T=Object(d.memo)(U),A=function(){var e,n=Object(d.useContext)(x),t=n.mineFieldStatus,i=t.isSetup,c=t.isSolved,o=t.isBusted,u=t.hiddenMinesCount,r=n.mineFieldProps,s=n.reset,a=Object(d.useState)(0),f=Object(F.a)(a,2),j=f[0],m=f[1];c?e=Object(b.jsx)(l.a,{icon:["far","smile"]}):o&&(e=Object(b.jsx)(l.a,{icon:["far","frown"]}));var h=Object(d.useCallback)((function(){m(0),s()}),[s]);return function(e,n){var t=Object(d.useRef)();Object(d.useEffect)((function(){t.current=e})),Object(d.useEffect)((function(){if(n){var e=setInterval((function(){var e;null===(e=t.current)||void 0===e||e.call(t)}),n);return function(){clearInterval(e)}}}),[n])}((function(){m(j+1)}),!i||c||o?void 0:1e3),w((function(){m(0)}),r),Object(b.jsxs)("div",{className:"Indicators",children:[Object(b.jsx)(V,{count:u}),Object(b.jsx)(T,{icon:e,onClick:h}),Object(b.jsx)(V,{count:j})]})},L=(t(63),t(64),function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter(Boolean).join(" ").trim()}),W=function(e){var n=e.className;return Object(b.jsx)("button",{type:"button",className:n,children:Object(b.jsx)(l.a,{icon:["fas","bomb"]})})},J=function(e){var n=e.cell,t=e.withBorderRight,i=e.withBorderBottom,c=e.onClick,o=e.onMouseDown,u=e.onContextMenu,r=n.value,s=new I(n),a=s.isHidden,d=s.isEmpty,f=s.isFlagged,j=s.isMined,m=s.isIncorrect,h=s.isBusted,O="Cell",v=L(t?"Cell__border-right":"",i?"Cell__border-bottom":""),p=function(){u(n)};return a?Object(b.jsx)("button",{type:"button","aria-label":"Cell",className:L(O,v),onClick:function(){c(n)},onContextMenu:p}):f?Object(b.jsx)("button",{type:"button",className:L(O,v),onContextMenu:p,children:Object(b.jsx)(l.a,{icon:["far","flag"]})}):d?Object(b.jsx)("button",{type:"button","aria-label":"Cell",className:L(O,"".concat(O,"__empty"),v)}):j?Object(b.jsx)(W,{className:L(O,v)}):m?Object(b.jsx)(W,{className:L(O,"".concat(O,"__incorrect"),v)}):h?Object(b.jsx)(W,{className:L(O,"".concat(O,"__busted"),v)}):Object(b.jsx)("button",{type:"button",className:L(O,"".concat(O,"__").concat(r),v),onMouseDown:function(e){o(e,n)},children:r})},z=Object(d.memo)(J),Y=function(){var e=Object(d.useContext)(x),n=e.mineFieldProps,t=n.rowsCount,i=n.columnsCount,c=e.mineField,o=e.mineFieldStatus,u=o.isSetup,r=o.isBusted,s=o.isSolved,a=e.setupMineField,l=e.revealCell,f=e.toggleFlag,j=e.revealNeighbors,m=new _(t),h="MineField",O="".concat(h,"Row"),v=Object(d.useCallback)((function(e){(u?l:a)(e)}),[u,l,a]),p=Object(d.useCallback)((function(e,n){var t=e.target,i=e.nativeEvent;t.addEventListener("mouseup",(function e(c){i.which!==c.which&&j(n),t.removeEventListener("mouseup",e)}))}),[j]),g=Object(d.useCallback)((function(e){f(e)}),[f]);return Object(b.jsx)("div",{className:h,style:{width:32*t},onContextMenu:function(e){e.preventDefault()},children:Object(b.jsx)("div",{className:L(O,"".concat(r||s?"".concat(O,"__disabled"):"")),children:c.map((function(e,n){var c=m.to2D(n),o=c.rowIndex,u=c.columnIndex;return Object(b.jsx)(z,{cell:e,withBorderRight:o===t-1,withBorderBottom:u===i-1,onClick:v,onMouseDown:p,onContextMenu:g},e.id)}))})})},q=(t(65),function(e){var n=e.item,t=e.name,i=e.checked,c=e.className,o=e.onChange;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("input",{type:"radio",name:t,className:c,defaultChecked:i,onChange:function(){o(n)}}),n.name]})}),K=Object(d.memo)(q),Q=function(){var e=Object(d.useContext)(x),n=e.mineFieldsProps,t=e.mineFieldProps,i=e.setMineFieldProps,c="MineFieldProps",o="".concat(c,"RadioButton"),u=Object(d.useCallback)((function(e){i(e)}),[i]);return Object(b.jsx)("form",{className:c,children:Array.from(n.values()).map((function(e){var n=e.name,i=e.id;return Object(b.jsx)("div",{className:o,children:Object(b.jsx)(K,{item:e,name:"MineFieldProps",className:"".concat(o,"Radio"),checked:n===t.name,onChange:u})},i)}))})},X=function(){var e=function(e){var n=Object(d.useState)(e),t=Object(F.a)(n,2),i=t[0],c=t[1],o=i.rowsCount,u=i.columnsCount,l=i.minesCount,b=o*u,f=Object(d.useMemo)((function(){return Array.from({length:b},(function(e,n){return v({index:n,value:r.Empty,appearance:s.Hidden})}))}),[b]),j=Object(d.useMemo)((function(){return{isSetup:!1,isBusted:!1,isSolved:!1,hiddenMinesCount:l}}),[l]),m=Object(d.useMemo)((function(){return new R(o,u)}),[o,u]),h=Object(d.useState)(f),O=Object(F.a)(h,2),p=O[0],g=O[1],x=Object(d.useState)(j),C=Object(F.a)(x,2),B=C[0],N=C[1],D=Object(d.useCallback)((function(e,n,t){return Object(k.a)(e,(function(e){null===t||void 0===t||t(e),e[n.index].appearance=s.Visible,function n(t){m.canFloodFill(e,t)&&m.getIndexes(t).forEach((function(t){var i=e[t],c=new I(i),o=c.isMined,u=c.isHidden,r=c.isFlagged;o||!u||r||(i.appearance=s.Visible,n(i))}))}(n)}))}),[m]),_=Object(d.useCallback)((function(e,n){return Object(k.a)(e,(function(e){n(e),e.forEach((function(n,t){var i=new I(n),c=i.isUnsolved,o=i.isSolvedWrong;c?n.appearance=s.Visible:o&&(e[t]=Object(a.a)(Object(a.a)({},n),{},{value:r.Incorrect,appearance:s.Visible}))}))}))}),[]),P=Object(d.useCallback)((function(e){g((function(n){return D(n,e,(function(n){for(var t=Object(y.a)(Object(S.a)(b),[e.index].concat(Object(M.a)(m.getIndexes(e)))),i=new Set;i.size<l;)i.add(t[Math.floor(Math.random()*t.length)]);i.forEach((function(e){n[e].value=r.Mine})),n.forEach((function(e){new I(e).isMined||(e.value=m.countMined(n,e))}))}))})),N((function(e){return Object(a.a)(Object(a.a)({},e),{},{isSetup:!0})}))}),[D,b,l,m]),G=Object(d.useCallback)((function(e){g((function(n){return new I(e).isMined?_(n,(function(n){n[e.index]=Object(a.a)(Object(a.a)({},e),{},{value:r.Busted,appearance:s.Visible})})):D(n,e)}))}),[_,D]),H=Object(d.useCallback)((function(e){var n=new I(e).isFlagged;g((function(t){return Object(k.a)(t,(function(t){t[e.index].appearance=n?s.Hidden:s.Flagged}))})),N((function(e){return Object(k.a)(e,(function(e){e.hiddenMinesCount+=n?1:-1}))}))}),[]),V=Object(d.useCallback)((function(e){g((function(n){return m.canFloodFill(n,e)?D(n,e):m.canReveal(n,e)?_(n,(function(n){m.getIndexes(e).forEach((function(e){var t=n[e],i=new I(t),c=i.isUnsolved,o=i.isSolvedWrong;c?t.value=r.Busted:o&&(t.value=r.Incorrect),t.appearance=s.Visible}))})):n}))}),[_,D,m]),U=Object(d.useCallback)((function(){g(f),N(j)}),[f,j]);return w((function(){U()}),f),w((function(){var e=new E(p);e.isBusted()?N((function(e){return Object(a.a)(Object(a.a)({},e),{},{isBusted:!0})})):e.isSolved()&&(g((function(e){return Object(k.a)(e,(function(e){e.forEach((function(e){new I(e).isMined&&(e.appearance=s.Flagged)}))}))})),N((function(e){return Object(a.a)(Object(a.a)({},e),{},{isSolved:!0,hiddenMinesCount:0})})))}),p),{mineField:p,mineFieldProps:i,mineFieldStatus:B,setMineFieldProps:c,setupMineField:P,revealCell:G,toggleFlag:H,revealNeighbors:V,reset:U}}(p);return Object(b.jsxs)(C,{value:Object(a.a)(Object(a.a)({},e),{},{mineFieldsProps:g}),children:[Object(b.jsx)(h,{}),Object(b.jsxs)("main",{className:"Minesweeper",children:[Object(b.jsx)(A,{}),Object(b.jsx)(Y,{}),Object(b.jsx)(Q,{})]}),Object(b.jsx)(j,{})]})},Z=function(){return Object(b.jsx)(X,{})},$=t(44),ee=t(20),ne=t(45),te=t(30),ie=t(46);ee.b.add(ne.a,ie.a,te.a,te.c,te.b,te.d),Object($.render)(Object(b.jsx)(d.StrictMode,{children:Object(b.jsx)(Z,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.c92e3f80.chunk.js.map