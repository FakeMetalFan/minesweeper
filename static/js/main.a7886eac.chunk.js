(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{179:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),s=n(60),l=n(5),c=(n(77),function(){return a.a.createElement("footer",null,a.a.createElement("span",null,"Powered by",a.a.createElement("a",{className:"icon",href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer"},a.a.createElement(l.a,{icon:["fab","github"]})),"\xa9",a.a.createElement("span",null,(new Date).getFullYear())))}),r=(n(78),function(){return a.a.createElement("header",null,a.a.createElement("span",{className:"title"},"Minesweeper"),a.a.createElement("a",{className:"icon",href:"https://github.com/FakeMetalFan/minesweeper",target:"_blank",rel:"noopener noreferrer"},a.a.createElement(l.a,{icon:["fab","github"]})))}),u=n(3),o=n(61),d=n.n(o),f=n(35),h=n.n(f),g=n(66),v=n(6),b=n(7),m=n(9),_=n(62),E=n.n(_),y=n(63),F=n.n(y),k=-3,M=-2,p=-1,j=0,O={Hidden:0,Visible:1,Flagged:2},S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.Hidden;Object(v.a)(this,e),this[m.b]=!0,this.value=t,this.state=n}return Object(b.a)(e,[{key:"isMined",get:function(){return this.value===p}},{key:"isBustedMine",get:function(){return this.value===k}},{key:"isIncorrectGuess",get:function(){return this.value===M}},{key:"isEmpty",get:function(){return this.value===j}},{key:"isHidden",get:function(){return this.state===O.Hidden}},{key:"isFlagged",get:function(){return this.state===O.Flagged}},{key:"isMisplacedFlag",get:function(){return!this.isMined&&this.isFlagged}},{key:"isUnrevealedMine",get:function(){return this.isMined&&!this.isFlagged}}]),e}(),N=function(){function e(t){Object(v.a)(this,e),this._fieldWidth=t}return Object(b.a)(e,[{key:"to2DAddresses",value:function(e){var t=e%this._fieldWidth;return[t,(e-t)/this._fieldWidth]}},{key:"to1DAddress",value:function(e,t){return t*this._fieldWidth+e}}]),e}(),C=function(){function e(t,n){Object(v.a)(this,e),this._fieldWidth=t,this._fieldHeight=n,this._cellAddressUtils=new N(t)}return Object(b.a)(e,[{key:"canFloodFill",value:function(e,t){return!this.getAddresses(t).some((function(t){return e[t].isUnrevealedMine}))}},{key:"getAddresses",value:function(e){for(var t=this._cellAddressUtils.to2DAddresses(e),n=Object(u.a)(t,2),i=n[0],a=n[1],s=[],l=-1;l<2;l++)for(var c=-1;c<2;c++)if(l||c){var r=i+l,o=a+c;this._doesAddressExist(r,this._fieldWidth)&&this._doesAddressExist(o,this._fieldHeight)&&s.push(this._cellAddressUtils.to1DAddress(r,o))}return s}},{key:"getMinedCount",value:function(e,t){return this._getCountBy(e,t,"isMined")}},{key:"canRevealNeighbors",value:function(e,t){return this.getMinedCount(e,t)===this._getCountBy(e,t,"isFlagged")}},{key:"_getCountBy",value:function(e,t,n){return this.getAddresses(t).reduce((function(t,i){return e[i][n]?t+1:t}),0)}},{key:"_doesAddressExist",value:function(e,t){return-1<e&&e<t}}]),e}(),H=function(){function e(t,n,i){Object(v.a)(this,e),this.state=[],this._width=t,this._height=n,this._minesCount=i,this._cellNeighborsUtils=new C(t,n)}return Object(b.a)(e,[{key:"setEmptyState",value:function(){this.state=Array.from({length:this._length},(function(){return new S}))}},{key:"setInitialState",value:function(e){var t=this;this.state=this._getFloodFilledState(e,(function(n){for(var i=F()(E()(t._length),[e].concat(Object(g.a)(t._cellNeighborsUtils.getAddresses(e)))),a=new Set;a.size<t._minesCount;)a.add(i[Math.random()*i.length|0]);a.forEach((function(e){n[e].value=p})),n.forEach((function(e,i){!e.isMined&&(e.value=t._cellNeighborsUtils.getMinedCount(n,i))}))}))}},{key:"setCellRevealedState",value:function(e,t){var n=e.isMined;this.state=n?this._getBustedState((function(e){e[t]=new S(k,O.Visible)})):this._getFloodFilledState(t)}},{key:"setFlagPlantedState",value:function(e,t){var n=e.isFlagged;this.state=Object(m.a)(this.state,(function(e){e[t].state=O[n?"Hidden":"Flagged"]}))}},{key:"setNeighborsRevealedState",value:function(e){var t=this;this._cellNeighborsUtils.canFloodFill(this.state,e)?this.state=this._getFloodFilledState(e):this._cellNeighborsUtils.canRevealNeighbors(this.state,e)&&(this.state=this._getBustedState((function(n){t._cellNeighborsUtils.getAddresses(e).forEach((function(e){var t=n[e],i=t.isUnrevealedMine,a=t.isMisplacedFlag;i&&(t.value=k),a&&(t.value=M),t.state=O.Visible}))})))}},{key:"setMinesMarkedState",value:function(){this.state=Object(m.a)(this.state,(function(e){e.forEach((function(e){e.isMined&&(e.state=O.Flagged)}))}))}},{key:"_getFloodFilledState",value:function(e,t){var n=this;return Object(m.a)(this.state,(function(i){null===t||void 0===t||t(i),i[e].state=O.Visible;!function e(t){n._cellNeighborsUtils.canFloodFill(i,t)&&n._cellNeighborsUtils.getAddresses(t).forEach((function(t){var n=i[t],a=n.isMined,s=n.isHidden,l=n.isFlagged;a||!s||l||(n.state=O.Visible,e(t))}))}(e)}))}},{key:"_getBustedState",value:function(e){return Object(m.a)(this.state,(function(t){e(t),t.forEach((function(e,n){var i=e.isUnrevealedMine,a=e.isMisplacedFlag;i&&(e.state=O.Visible),a&&(t[n]=new S(M,O.Visible))}))}))}},{key:"_length",get:function(){return this._width*this._height}}]),e}(),w=(n(179),function(e){var t=e.state,n=e.cellRevealHandler,i=e.flagPlantingHandler,s=e.neighborsRevealHandler,c=t.isHidden,r=t.isFlagged,u=t.isEmpty,o=t.isMined,d=t.isIncorrectGuess,f=t.isBustedMine,h=t.value;return c?a.a.createElement("button",{className:"cell",onClick:n,onContextMenu:i}):r?a.a.createElement("button",{className:"cell",onContextMenu:i},a.a.createElement(l.a,{icon:["far","flag"]})):u?a.a.createElement("button",{className:"cell cell__visible"}):o||d||f?a.a.createElement("button",{className:"cell ".concat(d?"cell__incorrect-guess":f?"cell__busted-mine":"")},a.a.createElement(l.a,{icon:["fas","bomb"]})):a.a.createElement("button",{className:"cell cell__visible cell__visible__".concat(h),onMouseDown:s},h)}),A=(n(180),function(e){var t=e.columnsCount,n=e.disabled,i=e.state,s=e.cellRevealHandler,l=e.flagPlantingHandler,c=e.neighborsRevealHandler;return a.a.createElement("div",{className:"field".concat(n?" disabled":""),style:{gridTemplateColumns:"repeat(".concat(t,", 1fr)")},onContextMenu:function(e){e.preventDefault()}},i.map((function(e,t){return a.a.createElement(w,{key:t,state:e,cellRevealHandler:function(){s(e,t)},flagPlantingHandler:function(n){n.preventDefault(),l(e,t)},neighborsRevealHandler:function(e){var n=e.target,i=e.nativeEvent.which;n.addEventListener("mouseup",(function e(a){i!==a.which&&c(t),n.removeEventListener("mouseup",e)}))}})})))}),R=function(e){for(var t=Object(i.useRef)(!1),n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];Object(i.useEffect)((function(){t.current?e():t.current=!0}),a)},U=function(e){return e<1?"000":e<10?"00".concat(e):e<100?"0".concat(e):"".concat(e)},B=(n(181),function(e){var t=e.minesCount,n=e.smileyFaceClickHandler,s=e.shouldStartCountingSeconds,c=e.isBust,r=e.isVictory,o=Object(i.useState)(0),d=Object(u.a)(o,2),f=d[0],h=d[1],g=Object(i.useRef)();return R((function(){s&&(g.current=setInterval((function(){h((function(e){return e+1}))}),1e3))}),s),R((function(){(c||r)&&clearInterval(g.current)}),c,r),a.a.createElement("div",{className:"indicators"},a.a.createElement("div",{className:"mines-count"},U(t)),a.a.createElement("div",{className:"smiley-face",onClick:function(){clearInterval(g.current),h(0),n()}},a.a.createElement(l.a,{icon:["far",r?"smile":c?"frown":"meh"]})),a.a.createElement("div",{className:"timer"},U(f)))}),V=(n(182),function(){var e=Object(i.useState)(new H(16,16,30)),t=Object(u.a)(e,1)[0],n=Object(i.useState)([]),s=Object(u.a)(n,2),l=s[0],c=s[1],r=Object(i.useState)(30),o=Object(u.a)(r,2),f=o[0],g=o[1],v=Object(i.useState)(!1),b=Object(u.a)(v,2),m=b[0],_=b[1],E=Object(i.useState)(!1),y=Object(u.a)(E,2),F=y[0],k=y[1],M=Object(i.useState)(!1),p=Object(u.a)(M,2),j=p[0],O=p[1],S=function(){c(t.state)};return Object(i.useEffect)((function(){t.setEmptyState(),S()}),[]),R((function(){h()(l,"isBustedMine")?k(!0):h()(d()(l,"isMined"),"isHidden")||(t.setMinesMarkedState(),g(0),O(!0),S())}),l),a.a.createElement("div",{className:"minesweeper"},a.a.createElement(B,{minesCount:f,isBust:F,isVictory:j,shouldStartCountingSeconds:m,smileyFaceClickHandler:function(){t.setEmptyState(),g(30),_(!1),k(!1),O(!1),S()}}),a.a.createElement(A,{columnsCount:16,disabled:F||j,state:l,cellRevealHandler:function(e,n){m?t.setCellRevealedState(e,n):(t.setInitialState(n),_(!0)),S()},flagPlantingHandler:function(e,n){t.setFlagPlantedState(e,n),g(f+(e.isFlagged?1:-1)),S()},neighborsRevealHandler:function(e){t.setNeighborsRevealedState(e),S()}}))}),D=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(r,null),a.a.createElement(V,null),a.a.createElement(c,null))},I=n(14),x=n(64),P=n(16),W=n(65);n(183);I.b.add(x.a,W.a,P.a,P.c,P.b,P.d),Object(s.render)(a.a.createElement(i.StrictMode,null,a.a.createElement(D,null)),document.getElementById("root"))},67:function(e,t,n){e.exports=n(184)},77:function(e,t,n){},78:function(e,t,n){}},[[67,1,2]]]);
//# sourceMappingURL=main.a7886eac.chunk.js.map