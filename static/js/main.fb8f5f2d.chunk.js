(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{51:function(e,n,t){},52:function(e,n,t){},53:function(e,n,t){},61:function(e,n,t){},62:function(e,n,t){},63:function(e,n,t){},64:function(e,n,t){},65:function(e,n,t){},66:function(e,n,t){},70:function(e,n,t){"use strict";t.r(n);t(51);var i,c=t(9),a=(t(52),t(53),t(7)),o=t(1),u=t.n(o),s=t(0),r=function(){var e="Footer";return Object(s.jsx)("footer",{className:e,children:Object(s.jsxs)("span",{children:["Powered by",Object(s.jsx)("a",{className:"".concat(e,"Link"),href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer",children:Object(s.jsx)(a.a,{icon:["fab","github"]})}),"\xa9",Object(s.jsx)("span",{children:(new Date).getFullYear()})]})})},l=Object(o.memo)(r),d=(t(61),function(){var e="Header";return Object(s.jsxs)("header",{className:e,children:[Object(s.jsx)("span",{className:"".concat(e,"Title"),children:"Minesweeper"}),Object(s.jsx)("a",{className:"".concat(e,"Link"),href:"https://github.com/FakeMetalFan/minesweeper",target:"_blank",rel:"noopener noreferrer",children:Object(s.jsx)(a.a,{icon:["fab","github"]})})]})}),f=Object(o.memo)(d),j=Object(o.createContext)({mineField:[],mineFieldParams:{},mineFieldStatus:{},setMineFieldParams:function(){},setupMineField:function(){},revealCell:function(){},toggleFlag:function(){},revealNeighbors:function(){},reset:function(){}}),b=t(48),m=t(28);!function(e){e[e.Hidden=0]="Hidden",e[e.Visible=1]="Visible",e[e.Flagged=2]="Flagged",e[e.Busted=3]="Busted",e[e.Wrong=4]="Wrong"}(i||(i={}));var h,O=i;!function(e){e[e.Empty=0]="Empty",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Mine=9]="Mine"}(h||(h={}));var v=h,g=t(49),x=function(e){return Object(c.a)(Object(c.a)({},e),{},{id:Object(g.a)()})},p=x({name:"Beginner",rowsCount:9,columnsCount:9,minesCount:9}),F=[p,x({name:"Intermediate",rowsCount:16,columnsCount:16,minesCount:40}),x({name:"Expert",rowsCount:30,columnsCount:16,minesCount:99})],M=function(e){for(var n=Object(o.useRef)(!1),t=arguments.length,i=new Array(t>1?t-1:0),c=1;c<t;c++)i[c-1]=arguments[c];Object(o.useEffect)((function(){n.current?e():n.current=!0}),i)},w=t(21),C=t(72),y=t(73),k=t(13),E=t(14),N=function(){function e(n){Object(k.a)(this,e),this.cell=n}return Object(E.a)(e,[{key:"isEqual",value:function(e,n){return this.cell[e]===n}},{key:"isEmpty",get:function(){return this.isEqual("value",v.Empty)}},{key:"isMined",get:function(){return this.isEqual("value",v.Mine)}},{key:"isHidden",get:function(){return this.isEqual("appearance",O.Hidden)}},{key:"isFlagged",get:function(){return this.isEqual("appearance",O.Flagged)}},{key:"isWrong",get:function(){return this.isEqual("appearance",O.Wrong)}},{key:"isBusted",get:function(){return this.isEqual("appearance",O.Busted)}},{key:"isUnrevealedMine",get:function(){return this.isMined&&!this.isFlagged}}]),e}(),S=t(71),B=function(){function e(n){Object(k.a)(this,e),this.mineField=n}return Object(E.a)(e,[{key:"isBusted",value:function(){return this.mineField.some((function(e){return new N(e).isBusted}))}},{key:"isSolved",value:function(){return!Object(S.a)(this.mineField,(function(e){return new N(e).isMined})).some((function(e){return new N(e).isHidden}))}}]),e}(),I=function(){function e(n){Object(k.a)(this,e),this.length=n}return Object(E.a)(e,[{key:"to2D",value:function(e){var n=e%this.length;return{rowIndex:n,columnIndex:(e-n)/this.length}}},{key:"to1D",value:function(e,n){return n*this.length+e}}]),e}(),_=function(e,n){return e>-1&&e<n},P=function(){function e(n,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new I(n);Object(k.a)(this,e),this.rowsCount=n,this.columnsCount=t,this.indexUtils=i}return Object(E.a)(e,[{key:"getIndexes",value:function(e){for(var n=e.index,t=this.indexUtils.to2D(n),i=t.rowIndex,c=t.columnIndex,a=[],o=-1;o<2;o+=1)for(var u=-1;u<2;u+=1)if(o||u){var s=i+o,r=c+u;_(s,this.rowsCount)&&_(r,this.columnsCount)&&a.push(this.indexUtils.to1D(s,r))}return a}},{key:"canFloodFill",value:function(e,n){return!this.getIndexes(n).some((function(n){return new N(e[n]).isUnrevealedMine}))}},{key:"canReveal",value:function(e,n){return this.countMined(e,n)===this.countBy(e,n,"isFlagged")}},{key:"countMined",value:function(e,n){return this.countBy(e,n,"isMined")}},{key:"countBy",value:function(e,n,t){return this.getIndexes(n).reduce((function(n,i){return new N(e[i])[t]?n+1:n}),0)}}]),e}(),H=function(){var e=Object(o.useState)(p),n=Object(m.a)(e,2),t=n[0],i=n[1],a=t.rowsCount,u=t.columnsCount,s=t.minesCount,r=a*u,l=Object(o.useMemo)((function(){return Array.from({length:r},(function(e,n){return x({index:n,value:v.Empty,appearance:O.Hidden})}))}),[r]),d=Object(o.useState)(l),f=Object(m.a)(d,2),j=f[0],h=f[1],g={isSetup:!1,isBusted:!1,isSolved:!1,hiddenMinesCount:s},F=Object(o.useState)(g),k=Object(m.a)(F,2),E=k[0],S=k[1],I=new P(a,u),_=function(e,n){return Object(w.a)(j,(function(t){null===n||void 0===n||n(t),t[e.index].appearance=O.Visible,function e(n){I.canFloodFill(t,n)&&I.getIndexes(n).forEach((function(n){var i=t[n],c=new N(i),a=c.isMined,o=c.isHidden,u=c.isFlagged;a||!o||u||(i.appearance=O.Visible,e(i))}))}(e)}))},H=function(){h(l),S(g)};return M((function(){H()}),l),M((function(){var e=new B(j);e.isBusted()?S((function(e){return Object(c.a)(Object(c.a)({},e),{},{isBusted:!0})})):e.isSolved()&&(h((function(e){return Object(w.a)(e,(function(e){e.forEach((function(e){new N(e).isMined&&(e.appearance=O.Flagged)}))}))})),S((function(e){return Object(c.a)(Object(c.a)({},e),{},{isSolved:!0,hiddenMinesCount:0})})))}),j),{mineField:j,mineFieldParams:t,mineFieldStatus:E,setMineFieldParams:i,setupMineField:function(e){h(_(e,(function(n){for(var t=Object(C.a)(Object(y.a)(r),[e.index].concat(Object(b.a)(I.getIndexes(e)))),i=new Set;i.size<s;)i.add(t[Math.floor(Math.random()*t.length)]);i.forEach((function(e){n[e].value=v.Mine})),n.forEach((function(e){new N(e).isMined||(e.value=I.countMined(n,e))}))}))),S((function(e){return Object(c.a)(Object(c.a)({},e),{},{isSetup:!0})}))},revealCell:function(e){h(new N(e).isMined?Object(w.a)(j,(function(n){n.forEach((function(n,t){t===e.index?n.appearance=O.Busted:new N(n).isMined&&(n.appearance=O.Visible)}))})):_(e))},toggleFlag:function(e){var n=new N(e).isFlagged;h((function(t){return Object(w.a)(t,(function(t){t[e.index].appearance=n?O.Hidden:O.Flagged}))})),S((function(e){return Object(w.a)(e,(function(e){e.hiddenMinesCount+=n?1:-1}))}))},revealNeighbors:function(e){I.canFloodFill(j,e)?h(_(e)):I.canReveal(j,e)&&h(Object(w.a)(j,(function(n){var t=new Set(I.getIndexes(e));n.forEach((function(e,n){var i=new N(e),c=i.isMined,a=i.isFlagged,o=i.isUnrevealedMine;t.has(n)?e.appearance=!c&&a?O.Wrong:o?O.Busted:O.Visible:c&&(e.appearance=O.Visible)}))})))},reset:H}},D=(t(62),function(e){return e<1?"000":e<10?"00".concat(e):e<100?"0".concat(e):e.toString()}),q=function(e){var n=e.count;return Object(s.jsx)("div",{className:"Counter",children:D(n)})},R=Object(o.memo)(q),V=(t(63),function(e){var n=e.icon,t=void 0===n?Object(s.jsx)(a.a,{icon:["far","meh"]}):n,i=e.onClick;return Object(s.jsx)("button",{type:"button",className:"Face",onClick:i,children:t})}),U=Object(o.memo)(V),W=function(e){var n=Object(o.useRef)();return Object(o.useEffect)((function(){n.current=e})),Object(o.useCallback)((function(){for(var e,t=arguments.length,i=new Array(t),c=0;c<t;c++)i[c]=arguments[c];null===(e=n.current)||void 0===e||e.call.apply(e,[n].concat(i))}),[])},T=function(e,n){var t=Object(o.useRef)();Object(o.useEffect)((function(){t.current=e})),Object(o.useEffect)((function(){if(n){var e=setInterval((function(){var e;null===(e=t.current)||void 0===e||e.call(t)}),n);return function(){clearInterval(e)}}}),[n])},L=function(e){var n=e.isSolved,t=e.isBusted;return n?Object(s.jsx)(a.a,{icon:["far","smile"]}):t?Object(s.jsx)(a.a,{icon:["far","frown"]}):void 0},A=function(){var e=Object(o.useContext)(j),n=e.mineFieldStatus,t=e.mineFieldParams,i=e.reset,c=n.isSetup,a=n.isSolved,u=n.isBusted,r=n.hiddenMinesCount,l=Object(o.useState)(0),d=Object(m.a)(l,2),f=d[0],b=d[1],h=W((function(){b(0),i()}));return T((function(){b(f+1)}),!c||a||u?void 0:1e3),M((function(){b(0)}),t),Object(s.jsxs)("div",{className:"Indicators",children:[Object(s.jsx)(R,{count:r}),Object(s.jsx)(U,{icon:L(n),onClick:h}),Object(s.jsx)(R,{count:f})]})},J=(t(64),t(27)),z=t.n(J),Y=(t(65),function(e){var n=e.className;return Object(s.jsx)("button",{type:"button",className:n,children:Object(s.jsx)(a.a,{icon:["fas","bomb"]})})}),G=function(e){var n=e.cell,t=e.onClick,i=e.onMouseDown,c=e.onContextMenu,o=new N(n),u=o.isHidden,r=o.isEmpty,l=o.isFlagged,d=o.isMined,f=o.isWrong,j=o.isBusted,b=n.value,m="Cell",h="".concat(m," ").concat(m,"__visible"),O=function(){null===c||void 0===c||c(n)};return u?Object(s.jsx)("button",{type:"button","aria-label":"Cell",className:m,onClick:function(){null===t||void 0===t||t(n)},onContextMenu:O}):l?Object(s.jsx)("button",{type:"button",className:m,onContextMenu:O,children:Object(s.jsx)(a.a,{icon:["far","flag"]})}):r?Object(s.jsx)("button",{type:"button","aria-label":"Cell",className:h}):j?Object(s.jsx)(Y,{className:z()(m,"".concat(m,"__busted"))}):d?Object(s.jsx)(Y,{className:h}):f?Object(s.jsx)(Y,{className:z()(h,"".concat(m,"__wrong"))}):Object(s.jsx)("button",{type:"button",className:z()(h,"".concat(m,"__").concat(b)),onMouseDown:function(e){null===i||void 0===i||i(e,n)},children:b})},K=Object(o.memo)(G),Q=function(){var e=Object(o.useContext)(j),n=e.mineFieldParams.rowsCount,t=e.mineField,i=e.mineFieldStatus,c=i.isSetup,a=i.isBusted,u=i.isSolved,r=e.setupMineField,l=e.revealCell,d=e.toggleFlag,f=e.revealNeighbors,b="MineField",m="".concat(b,"Row"),h=W((function(e){(c?l:r)(e)})),O=W((function(e,n){var t=e.target,i=e.nativeEvent;t.addEventListener("mouseup",(function e(c){i.which!==c.which&&f(n),t.removeEventListener("mouseup",e)}))})),v=W((function(e){d(e)}));return Object(s.jsx)("div",{className:b,style:{width:32*n},onContextMenu:function(e){e.preventDefault()},children:Object(s.jsx)("div",{className:z()(m,"".concat(m,"__count-").concat(n),"".concat(a||u?"".concat(m,"__disabled"):"")),children:t.map((function(e){return Object(s.jsx)(K,{cell:e,onClick:h,onMouseDown:O,onContextMenu:v},e.id)}))})})},X=(t(66),function(e){var n=e.item,t=e.name,i=e.checked,c=e.className,a=e.onChange;return Object(s.jsxs)("div",{className:c,children:[Object(s.jsx)("input",{type:"radio",name:t,className:"".concat(c,"Radio"),defaultChecked:i,onChange:function(){null===a||void 0===a||a(n)}}),n.name]})}),Z=Object(o.memo)(X),$=function(){var e=Object(o.useContext)(j),n=e.mineFieldParams,t=e.setMineFieldParams,i="MineFieldProps",c="".concat(i,"Item"),a=W((function(e){t(e)}));return Object(s.jsx)("form",{className:i,children:F.map((function(e){var t=e.name,i=e.id;return Object(s.jsx)(Z,{item:e,name:"MineFieldProps",className:c,checked:t===n.name,onChange:a},i)}))})},ee=function(){return Object(s.jsxs)(j.Provider,{value:Object(c.a)({},H()),children:[Object(s.jsx)(f,{}),Object(s.jsxs)("main",{className:"Minesweeper",children:[Object(s.jsx)(A,{}),Object(s.jsx)(Q,{}),Object(s.jsx)($,{})]}),Object(s.jsx)(l,{})]})},ne=function(){return Object(s.jsx)(ee,{})},te=t(45),ie=t(20),ce=t(46),ae=t(31),oe=t(47);(function(){ie.b.add(ce.a,oe.a,ae.a,ae.c,ae.b,ae.d)})(),Object(te.render)(Object(s.jsx)(u.a.StrictMode,{children:Object(s.jsx)(ne,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.fb8f5f2d.chunk.js.map